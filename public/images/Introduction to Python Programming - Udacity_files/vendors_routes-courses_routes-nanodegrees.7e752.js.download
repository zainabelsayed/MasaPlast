(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1622:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(0),a=n.n(i),s=n(2469),l=n.n(s),u=n(2474),c=n.n(u),f=n(2476),d=n.n(f),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m,y,v=d()(function(){if(!document)return!1;var e=document.createElement("div");return e.innerHTML="<svg />",e.firstChild&&"http://www.w3.org/2000/svg"===e.firstChild.namespaceURI}),b=d()(function(){return!(!v()||"undefined"==typeof window||null===window)&&(window.XMLHttpRequest||window.XDomainRequest)}),g=(m=function(e){return"(?:(?:\\s|\\:)"+e+")"},y=new RegExp("(?:("+m("id")+')="([^"]+)")|(?:('+m("href")+"|"+m("role")+"|"+m("arcrole")+')="\\#([^"]+)")|(?:="url\\(\\#([^\\)]+)\\)")|(?:url\\(\\#([^\\)]+)\\))',"g"),function(e,t,n){var o=function(e){return e+"___"+t};return e.replace(y,function(e,t,r,i,a,s,l){return r?t+'="'+o(r)+'"':a?i+'="'+n+"#"+o(a)+'"':s?'="url('+n+"#"+o(s)+')"':l?"url("+n+"#"+o(l)+")":void 0})}),w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.name="InlineSVGError",n.isSupportedBrowser=!0,n.isConfigurationError=!1,n.isUnsupportedBrowserError=!1,n.message=e,h(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}(),_=function(e,t){var n=new w(e);return p({},n,t)},O=function(e){return _(e,{isConfigurationError:!0})},x=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var S=l.a.use(c.a),P={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed",UNSUPPORTED:"unsupported"},C={},T={},k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLoad=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.props,i=r.onLoad,a=r.src;e?n.fail(e):n.isActive&&n.setState({loadedText:t.text,status:P.LOADED},function(){i(a,o)})},n.state={status:P.PENDING},n.isActive=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.PureComponent),E(t,[{key:"componentWillMount",value:function(){this.isActive=!0}},{key:"componentDidMount",value:function(){var e,t,n=this.state.status,o=this.props,r=o.src,i=o.supportTest;if(n===P.PENDING){if(i())return r?void this.startLoad():void this.fail(O("Missing source"));this.fail(((t=e)||(t="Unsupported Browser"),_(t,{isSupportedBrowser:!1,isUnsupportedBrowserError:!0})))}}},{key:"componentDidUpdate",value:function(e){var t=this.props.src;if(e.src!==t){if(t)return void this.startLoad();this.fail(O("Missing source"))}}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"getFile",value:function(e){var t=this,n=this.props,o=n.cacheGetRequests,r=n.src;if(o){if(T[r]){var i=x(T[r],2),a=i[0],s=i[1];e(a,s,!0)}C[r]||(C[r]=[],S.get(r,function(e,n){C[r].forEach(function(o){var i=t.props.src;T[r]=[e,n],r===i&&o(e,n)})})),C[r].push(e)}else S.get(r,function(n,o){var i=t.props.src;r===i&&e(n,o)})}},{key:"fail",value:function(e){var t=this.props.onError,n=e.isUnsupportedBrowserError?P.UNSUPPORTED:P.FAILED;this.isActive&&this.setState({status:n},function(){"function"==typeof t&&t(e)})}},{key:"startLoad",value:function(){this.isActive&&this.setState({status:P.LOADING},this.load)}},{key:"load",value:function(){var e=this.props.src.match(/data:image\/svg[^,]*?(;base64)?,(.*)/);return e?this.handleLoad(null,{text:e[1]?atob(e[2]):decodeURIComponent(e[2])}):this.getFile(this.handleLoad)}},{key:"getClassName",value:function(){var e=this.state.status,t=this.props.className,n="isvg "+e;return t&&(n+=" "+t),n}},{key:"processSVG",value:function(e){var t=this.props,n=t.uniquifyIDs,o=t.uniqueHash,r=t.baseURL,i=t.processSVG,a=e;return i&&(a=i(a)),n?g(a,o||function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n="abcdefghijklmnopqrstuvwxyz",o=n+n.toUpperCase()+"1234567890",r="",i=0;i<t;i++)r+=(e=o)[Math.floor(Math.random()*e.length)];return r}(),r):a}},{key:"renderContents",value:function(){var e=this.state.status,t=this.props,n=t.children,o=t.preloader;switch(e){case P.UNSUPPORTED:case P.FAILED:return n;default:return o}}},{key:"render",value:function(){var e=this.state.loadedText,t=this.props,n=t.style,o=t.wrapper,r=void 0,i=void 0;return e?i={__html:this.processSVG(e)}:r=this.renderContents(),o({style:n,className:this.getClassName(),dangerouslySetInnerHTML:i},r)}}]),t}();k.propTypes={baseURL:a.a.string,cacheGetRequests:a.a.bool,children:a.a.node,className:a.a.string,onError:a.a.func,onLoad:a.a.func,preloader:a.a.node,processSVG:a.a.func,src:a.a.string.isRequired,style:a.a.object,supportTest:a.a.func,uniqueHash:a.a.string,uniquifyIDs:a.a.bool,wrapper:a.a.func},k.defaultProps={baseURL:"",cacheGetRequests:!1,onLoad:function(){},supportTest:b,uniquifyIDs:!0,wrapper:r.a.createFactory("span")};t.default=k},1640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},1641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(o.default.findDOMNode(e))};var o=i(n(16)),r=i(n(1655));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var o=i(n(1875)),r=i(n(2561));function i(e){return e&&e.__esModule?e:{default:e}}t.default=o.default,t.Modal=r.default},1655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&e.ownerDocument||document},e.exports=t.default},1658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2564);Object.defineProperty(t,"UreactRadioQuizAtom",{enumerable:!0,get:function(){return u(o).default}});var r=n(2571);Object.defineProperty(t,"UreactCheckboxQuizAtom",{enumerable:!0,get:function(){return u(r).default}});var i=n(2572);Object.defineProperty(t,"UreactTextAtom",{enumerable:!0,get:function(){return u(i).default}});var a=n(2573);Object.defineProperty(t,"UreactInstructorNotes",{enumerable:!0,get:function(){return u(a).default}});var s=n(2574);Object.defineProperty(t,"UreactImageAtom",{enumerable:!0,get:function(){return u(s).default}});var l=n(2592);function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"UreactVideoAtom",{enumerable:!0,get:function(){return u(l).default}})},1659:function(e,t,n){"use strict";var o=i(n(2565)),r=i(n(2568));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={QuizPrompt:o.default,QuizContainer:r.default}},1678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e),n=(0,r.default)(t),a=t&&t.documentElement,s={top:0,left:0,height:0,width:0};if(!t)return;if(!(0,o.default)(a,e))return s;void 0!==e.getBoundingClientRect&&(s=e.getBoundingClientRect());return s={top:s.top+(n.pageYOffset||a.scrollTop)-(a.clientTop||0),left:s.left+(n.pageXOffset||a.scrollLeft)-(a.clientLeft||0),width:(null==s.width?e.offsetWidth:s.width)||0,height:(null==s.height?e.offsetHeight:s.height)||0}};var o=a(n(1773)),r=a(n(1679)),i=a(n(1655));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default},1683:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=d(n(1)),i=d(n(0)),a=d(n(1880)),s=d(n(511)),l=d(n(2618)),u=d(n(2620)),c=d(n(5)),f=d(n(2622));function d(e){return e&&e.__esModule?e:{default:e}}var p,h,m,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}var b=(0,c.default)(f.default)((m=h=function(t){function i(){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=o=v(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this].concat(s))),o.state={selectedFile:0,isLoading:!0,files:o.props.files||{},name:a.default.generateRandomId()},o._updateData=function(t){var n=[];e.each(t,function(o,r){n.push(t[e.findIndex(t,{name:o.name})]||o)}),o.setState({files:n})},o.handleFileSelect=function(e,t){e.preventDefault(),o.setState({selectedFile:t})},o.handleFileAdd=function(e){var t=o.state.files;e&&(t.push({text:"",name:e}),o.setState({files:t}),o.props.onChange(t))},o.handleFileRename=function(e,t){var n=o.state.files;t&&n[e]&&(n[e].name=t,o.setState({files:n}),o.props.onChange(n))},o.handleFileDelete=function(t,n){t.preventDefault(),t.stopPropagation();var r=o.state,i=r.files,a=r.selectedFile,s=e.findIndex(i,n),l=e.clone(i);window.confirm("Do you really want to delete "+n.name+"?")&&(l.splice(s,1),a===s&&o.setState({selectedFile:0}),o.setState({files:l}),o.props.onChange(l))},o.handleFileChange=function(e){var t=o.state,n=t.selectedFile,r=t.files;r[n]&&(r[n].text=e,o.setState({updatedFiles:r}),o.props.onChange(r))},v(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r.default.Component),y(i,[{key:"componentWillMount",value:function(){var e=this,t=this.props.files;this._updateData(t),this.props.onChange(this.state.files),n.e(16).then(function(t){e.AceEditor=n(3161).default,n(3166),n(3167),n(3168),n(3169),n(3170),n(3171),n(3172),n(3173),n(3174),n(3176),n(3177),n(3178),n(3179),n(3180),n(3181),e.setState({isLoading:!1})}.bind(null,n)).catch(n.oe)}},{key:"componentWillReceiveProps",value:function(e){var t=e.files;this._updateData(t)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.canDelete,o=e.canAdd,i=e.readOnly,a=e.onChange,c=e.ace,f=this.state,d=f.files,p=f.selectedFile,h=f.isLoading,m=f.name,y=n?this.handleFileDelete:null,v=o?this.handleFileAdd:null,b=o?this.handleFileRename:null,g=d[p]?d[p].name:"",w=(d[p]&&d[p].text,null);return h?r.default.createElement(s.default,null):((d.length>1||y||v)&&(w=r.default.createElement(l.default,{files:d,container:this,selectedFile:p,onSelect:this.handleFileSelect,onDelete:y,onAdd:v,onRename:b})),r.default.createElement("div",{styleName:"code-editor"},w,r.default.createElement("div",{styleName:"editor"},g?r.default.createElement(u.default,{file:d[p],handleFileChange:this.handleFileChange,name:m,id:t,onChange:a,readOnly:i,ace:c,AceEditor:this.AceEditor}):r.default.createElement("p",null,"Get started by adding a new file"))))}}]),i}(),h.displayName="ureact-code-editor",h.propTypes={files:i.default.arrayOf(i.default.shape({text:i.default.string.isRequired,name:i.default.name})),onChange:i.default.func,id:i.default.string,canDelete:i.default.bool,canAdd:i.default.bool,readOnly:i.default.bool,ace:i.default.object},h.defaultProps={files:[],onChange:e.noop,canDelete:!1,canAdd:!1,readOnly:!1},p=m))||p;t.default=b}).call(this,n(4))},1716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return(0,o.default)(e,t,n,i),{remove:function(){(0,r.default)(e,t,n,i)}}};var o=i(n(1849)),r=i(n(2447));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1717:function(e,t,n){"use strict";t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=a(n(1)),i=a(n(1852));function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(function(e,t,n,i,a){var s=e[t],l=void 0===s?"undefined":o(s);return r.default.isValidElement(s)?new Error("Invalid "+i+" `"+a+"` of type ReactElement supplied to `"+n+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===l&&"function"==typeof s.render||1===s.nodeType?null:new Error("Invalid "+i+" `"+a+"` of value `"+s+"` supplied to `"+n+"`, expected a ReactComponent or a DOMElement.")})},1718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e="function"==typeof e?e():e,i.default.findDOMNode(e)||t};var o,r=n(16),i=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},1721:function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,i=String(e);return(n=o[i.toLowerCase()])?n:(n=r[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var i;if(i=o[t.toLowerCase()])return i===n;if(i=r[t.toLowerCase()])return i===n}else if("number"==typeof t)return t===n;return!1}};var o=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(i=97;i<123;i++)o[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)o[i-48]=i;for(i=1;i<13;i++)o["f"+i]=i+111;for(i=0;i<10;i++)o["numpad "+i]=i+96;var a=t.names=t.title={};for(i in o)a[o[i]]=i;for(var s in r)o[s]=r[s]},1773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1640),i=(o=r)&&o.__esModule?o:{default:o};function a(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}t.default=i.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):a(e,t)}:a,e.exports=t.default},1774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var u="",c="",f=t;if("string"==typeof t){if(void 0===n)return e.style[(0,o.default)(t)]||(0,i.default)(e).getPropertyValue((0,r.default)(t));(f={})[t]=n}Object.keys(f).forEach(function(t){var n=f[t];n||0===n?(0,l.default)(t)?c+=t+"("+n+") ":u+=(0,r.default)(t)+": "+n+";":(0,a.default)(e,(0,r.default)(t))}),c&&(u+=s.transform+": "+c+";");e.style.cssText+=";"+u};var o=u(n(1846)),r=u(n(2442)),i=u(n(2444)),a=u(n(2445)),s=n(1847),l=u(n(2446));function u(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e);if(void 0===t)return n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop;n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t};var o,r=n(1679),i=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},1776:function(e,t,n){"use strict";t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=a(n(1)),i=a(n(1852));function a(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(function(e,t,n,i,a){var s=e[t],l=void 0===s?"undefined":o(s);return r.default.isValidElement(s)?new Error("Invalid "+i+" `"+a+"` of type ReactElement supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):"function"!==l&&"string"!==l?new Error("Invalid "+i+" `"+a+"` of value `"+s+"` supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):null})},1777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(1)),r=l(n(16)),i=l(n(1717)),a=l(n(1641)),s=l(n(1718));function l(e){return e&&e.__esModule?e:{default:e}}var u=o.default.createClass({displayName:"Portal",propTypes:{container:o.default.PropTypes.oneOfType([i.default,o.default.PropTypes.func])},componentDidMount:function(){this._renderOverlay()},componentDidUpdate:function(){this._renderOverlay()},componentWillReceiveProps:function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,s.default)(e.container,(0,a.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},componentWillUnmount:function(){this._unrenderOverlay(),this._unmountOverlayTarget()},_mountOverlayTarget:function(){this._overlayTarget||(this._overlayTarget=document.createElement("div"),this._portalContainerNode=(0,s.default)(this.props.container,(0,a.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},_unmountOverlayTarget:function(){this._overlayTarget&&(this._portalContainerNode.removeChild(this._overlayTarget),this._overlayTarget=null),this._portalContainerNode=null},_renderOverlay:function(){var e=this.props.children?o.default.Children.only(this.props.children):null;null!==e?(this._mountOverlayTarget(),this._overlayInstance=r.default.unstable_renderSubtreeIntoContainer(this,e,this._overlayTarget)):(this._unrenderOverlay(),this._unmountOverlayTarget())},_unrenderOverlay:function(){this._overlayTarget&&(r.default.unmountComponentAtNode(this._overlayTarget),this._overlayInstance=null)},render:function(){return null},getMountNode:function(){return this._overlayTarget},getOverlayDOMNode:function(){if(!this.isMounted())throw new Error("getOverlayDOMNode(): A component must be mounted to have a DOM node.");return this._overlayInstance?r.default.findDOMNode(this._overlayInstance):null}});t.default=u,e.exports=t.default},1779:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}},1844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=v(n(99)),a=v(n(2440)),s=v(n(1678)),l=v(n(1845)),u=v(n(1775)),c=v(n(1848)),f=v(n(1)),d=v(n(16)),p=v(n(1716)),h=v(n(1850)),m=v(n(1641)),y=v(n(1851));function v(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.state={affixed:"top",position:null,top:null},o._needPositionUpdate=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,p.default)((0,y.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,p.default)((0,m.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()}},{key:"componentWillReceiveProps",value:function(){this._needPositionUpdate=!0}},{key:"componentDidUpdate",value:function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()}},{key:"onWindowScroll",value:function(){this.onUpdate()}},{key:"onDocumentClick",value:function(){var e=this;(0,c.default)(function(){return e.onUpdate()})}},{key:"onUpdate",value:function(){var e=this;if(this._isMounted){var t=this.props,n=t.offsetTop,o=t.viewportOffsetTop,r=(0,u.default)((0,y.default)(this))+(o||0);r<=n?this.updateState("top",null,null):r>this.getPositionTopMax()?"bottom"===this.state.affixed?this.updateStateAtBottom():this.setState({affixed:"bottom",position:"absolute",top:null},function(){e._isMounted&&e.updateStateAtBottom()}):this.updateState("affix","fixed",o)}}},{key:"getPositionTopMax",value:function(){return(0,h.default)((0,m.default)(this))-(0,a.default)(d.default.findDOMNode(this))-this.props.offsetBottom}},{key:"updateState",value:function(e,t,n){var o=this;if(e!==this.state.affixed||t!==this.state.position||n!==this.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);this.props["onAffix"+r]&&this.props["onAffix"+r](),this.setState({affixed:e,position:t,top:n},function(){o.props["onAffixed"+r]&&o.props["onAffixed"+r]()})}}},{key:"updateStateAtBottom",value:function(){var e=this.getPositionTopMax(),t=(0,l.default)(d.default.findDOMNode(this)),n=(0,s.default)(t).top;this.updateState("bottom","absolute",e-n)}},{key:"render",value:function(){var e=f.default.Children.only(this.props.children),t=e.props,n=t.className,r=t.style,a=this.state,s=a.affixed,l={position:a.position,top:a.top},u=void 0,c=void 0;return"top"===s?(u=this.props.topClassName,c=this.props.topStyle):"bottom"===s?(u=this.props.bottomClassName,c=this.props.bottomStyle):(u=this.props.affixClassName,c=this.props.affixStyle),f.default.cloneElement(e,{className:(0,i.default)(u,n),style:o({},l,c,r)})}}]),t}();b.propTypes={offsetTop:f.default.PropTypes.number,viewportOffsetTop:f.default.PropTypes.number,offsetBottom:f.default.PropTypes.number,topClassName:f.default.PropTypes.string,topStyle:f.default.PropTypes.object,affixClassName:f.default.PropTypes.string,affixStyle:f.default.PropTypes.object,bottomClassName:f.default.PropTypes.string,bottomStyle:f.default.PropTypes.object,onAffix:f.default.PropTypes.func,onAffixed:f.default.PropTypes.func,onAffixTop:f.default.PropTypes.func,onAffixedTop:f.default.PropTypes.func,onAffixBottom:f.default.PropTypes.func,onAffixedBottom:f.default.PropTypes.func},b.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=b,e.exports=t.default},1845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.default)(e),n=e&&e.offsetParent;for(;n&&"html"!==a(e)&&"static"===(0,r.default)(n,"position");)n=n.offsetParent;return n||t.documentElement};var o=i(n(1655)),r=i(n(1774));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.nodeName&&e.nodeName.toLowerCase()}e.exports=t.default},1846:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e.replace(a,"ms-"))};var o,r=n(2441),i=(o=r)&&o.__esModule?o:{default:o};var a=/^-ms-/;e.exports=t.default},1847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var o,r=n(1640);var i="transform",a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,p=void 0,h=void 0,m=void 0,y=void 0;if(((o=r)&&o.__esModule?o:{default:o}).default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),o=void 0,r=void 0,i="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){i="-"+s.toLowerCase(),o=t[s]("TransitionEnd"),r=t[s]("AnimationEnd");break}}!o&&"transitionProperty"in e&&(o="transitionend");!r&&"animationName"in e&&(r="animationend");return e=null,{animationEnd:r,transitionEnd:o,prefix:i}}();a=v.prefix,t.transitionEnd=s=v.transitionEnd,t.animationEnd=l=v.animationEnd,t.transform=i=a+"-"+i,t.transitionProperty=u=a+"-transition-property",t.transitionDuration=c=a+"-transition-duration",t.transitionDelay=d=a+"-transition-delay",t.transitionTiming=f=a+"-transition-timing-function",t.animationName=p=a+"-animation-name",t.animationDuration=h=a+"-animation-duration",t.animationTiming=m=a+"-animation-delay",t.animationDelay=y=a+"-animation-timing-function"}t.transform=i,t.transitionProperty=u,t.transitionTiming=f,t.transitionDelay=d,t.transitionDuration=c,t.transitionEnd=s,t.animationName=p,t.animationDuration=h,t.animationTiming=m,t.animationDelay=y,t.animationEnd=l,t.default={transform:i,end:s,property:u,timing:f,delay:d,duration:c}},1848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1640),i=(o=r)&&o.__esModule?o:{default:o};var a,s="clearTimeout",l=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),o=setTimeout(e,n);return c=t,o},u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some(function(e){var t=u(e,"request");if(t in window)return s=u(e,"cancel"),l=function(e){return window[t](e)}});var c=(new Date).getTime();(a=function(e){return l(e)}).cancel=function(e){window[s]&&"function"==typeof window[s]&&window[s](e)},t.default=a,e.exports=t.default},1849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1640);var i=function(){};((o=r)&&o.__esModule?o:{default:o}).default&&(i=document.addEventListener?function(e,t,n,o){return e.addEventListener(t,n,o||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)})}:void 0),t.default=i,e.exports=t.default},1850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default},1851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(o.default.findDOMNode(e))};var o=i(n(16)),r=i(n(2448));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},1852:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){function t(t,n,o,r,i,a){var s=r||"<<anonymous>>",l=a||o;if(null==n[o])return t?new Error("Required "+i+" `"+l+"` was not specified in `"+s+"`."):null;for(var u=arguments.length,c=Array(u>6?u-6:0),f=6;f<u;f++)c[f-6]=arguments[f];return e.apply(void 0,[n,o,s,i,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}},1853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},1854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=c(n(1)),a=c(n(1777)),s=c(n(1855)),l=c(n(1856)),u=c(n(1776));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.state={exited:!e.show},o.onHiddenListener=o.handleHidden.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})}},{key:"render",value:function(){var e=this.props,t=e.container,n=e.containerPadding,o=e.target,r=e.placement,u=e.shouldUpdatePosition,c=e.rootClose,f=e.children,d=e.transition,p=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(p.show||d&&!this.state.exited))return null;var h=f;if(h=i.default.createElement(s.default,{container:t,containerPadding:n,target:o,placement:r,shouldUpdatePosition:u},h),d){var m=p.onExit,y=p.onExiting,v=p.onEnter,b=p.onEntering,g=p.onEntered;h=i.default.createElement(d,{in:p.show,transitionAppear:!0,onExit:m,onExiting:y,onExited:this.onHiddenListener,onEnter:v,onEntering:b,onEntered:g},h)}return c&&(h=i.default.createElement(l.default,{onRootClose:p.onHide},h)),i.default.createElement(a.default,{container:t},h)}},{key:"handleHidden",value:function(){var e;(this.setState({exited:!0}),this.props.onExited)&&(e=this.props).onExited.apply(e,arguments)}}]),t}();f.propTypes=o({},a.default.propTypes,s.default.propTypes,{show:i.default.PropTypes.bool,rootClose:i.default.PropTypes.bool,onHide:function(e){var t=i.default.PropTypes.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.apply(void 0,[e].concat(o))},transition:u.default,onEnter:i.default.PropTypes.func,onEntering:i.default.PropTypes.func,onEntered:i.default.PropTypes.func,onExit:i.default.PropTypes.func,onExiting:i.default.PropTypes.func,onExited:i.default.PropTypes.func}),t.default=f,e.exports=t.default},1855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=p(n(99)),a=n(1),s=p(a),l=p(n(16)),u=p(n(1717)),c=p(n(2460)),f=p(n(1718)),d=p(n(1641));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"componentDidMount",value:function(){this.updatePosition(this.getTarget())}},{key:"componentWillReceiveProps",value:function(){this._needsFlush=!0}},{key:"componentDidUpdate",value:function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=h(e,["children","className"]),l=this.state,u=l.positionLeft,c=l.positionTop,f=h(l,["positionLeft","positionTop"]);delete r.target,delete r.container,delete r.containerPadding,delete r.shouldUpdatePosition;var d=s.default.Children.only(t);return(0,a.cloneElement)(d,o({},r,f,{positionLeft:u,positionTop:c,className:(0,i.default)(n,d.props.className),style:o({},d.props.style,{left:u,top:c})}))}},{key:"getTarget",value:function(){var e=this.props.target,t="function"==typeof e?e():e;return t&&l.default.findDOMNode(t)||null}},{key:"maybeUpdatePosition",value:function(e){var t=this.getTarget();(this.props.shouldUpdatePosition||t!==this._lastTarget||e)&&this.updatePosition(t)}},{key:"updatePosition",value:function(e){if(this._lastTarget=e,e){var t=l.default.findDOMNode(this),n=(0,f.default)(this.props.container,(0,d.default)(this).body);this.setState((0,c.default)(this.props.placement,t,e,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})}}]),t}();m.propTypes={target:s.default.PropTypes.oneOfType([u.default,s.default.PropTypes.func]),container:s.default.PropTypes.oneOfType([u.default,s.default.PropTypes.func]),containerPadding:s.default.PropTypes.number,placement:s.default.PropTypes.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:s.default.PropTypes.bool},m.displayName="Position",m.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=m,e.exports=t.default},1856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(1773)),i=u(n(1)),a=u(n(16)),s=u(n(1716)),l=u(n(1641));function u(e){return e&&e.__esModule?e:{default:e}}var c=27;var f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.handleMouseCapture=function(e){var t;o.preventMouseRootClose=!!((t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey)||!function(e){return 0===e.button}(e)||(0,r.default)(a.default.findDOMNode(o),e.target)},o.handleMouse=function(e){!o.preventMouseRootClose&&o.props.onRootClose&&o.props.onRootClose(e)},o.handleKeyUp=function(e){e.keyCode===c&&o.props.onRootClose&&o.props.onRootClose(e)},o.preventMouseRootClose=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"componentDidMount",value:function(){this.props.disabled||this.addEventListeners()}},{key:"componentDidUpdate",value:function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()}},{key:"componentWillUnmount",value:function(){this.props.disabled||this.removeEventListeners()}},{key:"addEventListeners",value:function(){var e=this.props.event,t=(0,l.default)(this);this.documentMouseCaptureListener=(0,s.default)(t,e,this.handleMouseCapture,!0),this.documentMouseListener=(0,s.default)(t,e,this.handleMouse),this.documentKeyupListener=(0,s.default)(t,"keyup",this.handleKeyUp)}},{key:"removeEventListeners",value:function(){this.documentMouseCaptureListener&&this.documentMouseCaptureListener.remove(),this.documentMouseListener&&this.documentMouseListener.remove(),this.documentKeyupListener&&this.documentKeyupListener.remove()}},{key:"render",value:function(){return this.props.children}}]),t}();f.displayName="RootCloseWrapper",f.propTypes={onRootClose:i.default.PropTypes.func,children:i.default.PropTypes.element,disabled:i.default.PropTypes.bool,event:i.default.PropTypes.oneOf(["click","mousedown"])},f.defaultProps={event:"click"},t.default=f,e.exports=t.default},1857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=c(n(99)),a=c(n(1849)),s=c(n(1847)),l=c(n(1)),u=c(n(16));function c(e){return e&&e.__esModule?e:{default:e}}var f=s.default.end,d=t.UNMOUNTED=0,p=t.EXITED=1,h=t.ENTERING=2,m=t.ENTERED=3,y=t.EXITING=4,v=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=void 0;return o.nextStatus=null,e.in?e.transitionAppear?(r=p,o.nextStatus=h):r=m:r=e.unmountOnExit||e.mountOnEnter?d:p,o.state={status:r},o.nextCallback=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),r(t,[{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.status;e.in?(t===d&&this.setState({status:p}),t!==h&&t!==m&&(this.nextStatus=h)):t!==h&&t!==m||(this.nextStatus=y)}},{key:"componentDidUpdate",value:function(){this.updateStatus()}},{key:"componentWillUnmount",value:function(){this.cancelNextCallback()}},{key:"updateStatus",value:function(){var e=this;if(null!==this.nextStatus){this.cancelNextCallback();var t=u.default.findDOMNode(this);this.nextStatus===h?(this.props.onEnter(t),this.safeSetState({status:h},function(){e.props.onEntering(t),e.onTransitionEnd(t,function(){e.safeSetState({status:m},function(){e.props.onEntered(t)})})})):(this.props.onExit(t),this.safeSetState({status:y},function(){e.props.onExiting(t),e.onTransitionEnd(t,function(){e.safeSetState({status:p},function(){e.props.onExited(t)})})})),this.nextStatus=null}else this.props.unmountOnExit&&this.state.status===p&&this.setState({status:d})}},{key:"cancelNextCallback",value:function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)}},{key:"safeSetState",value:function(e,t){this.setState(e,this.setNextCallback(t))}},{key:"setNextCallback",value:function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback}},{key:"onTransitionEnd",value:function(e,t){this.setNextCallback(t),e?((0,a.default)(e,f,this.nextCallback),setTimeout(this.nextCallback,this.props.timeout)):setTimeout(this.nextCallback,0)}},{key:"render",value:function(){var e=this.state.status;if(e===d)return null;var n=this.props,r=n.children,a=n.className,s=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(n,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete s[e]});var u=void 0;e===p?u=this.props.exitedClassName:e===h?u=this.props.enteringClassName:e===m?u=this.props.enteredClassName:e===y&&(u=this.props.exitingClassName);var c=l.default.Children.only(r);return l.default.cloneElement(c,o({},s,{className:(0,i.default)(c.props.className,a,u)}))}}]),t}();function b(){}v.propTypes={in:l.default.PropTypes.bool,mountOnEnter:l.default.PropTypes.bool,unmountOnExit:l.default.PropTypes.bool,transitionAppear:l.default.PropTypes.bool,timeout:l.default.PropTypes.number,exitedClassName:l.default.PropTypes.string,exitingClassName:l.default.PropTypes.string,enteredClassName:l.default.PropTypes.string,enteringClassName:l.default.PropTypes.string,onEnter:l.default.PropTypes.func,onEntering:l.default.PropTypes.func,onEntered:l.default.PropTypes.func,onExit:l.default.PropTypes.func,onExiting:l.default.PropTypes.func,onExited:l.default.PropTypes.func},v.displayName="Transition",v.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:b,onEntering:b,onEntered:b,onExit:b,onExiting:b,onExited:b},t.default=v},1860:function(e,t,n){"use strict";var o=n(1861),r=n(1862);function i(e){this.request=e.request,this.xhr=e.xhr,this.headers=e.headers||{},this.status=e.status||0,this.text=e.text,this.body=e.body,this.contentType=e.contentType,this.isHttpError=e.status>=400}i.prototype.header=o.prototype.header,i.fromRequest=function(e){return new i(r(e))},e.exports=i},1861:function(e,t,n){"use strict";function o(e){var t="string"==typeof e?{url:e}:e||{};this.method=t.method?t.method.toUpperCase():"GET",this.url=t.url,this.headers=t.headers||{},this.body=t.body,this.timeout=t.timeout||0,this.errorOn404=null==t.errorOn404||t.errorOn404,this.onload=t.onload,this.onerror=t.onerror}o.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this},o.prototype.header=function(e,t){var n;for(n in this.headers)if(this.headers.hasOwnProperty(n)&&e.toLowerCase()===n.toLowerCase()){if(1===arguments.length)return this.headers[n];delete this.headers[n];break}if(null!=t)return this.headers[e]=t,t},e.exports=o},1862:function(e,t,n){"use strict";var o=n(1779);e.exports=function(e){var t=e.xhr,n={request:e,xhr:t};try{var r,i,a,s={};if(t.getAllResponseHeaders)for(r=t.getAllResponseHeaders().split("\n"),i=0;i<r.length;i++)(a=r[i].match(/\s*([^\s]+):\s+([^\s]+)/))&&(s[a[1]]=a[2]);n=o(n,{status:t.status,contentType:t.contentType||t.getResponseHeader&&t.getResponseHeader("Content-Type"),headers:s,text:t.responseText,body:t.response||t.responseText})}catch(e){}return n}},1863:function(e,t,n){"use strict";e.exports=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}}},1875:function(e,t,n){"use strict";(function(t){var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(2531),a=(o=i)&&o.__esModule?o:{default:o};var s=n(21);e.exports=s({displayName:"atoms/video-player/index",getInitialState:function(){return{hasStarted:!1}},onPlay:function(){this.setState({hasStarted:!0})},render:function(){var e=this.state.hasStarted;return t.createElement(a.default,r({},this.props,{hasStarted:e,onPlay:this.onPlay}))}})}).call(this,n(1))},1876:function(e,t,n){e.exports={container:"quiz-styles--container--2-qpA",prompt:"quiz-styles--prompt--ZLAZm","question-number":"quiz-styles--question-number--3EbH8"}},1877:function(e,t,n){"use strict";e.exports={"Question <%= index %> of <%= count %>":"习题 <%= index %>/<%= count %>","Quiz Question":"练习题"}},1878:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s(n(2569)),a=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=(u=l=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleAnswerClick=function(e){var n=void 0;if(t.props.allowMultiple){var r=t.state.answerSelectedStates;n=c({},r,d({},e,!r[e]))}else n=d({},e,!0);t.setState({answerSelectedStates:n}),t.props.onChange(o.keys(o.pickBy(n,function(e){return!0===e})))},t.state={answerSelectedStates:o.reduce(e.defaultSelectedIds,function(e,t){return e[t]=!0,e},{})},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),f(n,[{key:"componentWillMount",value:function(){this.handleAnswerClick=o.debounce(this.handleAnswerClick,10)}},{key:"render",value:function(){var t=this,n=this.props,r=n.answers,a=n.isCorrect,s=n.allowMultiple,l=this.state.answerSelectedStates;return e.createElement("ul",null,o.map(r,function(n){var o=!!l[n.id];return e.createElement(i.default,{key:n.id,id:n.id,text:n.text,onClick:function(e){return t.handleAnswerClick(e)},isChecked:o,isCorrect:o?a:null,isRadio:!s})}))}}]),n}(),l.displayName="ureact-atoms/common/answer-selector",l.propTypes={onChange:a.default.func,answers:a.default.arrayOf(a.default.shape({id:a.default.string,text:a.default.string})),allowMultiple:a.default.bool,defaultSelectedIds:a.default.array,isCorrect:a.default.bool},l.defaultProps={onChange:o.noop,answers:[],defaultSelectedIds:[],isCorrect:null,allowMultiple:!1},u);t.default=p}).call(this,n(1),n(4))},1880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r={default:"txt",modes:{js:"javascript",html:"html",java:"java",py:"python",xml:"xml",md:"markdown",css:"css",json:"json",c:"c_cpp",cc:"c_cpp",cpp:"c_cpp",h:"c_cpp",hpp:"c_cpp",m:"objectivec",swift:"swift",txt:"text",sql:"sql",r:"r",rb:"ruby"},getExtension:function(e){var t=e.split("."),n=o(t,2)[1];return(void 0===n?r.default:n).toLowerCase()},getMode:function(e){var t=e?r.getExtension(e):"";return r.modes[t]||"text"},generateRandomId:function(){return"ureact-code-editor-"+Math.random().toString(36).slice(-8)}};t.default=r},2434:function(e,t,n){var o;o={},e.exports=o,o.simpleFilter=function(e,t){return t.filter(function(t){return o.test(e,t)})},o.test=function(e,t){return null!==o.match(e,t)},o.match=function(e,t,n){n=n||{};var o,r=0,i=[],a=t.length,s=0,l=0,u=n.pre||"",c=n.post||"",f=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var d=0;d<a;d++)o=t[d],f[d]===e[r]?(o=u+o+c,r+=1,l+=1+l):l=0,s+=l,i[i.length]=o;return r===e.length?(s=f===e?1/0:s,{rendered:i.join(""),score:s}):null},o.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce(function(t,r,i,a){var s=r;n.extract&&(s=n.extract(r));var l=o.match(e,s,n);return null!=l&&(t[t.length]={string:l.rendered,score:l.score,index:i,original:r}),t},[]).sort(function(e,t){var n=t.score-e.score;return n||e.index-t.index})):[]}},2439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var o=f(n(1844)),r=f(n(2449)),i=f(n(2450)),a=f(n(1854)),s=f(n(1777)),l=f(n(1855)),u=f(n(1857)),c=f(n(1856));function f(e){return e&&e.__esModule?e:{default:e}}t.Affix=o.default,t.AutoAffix=r.default,t.Modal=i.default,t.Overlay=a.default,t.Portal=s.default,t.Position=l.default,t.Transition=u.default,t.RootCloseWrapper=c.default},2440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,o.default)(e).height};var o=i(n(1678)),r=i(n(1679));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(o,function(e,t){return t.toUpperCase()})};var o=/-(.)/g;e.exports=t.default},2442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e).replace(a,"-ms-")};var o,r=n(2443),i=(o=r)&&o.__esModule?o:{default:o};var a=/^ms-/;e.exports=t.default},2443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(o,"-$1").toLowerCase()};var o=/([A-Z])/g;e.exports=t.default},2444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,i.default)(t))&&(t="styleFloat");var o=e.currentStyle[t]||null;if(null==o&&n&&n[t]&&(o=n[t]),s.test(o)&&!a.test(t)){var r=n.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),n.left="fontSize"===t?"1em":o,o=n.pixelLeft+"px",n.left=r,u&&(l.left=u)}return o}}};var o,r=n(1846),i=(o=r)&&o.__esModule?o:{default:o};var a=/^(top|right|bottom|left)$/,s=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},2445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default},2446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!(!e||!o.test(e))};var o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},2447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1640);var i=function(){};((o=r)&&o.__esModule?o:{default:o}).default&&(i=document.addEventListener?function(e,t,n,o){return e.removeEventListener(t,n,o||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0),t.default=i,e.exports=t.default},2448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e);return t&&t.defaultView||t.parentWindow};var o,r=n(1655),i=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},2449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=m(n(1678)),a=m(n(1848)),s=m(n(1)),l=m(n(1717)),u=m(n(1844)),c=m(n(1716)),f=m(n(1718)),d=m(n(1850)),p=m(n(1641)),h=m(n(1851));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.state={offsetTop:null,offsetBottom:null,width:null},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,c.default)((0,h.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,c.default)((0,h.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,c.default)((0,p.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()}},{key:"componentWillReceiveProps",value:function(){this._needPositionUpdate=!0}},{key:"componentDidUpdate",value:function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()}},{key:"onWindowScroll",value:function(){this.onUpdate()}},{key:"onWindowResize",value:function(){var e=this;this.props.autoWidth&&(0,a.default)(function(){return e.onUpdate()})}},{key:"onDocumentClick",value:function(){var e=this;(0,a.default)(function(){return e.onUpdate()})}},{key:"onUpdate",value:function(){if(this._isMounted){var e=(0,i.default)(this.refs.positioner),t=e.top,n=e.width,o=(0,f.default)(this.props.container),r=void 0;if(o){var a=(0,d.default)((0,p.default)(this)),s=(0,i.default)(o);r=a-s.top-s.height}else r=null;this.updateState(t,r,n)}}},{key:"updateState",value:function(e,t,n){e===this.state.offsetTop&&t===this.state.offsetBottom&&n===this.state.width||this.setState({offsetTop:e,offsetBottom:t,width:n})}},{key:"render",value:function(){var e=this.props,t=e.autoWidth,n=e.viewportOffsetTop,r=e.children,i=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["autoWidth","viewportOffsetTop","children"]),a=this.state,l=a.offsetTop,c=a.offsetBottom,f=a.width;delete i.container;var d=Math.max(l,n||0),p=this.props,h=p.affixStyle,m=p.bottomStyle;return t&&(h=o({width:f},h),m=o({width:f},m)),s.default.createElement("div",null,s.default.createElement("div",{ref:"positioner"}),s.default.createElement(u.default,o({},i,{offsetTop:d,viewportOffsetTop:n,offsetBottom:c,affixStyle:h,bottomStyle:m}),r))}}]),t}();y.propTypes=o({},u.default.propTypes,{container:s.default.PropTypes.oneOfType([l.default,s.default.PropTypes.func]),autoWidth:s.default.PropTypes.bool}),y.defaultProps={viewportOffsetTop:0,autoWidth:!0},t.default=y,e.exports=t.default},2450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(1),i=b(r),a=b(n(45)),s=b(n(1717)),l=b(n(1776)),u=b(n(1777)),c=b(n(2451)),f=b(n(1641)),d=b(n(1716)),p=b(n(2458)),h=b(n(1640)),m=b(n(2459)),y=b(n(1773)),v=b(n(1718));function b(e){return e&&e.__esModule?e:{default:e}}var g=new c.default,w=i.default.createClass({displayName:"Modal",propTypes:o({},u.default.propTypes,{show:i.default.PropTypes.bool,container:i.default.PropTypes.oneOfType([s.default,i.default.PropTypes.func]),onShow:i.default.PropTypes.func,onHide:i.default.PropTypes.func,backdrop:i.default.PropTypes.oneOfType([i.default.PropTypes.bool,i.default.PropTypes.oneOf(["static"])]),renderBackdrop:i.default.PropTypes.func,onEscapeKeyUp:i.default.PropTypes.func,onBackdropClick:i.default.PropTypes.func,backdropStyle:i.default.PropTypes.object,backdropClassName:i.default.PropTypes.string,containerClassName:i.default.PropTypes.string,keyboard:i.default.PropTypes.bool,transition:l.default,dialogTransitionTimeout:i.default.PropTypes.number,backdropTransitionTimeout:i.default.PropTypes.number,autoFocus:i.default.PropTypes.bool,enforceFocus:i.default.PropTypes.bool,restoreFocus:i.default.PropTypes.bool,onEnter:i.default.PropTypes.func,onEntering:i.default.PropTypes.func,onEntered:i.default.PropTypes.func,onExit:i.default.PropTypes.func,onExiting:i.default.PropTypes.func,onExited:i.default.PropTypes.func,manager:i.default.PropTypes.object.isRequired}),getDefaultProps:function(){return{show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:g,renderBackdrop:function(e){return i.default.createElement("div",e)}}},omitProps:function(e,t){var n=Object.keys(e),o={};return n.map(function(n){Object.prototype.hasOwnProperty.call(t,n)||(o[n]=e[n])}),o},getInitialState:function(){return{exited:!this.props.show}},render:function(){var e=this.props,t=e.show,n=e.container,a=e.children,s=e.transition,l=e.backdrop,c=e.dialogTransitionTimeout,f=e.className,d=e.style,p=e.onExit,h=e.onExiting,m=e.onEnter,y=e.onEntering,v=e.onEntered,b=i.default.Children.only(a),g=this.omitProps(this.props,w.propTypes);if(!(t||s&&!this.state.exited))return null;var _=b.props,O=_.role,x=_.tabIndex;return void 0!==O&&void 0!==x||(b=(0,r.cloneElement)(b,{role:void 0===O?"document":O,tabIndex:null==x?"-1":x})),s&&(b=i.default.createElement(s,{transitionAppear:!0,unmountOnExit:!0,in:t,timeout:c,onExit:p,onExiting:h,onExited:this.handleHidden,onEnter:m,onEntering:y,onEntered:v},b)),i.default.createElement(u.default,{ref:this.setMountNode,container:n},i.default.createElement("div",o({ref:"modal",role:O||"dialog"},g,{style:d,className:f}),l&&this.renderBackdrop(),b))},renderBackdrop:function(){var e=this,t=this.props,n=t.backdropStyle,o=t.backdropClassName,r=t.renderBackdrop,a=t.transition,s=t.backdropTransitionTimeout,l=function(t){return e.backdrop=t},u=i.default.createElement("div",{ref:l,style:this.props.backdropStyle,className:this.props.backdropClassName,onClick:this.handleBackdropClick});return a&&(u=i.default.createElement(a,{transitionAppear:!0,in:this.props.show,timeout:s},r({ref:l,style:n,className:o,onClick:this.handleBackdropClick}))),u},componentWillReceiveProps:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},componentWillUpdate:function(e){!this.props.show&&e.show&&this.checkForFocus()},componentDidMount:function(){this.props.show&&this.onShow()},componentDidUpdate:function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},componentWillUnmount:function(){var e=this.props,t=e.show,n=e.transition;(t||n&&!this.state.exited)&&this.onHide()},onShow:function(){var e=(0,f.default)(this),t=(0,v.default)(this.props.container,e.body);this.props.manager.add(this,t,this.props.containerClassName),this._onDocumentKeyupListener=(0,d.default)(e,"keyup",this.handleDocumentKeyUp),this._onFocusinListener=(0,p.default)(this.enforceFocus),this.focus(),this.props.onShow&&this.props.onShow()},onHide:function(){this.props.manager.remove(this),this._onDocumentKeyupListener.remove(),this._onFocusinListener.remove(),this.props.restoreFocus&&this.restoreLastFocus()},setMountNode:function(e){this.mountNode=e?e.getMountNode():e},handleHidden:function(){var e;(this.setState({exited:!0}),this.onHide(),this.props.onExited)&&(e=this.props).onExited.apply(e,arguments)},handleBackdropClick:function(e){e.target===e.currentTarget&&(this.props.onBackdropClick&&this.props.onBackdropClick(e),!0===this.props.backdrop&&this.props.onHide())},handleDocumentKeyUp:function(e){this.props.keyboard&&27===e.keyCode&&this.isTopModal()&&(this.props.onEscapeKeyUp&&this.props.onEscapeKeyUp(e),this.props.onHide())},checkForFocus:function(){h.default&&(this.lastFocus=(0,m.default)())},focus:function(){var e=this.props.autoFocus,t=this.getDialogElement(),n=(0,m.default)((0,f.default)(this)),o=n&&(0,y.default)(t,n);t&&e&&!o&&(this.lastFocus=n,t.hasAttribute("tabIndex")||(t.setAttribute("tabIndex",-1),(0,a.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".')),t.focus())},restoreLastFocus:function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},enforceFocus:function(){var e=this.props.enforceFocus;if(e&&this.isMounted()&&this.isTopModal()){var t=(0,m.default)((0,f.default)(this)),n=this.getDialogElement();n&&n!==t&&!(0,y.default)(n,t)&&n.focus()}},getDialogElement:function(){var e=this.refs.modal;return e&&e.lastChild},isTopModal:function(){return this.props.manager.isTopModal(this)}});w.Manager=c.default,t.default=w,e.exports=t.default},2451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(1774)),i=u(n(2452)),a=u(n(2455)),s=u(n(2456)),l=n(2457);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hideSiblingNodes,o=void 0===n||n,r=t.handleContainerOverflow,i=void 0===r||r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hideSiblingNodes=o,this.handleContainerOverflow=i,this.modals=[],this.containers=[],this.data=[]}return o(e,[{key:"add",value:function(e,t,n){var o=this.modals.indexOf(e),u=this.containers.indexOf(t);if(-1!==o)return o;if(o=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&(0,l.hideSiblings)(t,e.mountNode),-1!==u)return this.data[u].modals.push(e),o;var c={modals:[e],classes:n?n.split(/\s+/):[],overflowing:(0,s.default)(t)};return this.handleContainerOverflow&&function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,r.default)(t,"paddingRight")||0,10)+(0,a.default)()+"px"),(0,r.default)(t,n)}(c,t),c.classes.forEach(i.default.addClass.bind(null,t)),this.containers.push(t),this.data.push(c),o}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=function(e,t){return n=function(e){return-1!==e.modals.indexOf(t)},o=-1,e.some(function(e,t){if(n(e,t))return o=t,!0}),o;var n,o}(this.data,e),o=this.data[n],r=this.containers[n];o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(t,1),0===o.modals.length?(o.classes.forEach(i.default.removeClass.bind(null,r)),this.handleContainerOverflow&&function(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}(o,r),this.hideSiblingNodes&&(0,l.showSiblings)(r,e.mountNode),this.containers.splice(n,1),this.data.splice(n,1)):this.hideSiblingNodes&&(0,l.ariaHidden)(!1,o.modals[o.modals.length-1].mountNode)}}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}();t.default=c,e.exports=t.default},2452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasClass=t.removeClass=t.addClass=void 0;var o=a(n(2453)),r=a(n(2454)),i=a(n(1853));function a(e){return e&&e.__esModule?e:{default:e}}t.addClass=o.default,t.removeClass=r.default,t.hasClass=i.default,t.default={addClass:o.default,removeClass:r.default,hasClass:i.default}},2453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var o,r=n(1853),i=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},2454:function(e,t,n){"use strict";function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}},2455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((!a&&0!==a||e)&&i.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return a};var o,r=n(1640),i=(o=r)&&o.__esModule?o:{default:o};var a=void 0;e.exports=t.default},2456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)||(t=e,t&&"body"===t.tagName.toLowerCase())?function(e){var t=(0,r.default)(e),n=(0,o.default)(t).innerWidth;if(!n){var i=t.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return t.body.clientWidth<n}(e):e.scrollHeight>e.clientHeight;var t};var o=i(n(1679)),r=i(n(1655));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ariaHidden=i,t.hideSiblings=function(e,t){r(e,t,function(e){return i(!0,e)})},t.showSiblings=function(e,t){r(e,t,function(e){return i(!1,e)})};var o=["template","script","style"],r=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){var r,i,a;-1===t.indexOf(e)&&(i=(r=e).nodeType,a=r.tagName,1===i&&-1===o.indexOf(a.toLowerCase()))&&n(e)})};function i(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}},2458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!document.addEventListener,n=void 0;t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)});return{remove:n}},e.exports=t.default},2459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.default)();try{return e.activeElement}catch(e){}};var o,r=n(1655),i=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},2460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,a){var s="BODY"===i.tagName?(0,o.default)(n):(0,r.default)(n,i),u=(0,o.default)(t),c=u.height,f=u.width,d=void 0,p=void 0,h=void 0,m=void 0;if("left"===e||"right"===e){p=s.top+(s.height-c)/2,d="left"===e?s.left-f:s.left+s.width;var y=function(e,t,n,o){var r=l(n),i=r.scroll,a=r.height,s=e-o-i,u=e+o-i+t;return s<0?-s:u>a?a-u:0}(p,c,i,a);p+=y,m=50*(1-2*y/c)+"%",h=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');d=s.left+(s.width-f)/2,p="top"===e?s.top-c:s.top+s.height;var v=function(e,t,n,o){var r=l(n).width,i=e-o,a=e+o+t;if(i<0)return-i;if(a>r)return r-a;return 0}(d,f,i,a);d+=v,h=50*(1-2*v/f)+"%",m=void 0}return{positionLeft:d,positionTop:p,arrowOffsetLeft:h,arrowOffsetTop:m}};var o=s(n(1678)),r=s(n(2461)),i=s(n(1775)),a=s(n(1641));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=void 0,n=void 0,r=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,r=(0,i.default)((0,a.default)(e).documentElement)||(0,i.default)(e);else{var s=(0,o.default)(e);t=s.width,n=s.height,r=(0,i.default)(e)}return{width:t,height:n,scroll:r}}e.exports=t.default},2461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(e,t){var n,u={top:0,left:0};"fixed"===(0,l.default)(e,"position")?n=e.getBoundingClientRect():(t=t||(0,i.default)(e),n=(0,r.default)(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(t)&&(u=(0,r.default)(t)),u.top+=parseInt((0,l.default)(t,"borderTopWidth"),10)-(0,a.default)(t)||0,u.left+=parseInt((0,l.default)(t,"borderLeftWidth"),10)-(0,s.default)(t)||0);return o({},n,{top:n.top-u.top-(parseInt((0,l.default)(e,"marginTop"),10)||0),left:n.left-u.left-(parseInt((0,l.default)(e,"marginLeft"),10)||0)})};var r=u(n(1678)),i=u(n(1845)),a=u(n(1775)),s=u(n(2462)),l=u(n(1774));function u(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e);if(void 0===t)return n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft;n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t};var o,r=n(1679),i=(o=r)&&o.__esModule?o:{default:o};e.exports=t.default},2469:function(e,t,n){"use strict";var o,r=n(2470),i=n(2471),a=n(2472),s=n(2473),l=n(1860),u=n(1861),c=n(1779),f=n(1863),d=s.create;e.exports=function e(t,n){function r(e,r){var s,p,h,m,y,v;for(e=new u(c(t,e)),o=0;o<n.length;o++)(p=n[o]).processRequest&&p.processRequest(e);for(o=0;o<n.length;o++)if((p=n[o]).createXHR){s=p.createXHR(e);break}for(m in s=s||new i,e.xhr=s,h=f(a(function(t){clearTimeout(y),s.onload=s.onerror=s.onabort=s.onreadystatechange=s.ontimeout=s.onprogress=null;var i=function(e,t){if(e.aborted)return d("Request aborted",e,{name:"Abort"});if(e.timedOut)return d("Request timeout",e,{name:"Timeout"});var n,o=e.xhr;switch(Math.floor(o.status/100)){case 0:case 2:if(!t)return;return d(t.message,e);case 4:if(404===o.status&&!e.errorOn404)return;n="Client";break;case 5:n="Server";break;default:n="HTTP"}var r=n+" Error: The server returned a status of "+o.status+' for the request "'+e.method.toUpperCase()+" "+e.url+'"';return d(r,e)}(e,t),a=i||l.fromRequest(e);for(o=0;o<n.length;o++)(p=n[o]).processResponse&&p.processResponse(a);i&&e.onerror&&e.onerror(i),!i&&e.onload&&e.onload(a),r&&r(i,i?void 0:a)})),v="onload"in s&&"onerror"in s,s.onload=function(){h()},s.onerror=h,s.onabort=function(){h()},s.onreadystatechange=function(){if(4===s.readyState){if(e.aborted)return h();if(!v){var t;try{t=s.status}catch(n){}var n=0===t?new Error("Internal XHR Error"):null;return h(n)}}},s.ontimeout=function(){},s.onprogress=function(){},s.open(e.method,e.url),e.timeout&&(y=setTimeout(function(){e.timedOut=!0,h();try{s.abort()}catch(e){}},e.timeout)),e.headers)e.headers.hasOwnProperty(m)&&s.setRequestHeader(m,e.headers[m]);return s.send(e.body),e}t=t||{},n=n||[];var p,h=["get","post","put","head","patch","delete"],m=function(e){return function(t,n){return(t=new u(t)).method=e,r(t,n)}};for(o=0;o<h.length;o++)r[p=h[o]]=m(p);return r.plugins=function(){return n},r.defaults=function(o){return o?e(c(t,o),n):t},r.use=function(){var o=Array.prototype.slice.call(arguments,0);return e(t,n.concat(o))},r.bare=function(){return e()},r.Request=u,r.Response=l,r.RequestError=s,r}({},[r])},2470:function(e,t,n){"use strict";e.exports={processRequest:function(e){e.url=e.url.replace(/[^%]+/g,function(e){return encodeURI(e)})}}},2471:function(e,t){e.exports=window.XMLHttpRequest},2472:function(e,t,n){"use strict";e.exports=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);setTimeout(function(){return e.apply(null,t)},0)}}},2473:function(e,t,n){"use strict";var o=n(1860),r=n(1862),i=n(1779);function a(e,t){var n=new Error(e);for(var o in n.name="RequestError",this.name=n.name,this.message=n.message,n.stack&&(this.stack=n.stack),this.toString=function(){return this.message},t)t.hasOwnProperty(o)&&(this[o]=t[o])}a.prototype=i(Error.prototype),a.prototype.constructor=a,a.create=function(e,t,n){var i=new a(e,n);return o.call(i,r(t)),i},e.exports=a},2474:function(e,t,n){"use strict";var o=n(2475),r=n(1863),i=!1,a=r(function(){return"undefined"!=typeof window&&null!==window&&window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest});e.exports={createXHR:function(e){var t,n,r;if("undefined"!=typeof window&&null!==window&&(t=o(e.url),n=o(window.location.href),t.host&&(t.protocol!==n.protocol||t.host!==n.host||t.port!==n.port))){if(!i&&e.headers)for(r in e.headers)if(e.headers.hasOwnProperty(r)){i=!0,window&&window.console&&window.console.warn&&window.console.warn("Request headers are ignored in old IE when using the oldiexdomain plugin.");break}if(window.XDomainRequest&&!a()){var s=new window.XDomainRequest;return s.setRequestHeader=function(){},s}}}}},2475:function(e,t){(function(){var t,n,o,r={}.hasOwnProperty;t=/^(?:(?:([^:\/?\#]+:)\/+|(\/\/))(?:([a-z0-9-\._~%]+)(?::([a-z0-9-\._~%]+))?@)?(([a-z0-9-\._~%!$&'()*+,;=]+)(?::([0-9]+))?)?)?([^?\#]*?)(\?[^\#]*)?(\#.*)?$/,(o=function(e,t){return o.URL.parse(e,t)}).URL=function(){function e(e){var t,o,i;for(t in n)r.call(n,t)&&(o=n[t],this[t]=null!=(i=e[t])?i:o);this.host||(this.host=this.hostname&&this.port?this.hostname+":"+this.port:this.hostname?this.hostname:""),this.origin||(this.origin=this.protocol?this.protocol+"//"+this.host:""),this.isAbsolutePathRelative=!this.host&&"/"===this.pathname.charAt(0),this.isPathRelative=!this.host&&"/"!==this.pathname.charAt(0),this.isRelative=this.isSchemeRelative||this.isAbsolutePathRelative||this.isPathRelative,this.isAbsolute=!this.isRelative}return e.parse=function(e){var n,r,i;return r=(n=e.toString().match(t))[8]||"",i=n[1],new o.URL({protocol:i,username:n[3],password:n[4],hostname:n[6],port:n[7],pathname:i&&"/"!==r.charAt(0)?"/"+r:r,search:n[9],hash:n[10],isSchemeRelative:null!=n[2]})},e}(),n={protocol:"",username:"",password:"",host:"",hostname:"",port:"",pathname:"",search:"",hash:"",origin:"",isSchemeRelative:!1},e.exports=o}).call(this)},2476:function(e,t,n){var o=n(2477);function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=o(r),e.exports.strict=o(i),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},2477:function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){o[e]=t[e]});return o;function o(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var o=t.apply(this,e),r=e[e.length-1];return"function"==typeof o&&o!==r&&Object.keys(r).forEach(function(e){o[e]=r[e]}),o}}},2531:function(e,t,n){"use strict";(function(t,o,r){var i=c(n(0)),a=c(n(2532)),s=c(n(2548)),l=n(198),u=c(n(2560));function c(e){return e&&e.__esModule?e:{default:e}}var f=n(21);e.exports=t(f({displayName:"atoms/video-player/wrapper",propTypes:{youtubeId:i.default.string.isRequired,chinaCdnId:i.default.string,onEnd:i.default.func,overlay:i.default.object,onVideoSeen:i.default.func,localeFileContext:i.default.array,options:i.default.object,isPlaying:i.default.bool,aspectRatio:i.default.oneOf(["16x9","4x3"]),onMount:i.default.func},getDefaultProps:function(){var e=new l.I18n(o.get("localeFileContext",this.props,[]),(this.props,{}));return{overlay:null,onVideoSeen:o.noop,onEnd:o.noop,isPlaying:!1,aspectRatio:"16x9",i18n:e,onMount:o.noop}},componentDidMount:function(){var e=this.props,t=e.onMount,n=e.isPlaying;t(this),n&&this.playVideo()},componentWillReceiveProps:function(e){this.props.isPlaying&&!e.isPlaying&&this.pauseVideo(),!this.props.isPlaying&&e.isPlaying&&this.playVideo()},getContainerClass:function(){var e=this.props.aspectRatio;return o.includes(["16x9","4x3"],e)?"embed-responsive-"+e:""},playVideo:function(){this.refs.player.play()},pauseVideo:function(){var e=this.refs.player;e&&e.pause()},needAlternatePlayer:function(){return"CN"===this.props.i18n.getGeoLocation()},handlePlayClick:function(e){e.preventDefault(),this.playVideo()},render:function(){var e=this,t=this.props,n=t.youtubeId,o=t.chinaCdnId,i=t.overlay,l=t.onVideoSeen,u=t.onEnd,c=t.i18n,f=t.onPlay,d=t.hasStarted,p=c.__,h=this.getContainerClass();return r.createElement("div",{styleName:"wrapper"},i?r.createElement("div",{styleName:d?"overlay-hidden":"overlay",style:{backgroundImage:"url(https://i.ytimg.com/vi/"+n+"/maxresdefault.jpg)"}},r.createElement("a",{href:"#",styleName:"curtain",onClick:function(t){return e.handlePlayClick(t)}},p("Play Video")),i):null,this.needAlternatePlayer()?r.createElement(s.default,{ref:"player",sourceId:o,onVideoSeen:l,onPlay:f,onEnd:u,i18n:c,containerClassName:h}):r.createElement(a.default,{ref:"player",youtubeId:n,onVideoSeen:l,onPlay:f,onEnd:u,i18n:c,containerClassName:h}))}}),u.default)}).call(this,n(5),n(4),n(1))},2532:function(e,t,n){"use strict";(function(t,o,r){var i,a=n(0),s=(i=a)&&i.__esModule?i:{default:i};var l=n(21),u=n(2533).default,c=n(2547);e.exports=t(l({displayName:"common/video-player/youtube-player",propTypes:{youtubeId:s.default.string.isRequired,onVideoSeen:s.default.func,onPlay:s.default.func,onEnd:s.default.func,onLastFrame:s.default.func,i18n:s.default.object},getDefaultProps:function(){return{onVideoSeen:o.noop,onPlay:o.noop,onEnd:o.noop,onLastFrame:o.noop}},componentDidUpdate:function(){this._loadPlaybackSettings()},componentWillUnmount:function(){if(this.player){var e=this.player.getPlayerState();o.includes([window.YT.PlayerState.PLAYING,window.YT.PlayerState.BUFFERING],e)&&this._trackVideoSeen()}},_trackVideoSeen:function(){this.props.onVideoSeen;var e=this.player.getPlayerState();if(o.includes([window.YT.PlayerState.PLAYING,window.YT.PlayerState.BUFFERING,window.YT.PlayerState.PAUSED,window.YT.PlayerState.ENDED],e)){var t=this.pauseTime||0,n=this.player.getCurrentTime(),r=this.player.getDuration(),i=n-t,a="playing";e===window.YT.PlayerState.ENDED?a="ended":e===window.YT.PlayerState.PAUSED&&(a="paused",this.pauseTime=this.player.getCurrentTime()),i>0&&this.props.onVideoSeen({startTime:t,endTime:n,videoDuration:r,durationWatched:i,playerState:a})}},_getOpts:function(){var e=this.props.i18n.getLocale();return{playerVars:{showinfo:0,rel:0,autohide:1,vq:"hd720",hl:e,cc_load_policy:"en-us"!==e?1:0}}},handleReady:function(e){var t=this;this.player=e.target,setTimeout(function(){t.player.a&&(t._loadPlaybackSettings(),t.playWhenReady&&t.play())},500),this.player.addEventListener("onPlaybackQualityChange",function(e){return t._savePlaybackQuality(e.data)}),this.player.addEventListener("onPlaybackRateChange",function(e){return t._savePlaybackRate(e.data)}),1===this._getOpts().playerVars.cc_load_policy&&(this.player.loadModule("captions"),this.player.addEventListener("onApiChange",function(){if(o.indexOf(t.player.getOptions(),"captions")>-1&&!t.preferedLanguageCodeForCaptions){var e=t.props.i18n.getLocale().toLocaleLowerCase(),n=t.player.getOption("captions","tracklist"),r=n.filter(function(t){return t.languageCode.toLocaleLowerCase()===e})[0],i=n.filter(function(e){return["en","en-us"].includes(e.languageCode.toLocaleLowerCase())})[0],a=r||i;if(a){var s=a.languageCode;t.player.setOption("captions","track",{languageCode:s})}t.preferedLanguageCodeForCaptions=!0}}))},handleStateChange:function(e){this._updateOnLastFrameTimer(e),e.data!==window.YT.PlayerState.PAUSED&&e.data!==window.YT.PlayerState.ENDED||this._trackVideoSeen()},_loadPlaybackSettings:function(){this.player&&(this.player.setPlaybackRate(1),this.player.setPlaybackQuality("hd720"),this.player.setPlaybackRate(JSON.parse(localStorage.getItem("youtube-rate"))||1),this.player.setPlaybackQuality(JSON.parse(localStorage.getItem("youtube-quality"))||1))},_savePlaybackQuality:function(e){localStorage.setItem("youtube-quality",JSON.stringify(e))},_savePlaybackRate:function(e){localStorage.setItem("youtube-rate",JSON.stringify(e))},_updateOnLastFrameTimer:function(e){var t=e.target.getDuration()/e.target.getPlaybackRate()-e.target.getCurrentTime()/e.target.getPlaybackRate();e.data===window.YT.PlayerState.PLAYING?this.curTimer=setTimeout(this.props.onLastFrame,1e3*(t-.4)):clearTimeout(this.curTimer)},pause:function(){this.player&&this.player.pauseVideo(),this.playWhenReady=!1},play:function(){this.player?this.player.playVideo():this.playWhenReady=!0},render:function(){var e=this.props,t=e.youtubeId,n=e.onPlay,o=e.onEnd,i=e.containerClassName,a=this._getOpts();return r.createElement("div",{styleName:"youtube-player"},r.createElement("div",{styleName:i},r.createElement(u,{videoId:t,className:"embed-responsive-item",opts:a,onReady:this.handleReady,onStateChange:this.handleStateChange,onPlay:n,onEnd:o})))}}),c)}).call(this,n(5),n(4),n(1))},2533:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(1),a=n.n(i),s=n(2534),l=n.n(s),u=n(2535),c=n.n(u),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function p(e){return d({},e,{playerVars:d({},e.playerVars,{autoplay:0,start:0,end:0})})}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPlayerReady=function(e){return n.props.onReady(e)},n.onPlayerError=function(e){return n.props.onError(e)},n.onPlayerStateChange=function(e){switch(n.props.onStateChange(e),e.data){case t.PlayerState.ENDED:n.props.onEnd(e);break;case t.PlayerState.PLAYING:n.props.onPlay(e);break;case t.PlayerState.PAUSED:n.props.onPause(e);break;default:return}},n.onPlayerPlaybackRateChange=function(e){return n.props.onPlaybackRateChange(e)},n.onPlayerPlaybackQualityChange=function(e){return n.props.onPlaybackQualityChange(e)},n.createPlayer=function(){if("undefined"!=typeof document){var e=d({},n.props.opts,{videoId:n.props.videoId});n.internalPlayer=c()(n.container,e),n.internalPlayer.on("ready",n.onPlayerReady),n.internalPlayer.on("error",n.onPlayerError),n.internalPlayer.on("stateChange",n.onPlayerStateChange),n.internalPlayer.on("playbackRateChange",n.onPlayerPlaybackRateChange),n.internalPlayer.on("playbackQualityChange",n.onPlayerPlaybackQualityChange)}},n.resetPlayer=function(){return n.internalPlayer.destroy().then(n.createPlayer)},n.updatePlayer=function(){n.internalPlayer.getIframe().then(function(e){n.props.id?e.setAttribute("id",n.props.id):e.removeAttribute("id"),n.props.className?e.setAttribute("class",n.props.className):e.removeAttribute("class")})},n.updateVideo=function(){if(void 0!==n.props.videoId&&null!==n.props.videoId){var e=!1,t={videoId:n.props.videoId};"playerVars"in n.props.opts&&(e=1===n.props.opts.playerVars.autoplay,"start"in n.props.opts.playerVars&&(t.startSeconds=n.props.opts.playerVars.start),"end"in n.props.opts.playerVars&&(t.endSeconds=n.props.opts.playerVars.end)),e?n.internalPlayer.loadVideoById(t):n.internalPlayer.cueVideoById(t)}else n.internalPlayer.stopVideo()},n.refContainer=function(e){n.container=e},n.container=null,n.internalPlayer=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),f(t,[{key:"componentDidMount",value:function(){this.createPlayer()}},{key:"componentDidUpdate",value:function(e){(function(e,t){return e.id===t.id||e.className===t.className})(e,this.props)&&this.updatePlayer(),function(e,t){return!l()(p(e.opts),p(t.opts))}(e,this.props)&&this.resetPlayer(),function(e,t){if(e.videoId!==t.videoId)return!0;var n=e.opts.playerVars||{},o=t.opts.playerVars||{};return n.start!==o.start||n.end!==o.end}(e,this.props)&&this.updateVideo()}},{key:"componentWillUnmount",value:function(){this.internalPlayer.destroy()}},{key:"render",value:function(){return a.a.createElement("span",{className:this.props.containerClassName},a.a.createElement("div",{id:this.props.id,className:this.props.className,ref:this.refContainer}))}}]),t}();h.propTypes={videoId:r.a.string,id:r.a.string,className:r.a.string,containerClassName:r.a.string,opts:r.a.object,onReady:r.a.func,onError:r.a.func,onPlay:r.a.func,onPause:r.a.func,onEnd:r.a.func,onStateChange:r.a.func,onPlaybackRateChange:r.a.func,onPlaybackQualityChange:r.a.func},h.defaultProps={id:null,className:null,opts:{},containerClassName:"",onReady:function(){},onError:function(){},onPlay:function(){},onPause:function(){},onEnd:function(){},onStateChange:function(){},onPlaybackRateChange:function(){},onPlaybackQualityChange:function(){}},h.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},t.default=h},2534:function(e,t,n){var o=n(302);e.exports=function(e,t){return o(e,t)}},2535:function(e,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=l(n(2536)),a=l(n(2537)),s=l(n(2539));function l(e){return e&&e.__esModule?e:{default:e}}var u=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,i.default)();if(u||(u=(0,a.default)(l)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"==typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=s.default.proxyEvents(l);var c=new o(function(n){if("string"==typeof e||e instanceof HTMLElement)u.then(function(o){var r=new o.Player(e,t);return l.on("ready",function(){n(r)}),null});else{if(!("object"===(void 0===e?"undefined":r(e))&&e.playVideo instanceof Function))throw new TypeError("Unexpected state.");n(e)}}),f=s.default.promisifyPlayer(c,n);return f.on=l.on,f.off=l.off,f},e.exports=t.default}).call(this,n(10))},2536:function(e,t,n){"use strict";var o;
/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/o=function(){var e={},t={};return e.on=function(e,n){var o={name:e,handler:n};return t[e]=t[e]||[],t[e].unshift(o),o},e.off=function(e){var n=t[e.name].indexOf(e);-1!==n&&t[e.name].splice(n,1)},e.trigger=function(e,n){var o,r=t[e];if(r)for(o=r.length;o--;)r[o].handler(n)},e},e.exports=o},2537:function(e,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2538),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){var t=new o(function(e){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)e(window.YT);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){t&&t(),e(window.YT)}}}),n="http:"===window.location.protocol?"http:":"https:";return(0,a.default)(n+"//www.youtube.com/iframe_api",function(t){t&&e.trigger("error",t)}),t},e.exports=t.default}).call(this,n(10))},2538:function(e,t){function n(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function o(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,r){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof t&&(r=t,t={}),t=t||{},r=r||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,t.attrs),t.text&&(a.text=""+t.text),("onload"in a?n:o)(a,r),a.onload||n(a,r),i.appendChild(a)}},2539:function(e,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(2540)),i=l(n(2543)),a=l(n(2544)),s=l(n(2545));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)("youtube-player"),c={proxyEvents:function(e){var t={},n=function(n){var o="on"+n.slice(0,1).toUpperCase()+n.slice(1);t[o]=function(t){u('event "%s"',o,t),e.trigger(n,t)}},o=!0,r=!1,i=void 0;try{for(var s,l=a.default[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){n(s.value)}}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r=function(r){t&&s.default[r]?n[r]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.then(function(e){var t=s.default[r],i=e.getPlayerState(),a=e[r].apply(e,n);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(i)?new o(function(n){e.addEventListener("onStateChange",function o(){var r=e.getPlayerState(),i=void 0;"number"==typeof t.timeout&&(i=setTimeout(function(){e.removeEventListener("onStateChange",o),n()},t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(r)&&(e.removeEventListener("onStateChange",o),clearTimeout(i),n())})}).then(function(){return a}):a})}:n[r]=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.then(function(e){return e[r].apply(e,n)})}},a=!0,l=!1,u=void 0;try{for(var c,f=i.default[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){r(c.value)}}catch(e){l=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(l)throw u}}return n}};t.default=c,e.exports=t.default}).call(this,n(10))},2540:function(e,t,n){(function(o){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e}(t=e.exports=n(2541)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,o)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(143))},2541:function(e,t,n){var o;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(o||r);e.diff=i,e.prev=o,e.curr=r,o=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,o){if("%%"===n)return n;l++;var r=t.formatters[o];if("function"==typeof r){var i=a[l];n=r.call(e,i),a.splice(l,1),l--}return n}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,o=0;for(n in e)o=(o<<5)-o+e.charCodeAt(n),o|=0;return t.colors[Math.abs(o)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length,r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,o;for(n=0,o=t.skips.length;n<o;n++)if(t.skips[n].test(e))return!1;for(n=0,o=t.names.length;n<o;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2542),t.names=[],t.skips=[],t.formatters={}},2542:function(e,t){var n=1e3,o=60*n,r=60*o,i=24*r,a=365.25*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var l,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*o;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(l=e,i,"day")||s(l,r,"hour")||s(l,o,"minute")||s(l,n,"second")||l+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=o)return Math.round(e/o)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},2544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},2545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(2546),i=(o=r)&&o.__esModule?o:{default:o};t.default={pauseVideo:{acceptableStates:[i.default.ENDED,i.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[i.default.ENDED,i.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[i.default.ENDED,i.default.PLAYING,i.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},2546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},2547:function(e,t,n){e.exports={"_embed-responsive":"youtube-player--_embed-responsive--wS2qC","embed-responsive-16x9":"youtube-player--embed-responsive-16x9--x203G youtube-player--_embed-responsive--wS2qC","embed-responsive-4x3":"youtube-player--embed-responsive-4x3--gROZN youtube-player--_embed-responsive--wS2qC","youtube-player":"youtube-player--youtube-player--1kyG7",_border:"youtube-player--_border--17-zM","border-top":"youtube-player--border-top--30-li youtube-player--_border--17-zM","border-bottom":"youtube-player--border-bottom--2TrRS youtube-player--_border--17-zM","border-left":"youtube-player--border-left--2WFzX youtube-player--_border--17-zM","border-right":"youtube-player--border-right--16LCQ youtube-player--_border--17-zM"}},2548:function(e,t,n){"use strict";(function(t,o,r){var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},l=n(0),u=(i=l)&&i.__esModule?i:{default:i};var c=n(21),f=n(16),d=n(2549),p=n(2550),h=p.default,m=p.Controls,y=p.Play,v=p.Mute,b=p.Fullscreen,g=n(2551),w=n(2553),_=n(2555),O=n(2557),x=n(2559);e.exports=t(c({displayName:"common/video-player/china-html5-video",propTypes:{sourceId:u.default.string.isRequired,onVideoSeen:u.default.func,onEnd:u.default.func},getDefaultProps:function(){return{sourceId:"",onVideoSeen:o.noop,onEnd:o.noop}},getInitialState:function(){return{isPlayingVideo:!1,loadedCaptions:[],subtitlesLang:"Eng-Cn",activeMenu:null}},componentDidMount:function(){f.findDOMNode(this.refs.playBtn)&&f.findDOMNode(this.refs.playBtn).focus();var e=this.readStoredState("language")||this.state.subtitlesLang;this.changeSubtitles(e),this.refs.video.videoEl.crossOrigin="anonymous",this.addTracksListener(this.refs.video)},handleToggleClick:function(){this.state.isPlayingVideo?(this.pause(),this.setState({isPlayingVideo:!1})):(this.play(),this.setState({isPlayingVideo:!0}))},setActiveMenu:function(e){"speed-menu"===this.state.activeMenu&&"subtitles-menu"===e?this.refs.speedMenu.toggleMenu():"subtitles-menu"===this.state.activeMenu&&"speed-menu"===e&&this.refs.subtitlesMenu.handleToggleMenu(),this.setState({activeMenu:e})},play:function(){this.refs.video.play(),this.setState({isPlayingVideo:!0})},pause:function(){this.refs.video.pause(),this.setState({isPlayingVideo:!1})},safeLocalStorage:function(e){if("object"===("undefined"==typeof localStorage?"undefined":s(localStorage)))try{return e()}catch(e){console.error(e)}},accessStoredState:function(){return this.safeLocalStorage(function(){return JSON.parse(localStorage.getItem("udacity-html5-video-settings"))})||{}},readStoredState:function(e){var t=this.accessStoredState();return t&&t[e]},writeStoredState:function(e,t){var n=this.accessStoredState();n[e]=t,this.safeLocalStorage(function(){return localStorage.setItem("udacity-html5-video-settings",JSON.stringify(n))})},handleVolumeChange:function(e){this.writeStoredState("muted",e.target.muted)},handlePlay:function(){f.findDOMNode(this.refs.playBtn)&&f.findDOMNode(this.refs.playBtn).focus()},getSubtitles:function(e,t,n){return n.map(function(n,o){return{label:n,srclang:n,link:d.formatSubtitleLink(t[o],e)}})},changeSubtitles:function(e){this.setState({subtitlesLang:e}),this.refs.video.setSubtitles(e),this.writeStoredState("language",e)},addTracksListener:function(e){for(var t=this,n=e.videoEl.querySelectorAll("track"),o=0;o<n.length;++o)n[o].addEventListener("load",function(e,n){return function(){var o=this.track;this.label===t.state.subtitlesLang&&(e.videoEl.textTracks[n].mode="showing"),t.setState({loadedCaptions:t.state.loadedCaptions.concat([o.label])})}}(e,o))},render:function(){var e=this.props.sourceId.substr(0,this.props.sourceId.indexOf(".mp4")),t=this.getSubtitles(e,["en-us","zh-cn","en-us_zh-cn"],["English","Chinese","Eng-Cn"]),n=this.state.subtitlesLang,o=this.state.loadedCaptions,i=this.props,a=i.onEnd,s=i.i18n;return r.createElement("div",{className:"video-wrapper"},r.createElement(h,{ref:"video",controls:!0,onPlay:this.handlePlay,muted:this.readStoredState("muted"),onVolumeChange:this.handleVolumeChange,subtitlesSrc:t,onEnded:a,onClick:this.handleToggleClick},r.createElement("source",{src:d.formatNonGoogleVideoUrl(this.props.sourceId),type:"video/mp4"}),r.createElement(m,null,r.createElement(y,{ref:"playBtn"}),r.createElement(g,null),r.createElement(w,null),r.createElement(_,{ref:"speedMenu",readStoredState:this.readStoredState,writeStoredState:this.writeStoredState,activeMenu:this.state.activeMenu,setActiveMenu:this.setActiveMenu}),r.createElement(O,{ref:"subtitlesMenu",changeSubtitles:this.changeSubtitles,loadedCaptions:o,subtitlesLang:n,activeMenu:this.state.activeMenu,setActiveMenu:this.setActiveMenu,__:s.__}),r.createElement(v,null),r.createElement(b,null))))}}),x)}).call(this,n(5),n(4),n(1))},2549:function(e,t,n){"use strict";e.exports={formatNonGoogleVideoUrl:function(e){return"https://s3.cn-north-1.amazonaws.com.cn/u-vid-hd/"+e},formatSubtitleLink:function(e,t){return"https://s3.cn-north-1.amazonaws.com.cn/u-subs-vtt/"+e+"/"+t+".vtt"}}},2550:function(e,t,n){"use strict";(function(e){var o,r,i,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){n(1),e.exports=n(20)},function(e,t){},,,,,,,,,,,,,,,,,,,function(e,t,n){var o=n(21).default,r=n(23).default,i=n(24).default,a=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(63)),l=a(n(64)),u=a(n(67)),c=a(n(69)),f=a(n(68)),d=a(n(76)),p=a(n(78)),h=a(n(77)),m=a(n(80)),y=a(n(83)),v=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],b=s.default.createClass({displayName:"Video",propTypes:{copyKeys:s.default.PropTypes.object,children:s.default.PropTypes.node,className:s.default.PropTypes.string,autoPlay:s.default.PropTypes.bool,muted:s.default.PropTypes.bool,playbackRate:s.default.PropTypes.number,controls:s.default.PropTypes.bool,subtitlesSrc:s.default.PropTypes.array},getDefaultProps:function(){return{copyKeys:y.default}},getInitialState:function(){return{networkState:0,paused:!this.props.autoPlay,muted:!!this.props.muted,volume:1,playbackRate:this.props.playbackRate,error:!1,loading:!1,subtitles:"en-cn"}},componentWillMount:function(){var e=this;this._updateStateFromVideo=(0,m.default)(this.updateStateFromVideo,100),this.mediaEventProps=v.reduce(function(t,n){return t[n]=function(t){n in e.props&&"function"==typeof e.props[n]&&e.props[n](t),e._updateStateFromVideo()},t},{})},componentDidMount:function(){this.videoEl.children[this.videoEl.children.length-1].addEventListener("error",this._updateStateFromVideo)},componentWillUnmount:function(){this.videoEl.children[this.videoEl.children.length-1].removeEventListener("error",this._updateStateFromVideo),this._updateStateFromVideo.cancel()},togglePlay:function(){this.state.paused?this.play():this.pause()},toggleMute:function(){this.state.muted?this.unmute():this.mute()},load:function(){this.videoEl.load();for(var e=0;e<this.videoEl.textTracks.length;e++)this.videoEl.textTracks[e].mode="hidden"},fullscreen:function(){this.videoEl.requestFullscreen?this.videoEl.requestFullscreen():this.videoEl.msRequestFullscreen?this.videoEl.msRequestFullscreen():this.videoEl.mozRequestFullScreen?this.videoEl.mozRequestFullScreen():this.videoEl.webkitRequestFullscreen&&this.videoEl.webkitRequestFullscreen()},play:function(){this.videoEl.play()},pause:function(){this.videoEl.pause()},unmute:function(){this.videoEl.muted=!1},mute:function(){this.videoEl.muted=!0},seek:function(e,t){this.videoEl.currentTime=e,t&&this.updateStateFromVideo()},setVolume:function(e,t){this.videoEl.volume=e,t&&this.updateStateFromVideo()},setPlaybackRate:function(e){this.videoEl.playbackRate=e,this.updateStateFromVideo()},setSubtitles:function(e){this.videoEl.subtitles=e;for(var t=0;t<this.videoEl.textTracks.length;t++)this.videoEl.textTracks[t].language==e?this.videoEl.textTracks[t].mode="showing":this.videoEl.textTracks[t].mode="hidden"},updateStateFromVideo:function(){this.setState({duration:this.videoEl.duration,currentTime:this.videoEl.currentTime,buffered:this.videoEl.buffered,paused:this.videoEl.paused,muted:this.videoEl.muted,volume:this.videoEl.volume,playbackRate:this.videoEl.playbackRate,readyState:this.videoEl.readyState,subtitles:this.videoEl.subtitles,percentageBuffered:this.videoEl.buffered.length&&this.videoEl.buffered.end(this.videoEl.buffered.length-1)/this.videoEl.duration*100,percentagePlayed:this.videoEl.currentTime/this.videoEl.duration*100,error:this.videoEl.networkState===this.videoEl.NETWORK_NO_SOURCE,loading:this.videoEl.readyState<this.videoEl.HAVE_ENOUGH_DATA})},renderControls:function(){var e=i({togglePlay:this.togglePlay,toggleMute:this.toggleMute,play:this.play,pause:this.pause,mute:this.mute,unmute:this.unmute,seek:this.seek,fullscreen:this.fullscreen,setVolume:this.setVolume,setPlaybackRate:this.setPlaybackRate,subtitles:this.subtitles,setSubtitles:this.setSubtitles},this.state,{copyKeys:this.props.copyKeys}),t=s.default.Children.map(this.props.children,function(t){if("source"!==t.type)return s.default.cloneElement(t,e)});return t.length||(t=s.default.createElement("div",null,s.default.createElement(l.default,e),s.default.createElement(u.default,e))),t},renderSources:function(){return s.default.Children.map(this.props.children,function(e){if("source"===e.type)return e})},getVideoClassName:function(){var e=this.props.className,t="video";return this.state.error?t+=" video--error":this.state.loading?t+=" video--loading":this.state.paused?t+=" video--paused":t+=" video--playing",this.state.focused&&(t+=" video--focused"),e&&(t+=" "+e),t},onFocus:function(){this.setState({focused:!0})},onBlur:function(){this.setState({focused:!1})},render:function(){var e=this,t=this.props,n=t.controls,i=(t.copyKeys,t.onPlaybackRateChange,t.playbackRate,t.subtitlesSrc),a=(t.subtitles,o(t,["controls","copyKeys","onPlaybackRateChange","playbackRate","subtitlesSrc","subtitles"]));return s.default.createElement("div",{className:this.getVideoClassName(),tabIndex:"0",onFocus:this.onFocus,onBlur:this.onBlur},s.default.createElement("video",r({},a,{className:"video__el",ref:function(t){e.videoEl=t}},this.mediaEventProps),this.renderSources(),i&&i.map(function(e,t){return e.default?s.default.createElement("track",{label:e.label,kind:"subtitles",srcLang:e.srclang,src:e.link,key:"id_"+e.srclang,default:!0}):s.default.createElement("track",{label:e.label,kind:"subtitles",srcLang:e.srclang,src:e.link,key:"id_"+e.srclang})})),n?this.renderControls():"")}});t.default=b,t.Controls=u.default,t.Seek=c.default,t.Play=f.default,t.Mute=d.default,t.Fullscreen=p.default,t.Time=h.default,t.Overlay=l.default},function(e,t,n){e.exports=n(22)},function(e,t){t.__esModule=!0,t.default=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}},function(e,t,n){t.__esModule=!0;var o,r=n(24),i=(o=r)&&o.__esModule?o:{default:o};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}},function(e,t,n){e.exports={default:n(25),__esModule:!0}},function(e,t,n){n(26),e.exports=n(29).Object.assign},function(e,t,n){var o=n(27);o(o.S+o.F,"Object",{assign:n(42)})},function(e,t,n){var o=n(28),r=n(29),i=n(30),a=n(32),s=function e(t,n,s){var l,u,c,f=t&e.F,d=t&e.G,p=t&e.S,h=t&e.P,m=t&e.B,y=t&e.W,v=d?r:r[n]||(r[n]={}),b=v.prototype,g=d?o:p?o[n]:(o[n]||{}).prototype;for(l in d&&(s=n),s)(u=!f&&g&&void 0!==g[l])&&l in v||(c=u?g[l]:s[l],v[l]=d&&"function"!=typeof g[l]?s[l]:m&&u?i(c,o):y&&g[l]==c?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):h&&"function"==typeof c?i(Function.call,c):c,h&&((v.virtual||(v.virtual={}))[l]=c,t&e.R&&b&&!b[l]&&a(b,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var o=n(31);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(33),r=n(41);e.exports=n(37)?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(34),r=n(36),i=n(40),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(o(e),t=i(t,!0),o(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(35);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===(void 0===e?"undefined":s(e))?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(37)&&!n(38)(function(){return 7!=Object.defineProperty(n(39)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var o=n(35),r=n(28).document,i=o(r)&&o(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},function(e,t,n){var o=n(35);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var o=n(43),r=n(58),i=n(59),a=n(60),s=n(47),l=Object.assign;e.exports=!l||n(38)(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=o})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=r.f,f=i.f;l>u;)for(var d,p=s(arguments[u++]),h=c?o(p).concat(c(p)):o(p),m=h.length,y=0;m>y;)f.call(p,d=h[y++])&&(n[d]=p[d]);return n}:l},function(e,t,n){var o=n(44),r=n(57);e.exports=Object.keys||function(e){return o(e,r)}},function(e,t,n){var o=n(45),r=n(46),i=n(50)(!1),a=n(54)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,u=[];for(n in s)n!=a&&o(s,n)&&u.push(n);for(;t.length>l;)o(s,n=t[l++])&&(~i(u,n)||u.push(n));return u}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(47),r=n(49);e.exports=function(e){return o(r(e))}},function(e,t,n){var o=n(48);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(46),r=n(51),i=n(53);e.exports=function(e){return function(t,n,a){var s,l=o(t),u=r(l.length),c=i(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var o=n(52),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t,n){var o=n(52),r=Math.max,i=Math.min;e.exports=function(e,t){return(e=o(e))<0?r(e+t,0):i(e,t)}},function(e,t,n){var o=n(55)("keys"),r=n(56);e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,t,n){var o=n(28),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var o=n(49);e.exports=function(e){return Object(o(e))}},function(e,t,n){e.exports=n(62)},function(e,t){t.__esModule=!0,t.default=function(e){return e&&e.__esModule?e:{default:e}}},function(t,n){t.exports=e},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=o(n(65)),a=o(n(66)),s=r.default.createClass({displayName:"Overlay",propTypes:{error:r.default.PropTypes.bool,togglePlay:r.default.PropTypes.func,paused:r.default.PropTypes.bool,copyKeys:r.default.PropTypes.object,loading:r.default.PropTypes.bool},renderContent:function(){return this.props.error?r.default.createElement("div",{className:"video-overlay__error"},r.default.createElement("p",{className:"video-overlay__error-text"},this.props.copyKeys.sourceError)):this.props.loading?r.default.createElement("div",{className:"video-overlay__loader"},r.default.createElement(a.default,null)):r.default.createElement("div",{className:"video-overlay__play",onClick:this.props.togglePlay},this.props.paused?r.default.createElement(i.default,{name:"play-1"}):"")},render:function(){return r.default.createElement("div",{className:"video-overlay"},this.renderContent())}});t.default=s,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=r.default.createClass({displayName:"Icon",propTypes:{name:r.default.PropTypes.oneOf(["play-1","volume-off","volume-down","volume-up","resize-full","resize-small","pause-1"])},getDefaultProps:function(){return{name:"play-1"}},render:function(){return r.default.createElement("span",{className:"video-icon video-icon--"+this.props.name})}});t.default=i,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=r.default.createClass({displayName:"Spinner",render:function(){return r.default.createElement("div",{className:"video-spinner"},r.default.createElement("div",{className:"video-spinner__rect1"}),r.default.createElement("div",{className:"video-spinner__rect2"}),r.default.createElement("div",{className:"video-spinner__rect3"}),r.default.createElement("div",{className:"video-spinner__rect4"}),r.default.createElement("div",{className:"video-spinner__rect5"}))}});t.default=i,e.exports=t.default},function(e,t,n){var o=n(23).default,r=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(63)),a=r(n(68)),s=r(n(69)),l=r(n(76)),u=r(n(77)),c=r(n(78)),f=r(n(79)),d=i.default.createClass({displayName:"Controls",propTypes:{error:i.default.PropTypes.bool,children:i.default.PropTypes.oneOfType([i.default.PropTypes.arrayOf(i.default.PropTypes.node),i.default.PropTypes.node])},getDefaultProps:function(){return{children:[i.default.createElement(a.default,null),i.default.createElement(s.default,null),i.default.createElement(u.default,null),i.default.createElement(l.default,null),i.default.createElement(c.default,null),i.default.createElement(f.default,null)]}},renderChildren:function(){var e=this;return i.default.Children.map(this.props.children,function(t){return i.default.cloneElement(t,o({},e.props))})},render:function(){return this.props.error?null:i.default.createElement("div",{className:"video-controls video__controls"},this.renderChildren())}});t.default=d,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=o(n(65)),a=r.default.createClass({displayName:"Play",propTypes:{copyKeys:r.default.PropTypes.object,togglePlay:r.default.PropTypes.func,paused:r.default.PropTypes.bool},shouldComponentUpdate:function(e){return this.props.paused!==e.paused||this.props.togglePlay!==e.togglePlay},render:function(){return r.default.createElement("button",{className:"video-play video__control",onClick:this.props.togglePlay,"aria-label":this.props.paused?this.props.copyKeys.play:this.props.copyKeys.pause},this.props.paused?r.default.createElement(i.default,{name:"play-1"}):r.default.createElement(i.default,{name:"pause-1"}))}});t.default=a,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=o(n(70)),a=r.default.createClass({displayName:"Seek",propTypes:{copyKeys:r.default.PropTypes.object,seek:r.default.PropTypes.func,percentageBuffered:r.default.PropTypes.number,percentagePlayed:r.default.PropTypes.number,duration:r.default.PropTypes.number},getInitialState:function(){return{focused:!1}},shouldComponentUpdate:function(e){return this.props.seek!==e.seek||this.props.percentageBuffered!==e.percentageBuffered||this.props.percentagePlayed!==e.percentagePlayed||this.props.duration!==e.duration},seek:function(e){this.props.seek(e.target.value*this.props.duration/100,!0)},onFocus:function(){this.setState({focused:!0})},onBlur:function(){this.setState({focused:!1})},render:function(){return r.default.createElement("div",{className:"video-seek video__control"+(this.state.focused?" video__control--focused":""),"aria-label":this.props.copyKeys.seek},r.default.createElement("div",{className:"video-seek__container"},r.default.createElement("div",{style:{width:this.props.percentageBuffered+"%"},className:"video-seek__buffer-bar"}),r.default.createElement(i.default,{onBlur:this.onBlur,onFocus:this.onFocus,onChange:this.seek,progress:this.props.percentagePlayed})))}});t.default=a,e.exports=t.default},function(e,t,n){var o=n(71).default,r=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(63)),a=i.default.createClass({displayName:"ProgressBar",propTypes:{orientation:i.default.PropTypes.string,step:i.default.PropTypes.number,progress:i.default.PropTypes.number,onChange:i.default.PropTypes.func,onFocus:i.default.PropTypes.func,onBlur:i.default.PropTypes.func},getDefaultProps:function(){return{orientation:"horizontal",step:.1,progress:0,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur}},componentDidMount:function(){this.refs.input.setAttribute("orient",this.props.orientation)},onChange:function(){},onFocus:function(){},onBlur:function(){},render:function(){return i.default.createElement("div",{className:"video-progress-bar "+("horizontal"===this.props.orientation?"video-progress-bar--horizontal":"video-progress-bar--vertical")},i.default.createElement("div",{className:"video-progress-bar__fill",style:o({},"horizontal"===this.props.orientation?"width":"height",this.props.progress+"%")}),i.default.createElement("input",{className:"video-progress-bar__input",onBlur:this.props.onBlur,onFocus:this.props.onFocus,ref:"input",onChange:this.props.onChange,type:"range",min:"0",max:"100",value:this.props.progress,step:this.props.step}))}});t.default=a,e.exports=t.default},function(e,t,n){e.exports=n(72)},function(e,t,n){t.__esModule=!0;var o,r=n(73),i=(o=r)&&o.__esModule?o:{default:o};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(74),__esModule:!0}},function(e,t,n){n(75);var o=n(29).Object;e.exports=function(e,t,n){return o.defineProperty(e,t,n)}},function(e,t,n){var o=n(27);o(o.S+o.F*!n(37),"Object",{defineProperty:n(33).f})},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=o(n(65)),a=o(n(70)),s=r.default.createClass({displayName:"Mute",propTypes:{copyKeys:r.default.PropTypes.object,volume:r.default.PropTypes.number,unmute:r.default.PropTypes.func,setVolume:r.default.PropTypes.func,toggleMute:r.default.PropTypes.func,muted:r.default.PropTypes.bool},shouldComponentUpdate:function(e){return this.props.muted!==e.muted||this.props.toggleMute!==e.toggleMute||this.props.volume!==e.volume||this.props.setVolume!==e.setVolume||this.props.unmute!==e.unmute},changeVolume:function(e){this.props.setVolume(e.target.value/100,!0),this.props.unmute()},toggleMute:function(){this.props.volume<=0?this.props.setVolume(1):this.props.toggleMute()},render:function(){return r.default.createElement("div",{className:"video-mute video__control"},r.default.createElement("button",{className:"video-mute__inner",onClick:this.toggleMute,"aria-label":this.props.muted||this.props.volume<=0?this.props.copyKeys.unmute:this.props.copyKeys.mute},this.props.muted||this.props.volume<=0?r.default.createElement(i.default,{name:"volume-off"}):r.default.createElement(i.default,{name:"volume-up"})),r.default.createElement("div",{className:"video-mute__volume"},r.default.createElement("div",{className:"video-mute__track"},r.default.createElement(a.default,{orientation:"vertical",onChange:this.changeVolume,progress:this.props.muted?0:100*this.props.volume}))))}});t.default=s,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=(o(n(65)),r.default.createClass({displayName:"Time",propTypes:{currentTime:r.default.PropTypes.number,duration:r.default.PropTypes.number},shouldComponentUpdate:function(e){return this.props.currentTime!==e.currentTime||this.props.duration!==e.duration},formatTime:function(e){var t=new Date(null);return e=isNaN(e)?0:Math.floor(e),t.setSeconds(e),t.toISOString().substr(11,8)},render:function(){return r.default.createElement("div",{className:"video-time video__control"},r.default.createElement("span",{className:"video-time__current"},this.formatTime(this.props.currentTime)),"/",r.default.createElement("span",{className:"video-time__duration"},this.formatTime(this.props.duration)))}}));t.default=i,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=o(n(65)),a=r.default.createClass({displayName:"Fullscreen",propTypes:{copyKeys:r.default.PropTypes.object,fullscreen:r.default.PropTypes.func},shouldComponentUpdate:function(e){return this.props.fullscreen!==e.fullscreen},render:function(){return r.default.createElement("button",{onClick:this.props.fullscreen,className:"video-fullscreen video__control","aria-label":this.props.copyKeys.fullscreen},r.default.createElement(i.default,{name:"resize-full"}))}});t.default=a,e.exports=t.default},function(e,t,n){var o=n(61).default;Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=r.default.createClass({displayName:"Subtitles",propTypes:{copyKeys:r.default.PropTypes.object,setSubtitles:r.default.PropTypes.func},render:function(){return r.default.createElement("button",{className:"video-play video__control",onClick:this.props.setSubtitles},"CC")}});t.default=i,e.exports=t.default},function(e,t,n){var o=n(81),r="Expected a function";e.exports=function(e,t,n){var i,a,l=!0,u=!0;if("function"!=typeof e)throw new TypeError(r);return!1===n?l=!1:(a=void 0===(i=n)?"undefined":s(i),!i||"object"!=a&&"function"!=a||(l="leading"in n?!!n.leading:l,u="trailing"in n?!!n.trailing:u)),o(e,t,{leading:l,maxWait:+t,trailing:u})}},function(e,t,n){var o=n(82),r="Expected a function",i=Math.max,a=o(Date,"now")||function(){return(new Date).getTime()};e.exports=function(e,t,n){var o,l,u,c,f,d,p,h,m,y=0,v=!1,b=!0;if("function"!=typeof e)throw new TypeError(r);if(t=t<0?0:+t||0,!0===n){var g=!0;b=!1}else m=void 0===(h=n)?"undefined":s(h),!h||"object"!=m&&"function"!=m||(g=!!n.leading,v="maxWait"in n&&i(+n.maxWait||0,t),b="trailing"in n?!!n.trailing:b);function w(t,n){n&&clearTimeout(n),l=d=p=void 0,t&&(y=a(),u=e.apply(f,o),d||l||(o=f=void 0))}function _(){var e=t-(a()-c);e<=0||e>t?w(p,l):d=setTimeout(_,e)}function O(){w(b,d)}function x(){if(o=arguments,c=a(),f=this,p=b&&(d||!g),!1===v)var n=g&&!d;else{l||g||(y=c);var r=v-(c-y),i=r<=0||r>v;i?(l&&(l=clearTimeout(l)),y=c,u=e.apply(f,o)):l||(l=setTimeout(O,r))}return i&&d?d=clearTimeout(d):d||t===v||(d=setTimeout(_,t)),n&&(i=!0,u=e.apply(f,o)),!i||d||l||(o=f=void 0),u}return x.cancel=function(){d&&clearTimeout(d),l&&clearTimeout(l),y=0,l=d=p=void 0},x}},function(e,t){var n="[object Function]",o=/^\[object .+?Constructor\]$/;var r=Object.prototype,i=Function.prototype.toString,a=r.hasOwnProperty,l=r.toString,u=RegExp("^"+i.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e,t){var r=null==e?void 0:e[t];return function(e){return null!=e&&(function(e){return function(e){var t=void 0===e?"undefined":s(e);return!!e&&("object"==t||"function"==t)}(e)&&l.call(e)==n}(e)?u.test(i.call(e)):function(e){return!!e&&"object"==(void 0===e?"undefined":s(e))}(e)&&o.test(e))}(r)?r:void 0}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={sourceError:"Video cannot be played in this browser.",play:"Play video",pause:"Pause video",mute:"Mute video",unmute:"Unmute video",fullscreen:"View video fullscreen",seek:"Seek video"},e.exports=t.default}])},"object"===s(t)&&"object"===s(e)?e.exports=a(n(1)):(r=[n(1)],void 0===(i="function"==typeof(o=a)?o.apply(t,r):o)||(e.exports=i))}).call(this,n(53)(e))},2551:function(e,t,n){"use strict";(function(t,o){var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var s=n(21),l=n(2552);e.exports=t(s({displayName:"common/video-player/china-html5-video/_time",propTypes:{currentTime:a.default.number,duration:a.default.number},shouldComponentUpdate:function(e){return this.props.currentTime!==e.currentTime||this.props.duration!==e.duration},formatTime:function(e){var t=new Date(null);return e=isNaN(e)?0:Math.floor(e),t.setSeconds(e),t.toISOString().substr(14,5)},render:function(){return o.createElement("div",{styleName:"run-time"},this.formatTime(this.props.currentTime)+" / "+this.formatTime(this.props.duration))}}),l)}).call(this,n(5),n(1))},2552:function(e,t,n){e.exports={"run-time":"_time--run-time--1QREv"}},2553:function(e,t,n){"use strict";(function(t,o){var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var s=n(21),l=n(2554);e.exports=t(s({displayName:"common/video-player/china-html5-video/_progress",propTypes:{copyKeys:a.default.object,currentTime:a.default.number,seek:a.default.func,percentageBuffered:a.default.number,percentagePlayed:a.default.number,duration:a.default.number},shouldComponentUpdate:function(e){return this.props.seek!==e.seek||this.props.percentagePlayed!==e.percentagePlayed||this.props.duration!==e.duration},handleSeek:function(e){this.props.seek((e.clientX-e.currentTarget.getBoundingClientRect().left)/e.currentTarget.offsetWidth*this.props.duration,!0)},render:function(){return o.createElement("div",{styleName:"progress-bar-background","aria-label":this.props.copyKeys.seek,"aria-valuenow":this.props.currentTime,"aria-valuemax":this.props.duration,onClick:this.handleSeek},o.createElement("div",{styleName:"progress-bar-inner",style:{width:this.props.percentagePlayed+"%"}}))}}),l)}).call(this,n(5),n(1))},2554:function(e,t,n){e.exports={"progress-bar-background":"_progress--progress-bar-background--1bgZV","progress-bar-inner":"_progress--progress-bar-inner--72iSR"}},2555:function(e,t,n){"use strict";(function(t,o,r){var i=n(21),a=n(2556);e.exports=t(i({displayName:"common/video-player/china-html5-video/_playback-speed",getDefaultProps:function(){return{setPlaybackRate:o.noop,readStoredState:o.noop,writeStoredState:o.noop}},getInitialState:function(){return{playbackRate:1,open:!1,id:o.uniqueId("video_")}},componentDidMount:function(){var e=this.props.readStoredState("playbackRate");e&&this.setSpeed(e)},shouldComponentUpdate:function(e,t){return this.props.setPlaybackRate!==e.setPlaybackRate||this.state.playbackRate!==t.playbackRate||this.state.open!==t.open},toggleMenu:function(){var e=this.state.open;e?this.props.setActiveMenu("none"):this.props.setActiveMenu("speed-menu"),this.setState({open:!e})},setSpeed:function(e){this.props.setPlaybackRate(e),this.setState({playbackRate:e}),this.props.writeStoredState("playbackRate",e)},handleSpeedChange:function(e){this.setSpeed(parseFloat(e.target.value,10))},handleLabelClick:function(){this.toggleMenu()},handleKeyboardSelection:function(e){var t=function(e,t){var n=t?1:-1,o=document.querySelectorAll('[tabindex="0"]'),r=Array.prototype.slice.call(o),i=r.indexOf(e);return r[i+n]||r[0]};13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),e.target.click()),38===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t(e.target,!1).focus()),40===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t(e.target,!0).focus()),27===e.keyCode&&this.setState({open:!1})},render:function(){var e=this.state.open;return r.createElement("div",{styleName:e?"playback-speed-menu--open":"playback-speed-menu"},r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:2===this.state.playbackRate,value:"2",id:this.state.id+"_speedOption_2"}),r.createElement("label",{className:2===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_2","aria-checked":2===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"2x"),r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:1.75===this.state.playbackRate,value:"1.75",id:this.state.id+"_speedOption_1-75"}),r.createElement("label",{className:1.75===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_1-75","aria-checked":1.75===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"1.75x"),r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:1.5===this.state.playbackRate,value:"1.5",id:this.state.id+"_speedOption_1-5"}),r.createElement("label",{className:1.5===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_1-5","aria-checked":1.5===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"1.5x"),r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:1.25===this.state.playbackRate,value:"1.25",id:this.state.id+"_speedOption_1-25"}),r.createElement("label",{className:1.25===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_1-25","aria-checked":1.25===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"1.25x"),r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:1===this.state.playbackRate,value:"1",id:this.state.id+"_speedOption_1"}),r.createElement("label",{className:1===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_1","aria-checked":1===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"1x"),r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:.75===this.state.playbackRate,value:"0.75",id:this.state.id+"_speedOption_0-75"}),r.createElement("label",{className:.75===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_0-75","aria-checked":.75===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"0.75x"),r.createElement("input",{type:"radio",name:"playback-speed",onChange:this.handleSpeedChange,checked:.5===this.state.playbackRate,value:"0.5",id:this.state.id+"_speedOption_0-5"}),r.createElement("label",{className:.5===this.state.playbackRate||this.state.open?"":"speed-option-hide",role:"radiobutton",htmlFor:this.state.id+"_speedOption_0-5","aria-checked":.5===this.state.playbackRate,onKeyDown:this.handleKeyboardSelection,onClick:this.handleLabelClick,tabIndex:"0"},"0.5x"))}}),a)}).call(this,n(5),n(4),n(1))},2556:function(e,t,n){e.exports={"playback-speed-menu":"_playback-speed--playback-speed-menu--EC91q","playback-speed-menu--open":"_playback-speed--playback-speed-menu--open--2f1pG"}},2557:function(e,t,n){"use strict";(function(t,o,r){var i,a=n(0),s=(i=a)&&i.__esModule?i:{default:i};var l=n(21),u=n(2558);e.exports=t(l({displayName:"common/video-player/china-html5-video/_subtitles",propTypes:{loadedCaptions:s.default.array,onSubtitlesChange:s.default.func,__:s.default.func},getDefaultProps:function(){return{loadedCaptions:[]}},getInitialState:function(){return{isOpen:!1,subtitles:"en-us_zh-cn",id:o.uniqueId("video_")}},componentDidMount:function(){this.setState({subtitles:this.props.subtitlesLang})},handleToggleMenu:function(){var e=this.state.isOpen;e?this.props.setActiveMenu("none"):this.props.setActiveMenu("subtitles-menu"),this.setState({isOpen:!e})},changeSubtitles:function(e){this.setState({subtitles:e}),this.props.changeSubtitles(e),this.handleToggleMenu()},render:function(){var e=this,t=this.props.loadedCaptions,n=this.state.isOpen,o=this.state.subtitles;return r.createElement("div",{styleName:"menu-container"},r.createElement("ul",{styleName:n?"subtitles-menu--open":"subtitles-menu"},t.map(function(t){return r.createElement("li",{key:e.state.id+"_"+t},r.createElement("button",{"data-state":o===t?"active":"inactive",type:"button",onClick:e.changeSubtitles.bind(e,t)},__(t)))}),r.createElement("li",null,r.createElement("button",{"data-state":"none"===o?"active":"inactive",type:"button",onClick:this.changeSubtitles.bind(this,"none")},__("None")))),r.createElement("button",{id:"subtitles",type:"button",styleName:"subtitles-button","data-state":"subtitles",title:"subtitles",onClick:this.handleToggleMenu},"CC"))}}),u)}).call(this,n(5),n(4),n(1))},2558:function(e,t,n){e.exports={"menu-container":"_subtitles--menu-container--31680","subtitles-menu":"_subtitles--subtitles-menu--ZExUH","subtitles-menu--open":"_subtitles--subtitles-menu--open--Dfbve","subtitles-button":"_subtitles--subtitles-button--29MKi"}},2559:function(e,t,n){},2560:function(e,t,n){e.exports={wrapper:"wrapper--wrapper--2PKhg",overlay:"wrapper--overlay--POdpr","overlay-hidden":"wrapper--overlay-hidden--1ADp3 wrapper--overlay--POdpr","transition-out":"wrapper--transition-out--1_vFD",curtain:"wrapper--curtain--2P9NJ"}},2561:function(e,t,n){"use strict";(function(e,o){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=f(n(62)),u=f(n(0)),c=f(n(1875));f(n(2562));function f(e){return e&&e.__esModule?e:{default:e}}var d=(a=i=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),s(n,[{key:"render",value:function(){var t=this.props,n=t.onRequestClose,o=t.isOpen,r=t.youtubeId,i=t.chinaCdnId,a=t.localeFileContext,s=t.options;return e.createElement(l.default,{isOpen:o,onRequestClose:n},e.createElement(c.default,{youtubeId:r,chinaCdnId:i,isPlaying:!0,localeFileContext:a,options:s}))}}]),n}(),i.propTypes={chinaCdnId:u.default.string,isOpen:u.default.bool,localeFileContext:u.default.array,onRequestClose:u.default.func.isRequired,options:u.default.object,youtubeId:u.default.string.isRequired},i.defaultProps={isOpen:!1,localeFileContext:[],onRequestClose:o.noop,options:{}},a);t.default=d}).call(this,n(1),n(4))},2562:function(e,t,n){e.exports={"video-modal":"modal--video-modal--2zV4J"}},2564:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1659),a=l(n(1878)),s=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}var u,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=(c=u=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),f(n,[{key:"render",value:function(){var t=this.props,n=t.atom,r=t.index,s=t.count,l=t.isCorrect,u=t.selectedId,c=t.onAnswerChange;return e.createElement(i.QuizContainer,null,e.createElement(i.QuizPrompt,{index:r,count:s,text:o.get(n,"question.prompt","")}),e.createElement(a.default,{defaultSelectedIds:[u],answers:(n.question||{}).answers,onChange:c,isCorrect:l}))}}]),n}(),u.displayName="atoms/radio-quiz-atom",u.propTypes={atom:s.default.object,selectedId:s.default.string,onAnswerChange:s.default.func,isCorrect:s.default.bool,index:s.default.number,count:s.default.number},u.defaultProps={atom:{}},c);t.default=d}).call(this,n(1),n(4))},2565:function(e,t,n){"use strict";(function(e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=p(n(479)),u=p(n(0)),c=p(n(1)),f=p(n(1876)),d=n(2566);function p(e){return e&&e.__esModule?e:{default:e}}var h=e(f.default)((a=i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.index,o=e.text;return c.default.createElement("div",{styleName:"prompt"},t&&n?c.default.createElement("h3",{styleName:"question-number"},t>1?(0,d.__)("Question <%= index %> of <%= count %>",{index:n,count:t}):(0,d.__)("Quiz Question")):null,c.default.createElement(l.default,{text:o}))}}]),t}(),i.propTypes={index:u.default.number,count:u.default.number,text:u.default.string},i.defaultProps={index:null,count:null,text:""},r=a))||r;t.default=h}).call(this,n(5))},2566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__=void 0;var o=new(n(198).I18n)(n(2567));t.__=o.__},2568:function(e,t,n){"use strict";(function(e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=e(s(n(1876)).default)(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"render",value:function(){return a.default.createElement("div",{styleName:"container"},this.props.children)}}]),t}())||r;t.default=l}).call(this,n(5))},2569:function(e,t,n){"use strict";(function(e,o,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(62),s=u(n(0)),l=u(n(2570));function u(e){return e&&e.__esModule?e:{default:e}}var c,f,d,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var h=e(l.default)((d=f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.text,r=e.onClick,i=e.isChecked,s=e.isCorrect,l=e.isRadio,u=l?a.Radio:a.Checkbox,c=void 0,f=void 0;return!0===s?(c="answer-correct",f=!0):!1===s&&l?(c="answer-incorrect",f=!0):(c="answer",f=!1),o.createElement("li",{styleName:c,onClick:function(){return r(t)}},o.createElement("div",{styleName:"status"},f?o.createElement("div",{styleName:"answered-label"},o.createElement(a.Markdown,{text:n})):o.createElement(u,{styleName:"selector",checked:i,readOnly:!0,style:{marginRight:"0.5em"}},o.createElement(a.Markdown,{text:n}))))}}]),t}(),f.displayName="atoms/radio-button-quiz-atom/_answer",f.propTypes={id:s.default.string.isRequired,text:s.default.string.isRequired,onClick:s.default.func,isChecked:s.default.bool,isCorrect:s.default.bool,isRadio:s.default.bool},f.defaultProps={onClick:r.noop,isChecked:!1,isCorrect:null,isRadio:!0},c=d))||c;t.default=h}).call(this,n(5),n(1),n(4))},2570:function(e,t,n){e.exports={answer:"_answer--answer--1HCPX",selector:"_answer--selector--lhYoz","answer-correct":"_answer--answer-correct--13UjS _answer--answer--1HCPX",status:"_answer--status--1Esuk","answer-incorrect":"_answer--answer-incorrect--1ZHlH _answer--answer--1HCPX","answered-label":"_answer--answered-label--313DP"}},2571:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1659),a=l(n(1878)),s=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}var u,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=(c=u=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),f(n,[{key:"render",value:function(){var t=this.props,n=t.atom,r=t.index,s=t.count,l=t.isCorrect,u=t.selectedIds,c=t.onAnswerChange;return e.createElement(i.QuizContainer,null,e.createElement(i.QuizPrompt,{index:r,count:s,text:o.get(n,"question.prompt","")}),e.createElement(a.default,{defaultSelectedIds:u,answers:(n.question||{}).answers,isCorrect:l,onChange:c,allowMultiple:!0}))}}]),n}(),u.displayName="atoms/checkbox-quiz-atom",u.propTypes={atom:s.default.object,selectedIds:s.default.array,onAnswerChange:s.default.func,isCorrect:s.default.bool,index:s.default.number,count:s.default.number},u.defaultProps={atom:{}},c);t.default=d}).call(this,n(1),n(4))},2572:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(62),s=n(0),l=(r=s)&&r.__esModule?r:{default:r};var u,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=(c=u=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),f(n,[{key:"render",value:function(){var t=this.props,n=t.text,r=t.textDirection;return o.isEmpty(n)?null:e.createElement("div",{className:r},e.createElement(a.Markdown,{text:n}))}}]),n}(),u.displayName="atoms/text-atom",u.propTypes={text:l.default.string,textDirection:l.default.string},c);t.default=d}).call(this,n(1),n(4))},2573:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(62),s=n(0),l=(r=s)&&r.__esModule?r:{default:r};var u,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=(c=u=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),f(n,[{key:"render",value:function(){var t=this.props,n=t.notes,r=t.textDirection;return o.isEmpty(n)?null:e.createElement("div",{className:r},e.createElement(a.Markdown,{text:n}))}}]),n}(),u.displayName="common/instructor-notes",u.propTypes={notes:l.default.string,textDirection:l.default.string},c);t.default=d}).call(this,n(1),n(4))},2574:function(e,t,n){"use strict";(function(e,o,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=c(n(2575)),s=n(62),l=c(n(0)),u=c(n(2591));function c(e){return e&&e.__esModule?e:{default:e}}var f,d,p,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var m=e(u.default,{allowMultiple:!0})((p=d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),h(t,[{key:"render",value:function(){var e=this.props,t=e.caption,n=e.alt,i=e.annotations,l=e.fullscreen,u=e.imageGeoUrl,c=e.url,f=e.isWideLayout,d=e.width;return o.createElement("div",{styleName:"image-atom-content "+(l?"fullscreen":"")},o.createElement("div",{styleName:f?"image-and-annotations-container-wide":"image-and-annotations-container"},o.createElement("img",{ref:"image",styleName:"image",src:u||c,alt:n,width:l?null:d+"px"}),r.map(i,function(e,t){return o.createElement(a.default,{key:t,x:e.x,y:e.y,width:e.width,height:e.height,text:e.text})})),t?o.createElement("div",{styleName:"caption"},o.createElement(s.Markdown,{text:t})):null)}}]),t}(),d.displayName="atoms/image-atom/_image-atom-content",d.propTypes={url:l.default.string.isRequired,non_google_url:l.default.string,width:l.default.number,caption:l.default.string,alt:l.default.string,annotations:l.default.array,fullscreen:l.default.bool,imageGeoUrl:l.default.string,isWideLayout:l.default.bool},f=p))||f;t.default=m}).call(this,n(5),n(1),n(4))},2575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(62),i=u(n(2576)),a=u(n(2583)),s=u(n(0)),l=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var p=(f=c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),d(t,[{key:"_getPercentage",value:function(e){return Math.round(1e3*e)/10+"%"}},{key:"render",value:function(){var e={position:"absolute",left:this._getPercentage(this.props.x),top:this._getPercentage(this.props.y),width:this._getPercentage(this.props.width),height:this._getPercentage(this.props.height)},t=l.default.createElement(a.default,{id:this.props.x},l.default.createElement(r.Markdown,{text:this.props.text}));return l.default.createElement(i.default,{trigger:["hover","focus"],placement:"top",overlay:t},l.default.createElement("div",{className:"_image-atom-annotation",style:e},l.default.createElement("div",{className:"box"})))}}]),t}(),c.displayName="atoms/image-atom/_image-atom-annotation",c.propTypes={x:s.default.number.isRequired,y:s.default.number.isRequired,width:s.default.number.isRequired,height:s.default.number.isRequired,text:s.default.string.isRequired},f);t.default=p},2576:function(e,t,n){"use strict";t.__esModule=!0;var o=m(n(149)),r=m(n(19)),i=m(n(18)),a=m(n(20)),s=m(n(36)),l=m(n(2577)),u=n(1),c=m(u),f=m(n(0)),d=m(n(16)),p=(m(n(45)),m(n(2580))),h=m(n(2582));function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return Array.isArray(t)?t.indexOf(e)>=0:e===t}var v=f.default.oneOf(["click","hover","focus"]),b=(0,s.default)({},p.default.propTypes,{trigger:f.default.oneOfType([v,f.default.arrayOf(v)]),delay:f.default.number,delayShow:f.default.number,delayHide:f.default.number,defaultOverlayShown:f.default.bool,overlay:f.default.node.isRequired,onBlur:f.default.func,onClick:f.default.func,onFocus:f.default.func,onMouseOut:f.default.func,onMouseOver:f.default.func,target:f.default.oneOf([null]),onHide:f.default.oneOf([null]),show:f.default.oneOf([null])}),g=function(e){function t(n,o){(0,r.default)(this,t);var a=(0,i.default)(this,e.call(this,n,o));return a.handleToggle=a.handleToggle.bind(a),a.handleDelayedShow=a.handleDelayedShow.bind(a),a.handleDelayedHide=a.handleDelayedHide.bind(a),a.handleHide=a.handleHide.bind(a),a.handleMouseOver=function(e){return a.handleMouseOverOut(a.handleDelayedShow,e)},a.handleMouseOut=function(e){return a.handleMouseOverOut(a.handleDelayedHide,e)},a._mountNode=null,a.state={show:n.defaultOverlayShown},a}return(0,a.default)(t,e),t.prototype.componentDidMount=function(){this._mountNode=document.createElement("div"),this.renderOverlay()},t.prototype.componentDidUpdate=function(){this.renderOverlay()},t.prototype.componentWillUnmount=function(){d.default.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},t.prototype.handleToggle=function(){this.state.show?this.hide():this.show()},t.prototype.handleDelayedShow=function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;t?this._hoverShowDelay=setTimeout(function(){e._hoverShowDelay=null,e.show()},t):this.show()}},t.prototype.handleDelayedHide=function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;t?this._hoverHideDelay=setTimeout(function(){e._hoverHideDelay=null,e.hide()},t):this.hide()}},t.prototype.handleMouseOverOut=function(e,t){var n=t.currentTarget,o=t.relatedTarget||t.nativeEvent.toElement;o&&(o===n||(0,l.default)(n,o))||e(t)},t.prototype.handleHide=function(){this.hide()},t.prototype.show=function(){this.setState({show:!0})},t.prototype.hide=function(){this.setState({show:!1})},t.prototype.makeOverlay=function(e,t){return c.default.createElement(p.default,(0,s.default)({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)},t.prototype.renderOverlay=function(){d.default.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},t.prototype.render=function(){var e=this.props,t=e.trigger,n=e.overlay,r=e.children,i=e.onBlur,a=e.onClick,s=e.onFocus,l=e.onMouseOut,f=e.onMouseOver,d=(0,o.default)(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete d.delay,delete d.delayShow,delete d.delayHide,delete d.defaultOverlayShown;var p=c.default.Children.only(r),m=p.props,v={};return this.state.show&&(v["aria-describedby"]=n.props.id),v.onClick=(0,h.default)(m.onClick,a),y("click",t)&&(v.onClick=(0,h.default)(v.onClick,this.handleToggle)),y("hover",t)&&(v.onMouseOver=(0,h.default)(m.onMouseOver,f,this.handleMouseOver),v.onMouseOut=(0,h.default)(m.onMouseOut,l,this.handleMouseOut)),y("focus",t)&&(v.onFocus=(0,h.default)(m.onFocus,s,this.handleDelayedShow),v.onBlur=(0,h.default)(m.onBlur,i,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,d),(0,u.cloneElement)(p,v)},t}(c.default.Component);g.propTypes=b,g.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]},t.default=g,e.exports=t.default},2577:function(e,t,n){"use strict";var o=n(2578);t.__esModule=!0,t.default=void 0;var r=o(n(2579)).default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):i(e,t)}:i;function i(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}t.default=r,e.exports=t.default},2578:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},2579:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=o,e.exports=t.default},2580:function(e,t,n){"use strict";t.__esModule=!0;var o=m(n(149)),r=m(n(19)),i=m(n(18)),a=m(n(20)),s=m(n(36)),l=m(n(99)),u=n(1),c=m(u),f=m(n(0)),d=m(n(1854)),p=m(n(1776)),h=m(n(2581));function m(e){return e&&e.__esModule?e:{default:e}}var y=(0,s.default)({},d.default.propTypes,{show:f.default.bool,rootClose:f.default.bool,onHide:f.default.func,animation:f.default.oneOfType([f.default.bool,p.default]),onEnter:f.default.func,onEntering:f.default.func,onEntered:f.default.func,onExit:f.default.func,onExiting:f.default.func,onExited:f.default.func,placement:f.default.oneOf(["top","right","bottom","left"])}),v={animation:h.default,rootClose:!1,show:!1,placement:"right"},b=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.animation,n=e.children,r=(0,o.default)(e,["animation","children"]),i=!0===t?h.default:t||null,a=void 0;return a=i?n:(0,u.cloneElement)(n,{className:(0,l.default)(n.props.className,"in")}),c.default.createElement(d.default,(0,s.default)({},r,{transition:i}),a)},t}(c.default.Component);b.propTypes=y,b.defaultProps=v,t.default=b,e.exports=t.default},2581:function(e,t,n){"use strict";t.__esModule=!0;var o=f(n(36)),r=f(n(19)),i=f(n(18)),a=f(n(20)),s=f(n(99)),l=f(n(1)),u=f(n(0)),c=f(n(1857));function f(e){return e&&e.__esModule?e:{default:e}}var d={in:u.default.bool,mountOnEnter:u.default.bool,unmountOnExit:u.default.bool,transitionAppear:u.default.bool,timeout:u.default.number,onEnter:u.default.func,onEntering:u.default.func,onEntered:u.default.func,onExit:u.default.func,onExiting:u.default.func,onExited:u.default.func},p=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,e.apply(this,arguments))}return(0,a.default)(t,e),t.prototype.render=function(){return l.default.createElement(c.default,(0,o.default)({},this.props,{className:(0,s.default)(this.props.className,"fade"),enteredClassName:"in",enteringClassName:"in"}))},t}(l.default.Component);p.propTypes=d,p.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,transitionAppear:!1},t.default=p,e.exports=t.default},2582:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(this,o),t.apply(this,o)}},null)},e.exports=t.default},2583:function(e,t,n){"use strict";t.__esModule=!0;var o=p(n(36)),r=p(n(149)),i=p(n(19)),a=p(n(18)),s=p(n(20)),l=p(n(99)),u=p(n(1)),c=p(n(0)),f=p(n(2584)),d=n(2585);function p(e){return e&&e.__esModule?e:{default:e}}var h={id:(0,f.default)(c.default.oneOfType([c.default.string,c.default.number])),placement:c.default.oneOf(["top","right","bottom","left"]),positionTop:c.default.oneOfType([c.default.number,c.default.string]),positionLeft:c.default.oneOfType([c.default.number,c.default.string]),arrowOffsetTop:c.default.oneOfType([c.default.number,c.default.string]),arrowOffsetLeft:c.default.oneOfType([c.default.number,c.default.string]),title:c.default.node},m=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,s.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,a=t.positionLeft,s=t.arrowOffsetTop,c=t.arrowOffsetLeft,f=t.title,p=t.className,h=t.style,m=t.children,y=(0,r.default)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","title","className","style","children"]),v=(0,d.splitBsProps)(y),b=v[0],g=v[1],w=(0,o.default)({},(0,d.getClassSet)(b),((e={})[n]=!0,e)),_=(0,o.default)({display:"block",top:i,left:a},h),O={top:s,left:c};return u.default.createElement("div",(0,o.default)({},g,{role:"tooltip",className:(0,l.default)(p,w),style:_}),u.default.createElement("div",{className:"arrow",style:O}),f&&u.default.createElement("h3",{className:(0,d.prefix)(b,"title")},f),u.default.createElement("div",{className:(0,d.prefix)(b,"content")},m))},t}(u.default.Component);m.propTypes=h,m.defaultProps={placement:"right"},t.default=(0,d.bsClass)("popover",m),e.exports=t.default},2584:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t,n,o,r,i){var a=o||"<<anonymous>>",s=i||n;if(null==t[n])return new Error("The "+r+" `"+s+"` is required to make `"+a+"` accessible for users of assistive technologies such as screen readers.");for(var l=arguments.length,u=Array(l>5?l-5:0),c=5;c<l;c++)u[c-5]=arguments[c];return e.apply(void 0,[t,n,o,r,i].concat(u))}}},2585:function(e,t,n){"use strict";t.__esModule=!0,t._curry=t.bsSizes=t.bsStyles=t.bsClass=void 0;var o=l(n(2586)),r=l(n(36));t.prefix=c,t.getClassSet=function(e){var t,n=((t={})[c(e)]=!0,t);if(e.bsSize){var o=s.SIZE_MAP[e.bsSize]||e.bsSize;n[c(e,o)]=!0}e.bsStyle&&(n[c(e,e.bsStyle)]=!0);return n},t.splitBsProps=function(e){var t={};return(0,o.default)(e).forEach(function(e){var n=e[0],o=e[1];p(n)||(t[n]=o)}),[d(e),t]},t.splitBsPropsAndOmit=function(e,t){var n={};t.forEach(function(e){n[e]=!0});var r={};return(0,o.default)(e).forEach(function(e){var t=e[0],o=e[1];p(t)||n[t]||(r[t]=o)}),[d(e),r]},t.addStyle=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];f(n,e)};var i=l(n(9)),a=l(n(0)),s=n(2590);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return"function"==typeof n[n.length-1]?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function c(e,t){return null==e.bsClass&&(0,i.default)(!1),e.bsClass+(t?"-"+t:"")}t.bsClass=u(function(e,t){var n=t.propTypes||(t.propTypes={}),o=t.defaultProps||(t.defaultProps={});return n.bsClass=a.default.string,o.bsClass=e,t});var f=t.bsStyles=u(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var o=n.STYLES||[],i=n.propTypes||{};e.forEach(function(e){-1===o.indexOf(e)&&o.push(e)});var s=a.default.oneOf(o);(n.STYLES=s._values=o,n.propTypes=(0,r.default)({},i,{bsStyle:s}),void 0!==t)&&((n.defaultProps||(n.defaultProps={})).bsStyle=t);return n});t.bsSizes=u(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var o=n.SIZES||[],i=n.propTypes||{};e.forEach(function(e){-1===o.indexOf(e)&&o.push(e)});var l=[];o.forEach(function(e){var t=s.SIZE_MAP[e];t&&t!==e&&l.push(t),l.push(e)});var u=a.default.oneOf(l);return u._values=l,n.SIZES=o,n.propTypes=(0,r.default)({},i,{bsSize:u}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n});function d(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function p(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}t._curry=u},2586:function(e,t,n){e.exports={default:n(2587),__esModule:!0}},2587:function(e,t,n){n(2588),e.exports=n(69).Object.entries},2588:function(e,t,n){var o=n(101),r=n(2589)(!0);o(o.S,"Object",{entries:function(e){return r(e)}})},2589:function(e,t,n){var o=n(147),r=n(102),i=n(148).f;e.exports=function(e){return function(t){for(var n,a=r(t),s=o(a),l=s.length,u=0,c=[];l>u;)i.call(a,n=s[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},2590:function(e,t,n){"use strict";t.__esModule=!0;t.Size={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},t.SIZE_MAP={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},t.DEVICE_SIZES=["lg","md","sm","xs"],t.State={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},t.Style={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"}},2591:function(e,t,n){e.exports={"image-atom-content":"index--image-atom-content--YoZVu",fullscreen:"index--fullscreen--3cwI1","image-and-annotations-container":"index--image-and-annotations-container--1o6QP",fadeIn:"index--fadeIn--2CbaB",caption:"index--caption--34paT",image:"index--image--1wh9w","_image-atom-annotation":"index--_image-atom-annotation--23dJ8",box:"index--box--2Q9pT","image-and-annotations-container-wide":"index--image-and-annotations-container-wide--1RDiM"}},2592:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=a(n(0)),i=a(n(1642));function a(e){return e&&e.__esModule?e:{default:e}}var s,l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c=(l=s=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.Component),u(n,[{key:"render",value:function(){return e.createElement(i.default,this.props)}}]),n}(),s.propTypes={youtubeId:r.default.string.isRequired,chinaCdnId:r.default.string,onEnd:r.default.func,onVideoSeen:r.default.func,localeFileContext:r.default.array,options:r.default.object,isPlaying:r.default.bool,aspectRatio:r.default.oneOf(["16x9","4x3"]),i18n:r.default.object},l);t.default=c}).call(this,n(1))},2618:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=l(n(1)),i=l(n(0)),a=l(n(5)),s=l(n(2619));function l(e){return e&&e.__esModule?e:{default:e}}var u,c,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}var h=(0,a.default)(s.default)((f=c=function(t){function n(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=o=p(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),o.state={addingFile:!1,renamingFile:""},o.handleCancelFilename=function(e){var t=o.state,n=t.renamingFile,r=t.addingFile;(n||r)&&27===e.keyCode&&o.setState({renamingFile:"",addingFile:!1})},o.handleAddingFile=function(e){e.preventDefault(),o.setState({renamingFile:"",addingFile:!0})},o.addFile=function(e){var t=o.props.onAdd,n=o.refs.filename.value;e.preventDefault(),n&&(t(n),o.refs.filename.value="",o.setState({addingFile:!1}))},o.handleRenamingFile=function(e,t){e.preventDefault(),o.setState({renamingFile:t+"",addingFile:!1})},o.renamingFile=function(e){e.preventDefault();var t=o.props.onRename,n=o.state.renamingFile,r=o.refs.filename.value;r&&(t(n,r),o.refs.filename.value="",o.setState({renamingFile:""}))},p(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default.Component),d(n,[{key:"render",value:function(){var t=this,n=this.props,o=n.files,i=n.onSelect,a=n.selectedFile,s=n.onDelete,l=n.onAdd,u=this.state,c=u.addingFile,f=u.renamingFile,d=o[a]?o[a].name:"";return r.default.createElement("div",{styleName:"files-selector",onKeyUp:this.handleCancelFilename},r.default.createElement("h5",{id:"file-select-description","aria-live":"assertive"},d," Currently Selected"),l?r.default.createElement("div",{styleName:"add-file"},c||f?r.default.createElement("form",{method:"post",action:"#",onSubmit:c?this.addFile:this.renamingFile},r.default.createElement("label",{htmlFor:"filename"},"Filename:")," ",r.default.createElement("input",{id:"filename",ref:"filename",type:"text",placeholder:"yourfile.js",onBlur:c?this.addFile:this.renamingFile,defaultValue:f?o[f].name:null})):r.default.createElement("a",{href:"#",onClick:this.handleAddingFile,title:"Add File"},r.default.createElement("span",null,"Add File"))):null,r.default.createElement("ul",{"aria-describedby":"file-select-description"},e.map(o,function(e,n){return r.default.createElement("li",{key:n,styleName:a===n?"file-selected":"file-tab",role:"tab","aria-selected":a===n},r.default.createElement("a",{href:"#",onClick:function(e){return i(e,n)},onDoubleClick:function(e){return t.handleRenamingFile(e,n)}},e.name,a===n?r.default.createElement("span",null,"Currently Selected"):null)," ",s?r.default.createElement("a",{href:"#",onClick:function(t){return s(t,e)},title:"Delete File",styleName:"delete"},r.default.createElement("span",null,"Delete File")):null)})))}}]),n}(),c.displayName="ureact-code-editor.files-selector",c.propTypes={files:i.default.array,onSelect:i.default.func,selectedFile:i.default.number,onRename:i.default.func,onDelete:i.default.func,onAdd:i.default.func},c.defaultProps={files:[],onSelect:e.noop,selectedFile:0,onRename:e.noop,onDelete:!1,onAdd:!1},u=f))||u;t.default=h}).call(this,n(4))},2619:function(e,t,n){e.exports={"files-selector":"files-selector--files-selector--3AJKp","file-tab":"files-selector--file-tab--197zT","file-selected":"files-selector--file-selected--DgguB",delete:"files-selector--delete--3Kehu","add-file":"files-selector--add-file--2MwrC"}},2620:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=u(n(1)),i=u(n(0)),a=u(n(1880)),s=u(n(5)),l=u(n(2621));function u(e){return e&&e.__esModule?e:{default:e}}var c,f,d,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}var y=(0,s.default)(l.default)((d=f=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleA11yFileChange=function(e){o.handleFileChange(e.target.value)},o.handleFileChange=function(e){(0,o.props.handleFileChange)(e)},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),h(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.file,i=t.name,s=t.readOnly,l=t.AceEditor,u=t.ace,c=o?o.name:"",f=o?o.text:"";return r.default.createElement("div",null,r.default.createElement("textarea",{onChange:this.handleA11yFileChange,styleName:"a11yEditor",title:"Simplified code editor",value:f,ref:function(t){e.a11yEditor=t}}),r.default.createElement("div",{"aria-hidden":!0,role:"presentation",tabIndex:"-1","aria-label":"Advanced code editor.  Click ESC to revert to the simplified editor."},r.default.createElement(l,p({ref:function(t){e.aceEditor=t},value:f,onChange:this.handleFileChange,onLoad:function(e){e.gotoLine(0,0)},mode:a.default.getMode(c),theme:"textmate",width:"100%",fontSize:14,name:n||i,showPrintMargin:!1,readOnly:s,commands:[{exec:function(){e.a11yEditor.focus()},bindKey:{mac:"Esc",win:"Esc"}}]},u||{}))))}}]),t}(),f.displayName="code-editor",f.propTypes={file:i.default.shape({text:i.default.string.isRequired,name:i.default.name}),handleFileChange:i.default.func,id:i.default.string,name:i.default.string.isRequired,readOnly:i.default.bool,ace:i.default.object,AceEditor:i.default.func.isRequired},f.defaultProps={file:{},handleFileChange:e.noop,id:null,readOnly:!1},c=d))||c;t.default=y}).call(this,n(4))},2621:function(e,t,n){e.exports={a11yEditor:"code-editor--a11yEditor--3_Beu"}},2622:function(e,t,n){e.exports={"code-editor":"ureact-code-editor--code-editor--kWVV9",editor:"ureact-code-editor--editor--3JsHF"}},2634:function(e,t){!function(){var e,t=window.jQuery,n="mathquill-block-id",o=Math.min,r=Math.max;function i(){}var a=[].slice;function s(e){var t=e.length-1;return function(){var n=a.call(arguments,0,t),o=a.call(arguments,t);return e.apply(this,n.concat([o]))}}var l=s(function(e,t){return s(function(n,o){if(e in n)return n[e].apply(n,t.concat(o))})});function u(e){return s(function(t,n){"function"!=typeof t&&(t=l(t));return e.call(this,function(e){return t.apply(e,[e].concat(n))})})}function c(e){var t=a.call(arguments,1);return function(){return e.apply(this,t)}}function f(e,t){if(!t)throw new Error("prayer failed: "+e)}var d=function(e,t,n){function o(e){return"object"==typeof e}function r(e){return"function"==typeof e}function i(){}return function e(n,a){function s(){var e=new l;return r(e.init)&&e.init.apply(e,arguments),e}function l(){}void 0===a&&(a=n,n=Object),s.Bare=l;var u,c=i.prototype=n.prototype,f=l.prototype=s.prototype=s.p=new i;return f.constructor=s,s.extend=function(t){return e(s,t)},(s.open=function(e){if(u={},r(e)?u=e.call(s,f,c,s,n):o(e)&&(u=e),o(u))for(var i in u)t.call(u,i)&&(f[i]=u[i]);return r(f.init)||(f.init=n),s})(a)}}(0,{}.hasOwnProperty),p=-1,h=1;function m(e){f("a direction was passed",e===p||e===h)}var y=d(t,function(e){e.insDirOf=function(e,t){return e===p?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===p?this.prependTo(t):this.appendTo(t)}}),v=d(function(e){e.parent=0,e[p]=0,e[h]=0,e.init=function(e,t,n){this.parent=e,this[p]=t,this[h]=n},this.copy=function(e){return v(e.parent,e[p],e[h])}}),b=d(function(e){e[p]=0,e[h]=0,e.parent=0;var t=0;this.byId={},e.init=function(){this.id=t+=1,b.byId[this.id]=this,this.ends={},this.ends[p]=0,this.ends[h]=0},e.dispose=function(){delete b.byId[this.id]},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=y(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){e=y(e||this.html());function t(e){if(e.getAttribute){var n=e.getAttribute("mathquill-command-id"),o=e.getAttribute("mathquill-block-id");n&&b.byId[n].jQadd(e),o&&b.byId[o].jQadd(e)}for(e=e.firstChild;e;e=e.nextSibling)t(e)}for(var n=0;n<e.length;n+=1)t(e[n]);return e},e.createDir=function(e,t){m(e);return this.jQize(),this.jQ.insDirOf(e,t.jQ),t[e]=this.adopt(t.parent,t[p],t[h]),this},e.createLeftOf=function(e){return this.createDir(p,e)},e.selectChildren=function(e,t){return E(e,t)},e.bubble=u(function(e){for(var t=this;t;t=t.parent){if(!1===e(t))break}return this}),e.postOrder=u(function(e){return function t(n){n.eachChild(t),e(n)}(this),this}),e.isEmpty=function(){return 0===this.ends[p]&&0===this.ends[h]},e.children=function(){return w(this.ends[p],this.ends[h])},e.eachChild=function(){var e=this.children();return e.each.apply(e,arguments),this},e.foldChildren=function(e,t){return this.children().fold(e,t)},e.withDirAdopt=function(e,t,n,o){return w(this,this).withDirAdopt(e,t,n,o),this},e.adopt=function(e,t,n){return w(this,this).adopt(e,t,n),this},e.disown=function(){return w(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}});function g(e,t,n){f("a parent is always present",e),f("leftward is properly set up",t?t[h]===n&&t.parent===e:e.ends[p]===n),f("rightward is properly set up",n?n[p]===t&&n.parent===e:e.ends[h]===t)}var w=d(function(t){t.init=function(t,n,o){if(o===e&&(o=p),m(o),f("no half-empty fragments",!t==!n),this.ends={},t){f("withDir is passed to Fragment",t instanceof b),f("oppDir is passed to Fragment",n instanceof b),f("withDir and oppDir have the same parent",t.parent===n.parent),this.ends[o]=t,this.ends[-o]=n;var r=this.fold([],function(e,t){return e.push.apply(e,t.jQ.get()),e});this.jQ=this.jQ.add(r)}},t.jQ=y(),t.withDirAdopt=function(e,t,n,o){return e===p?this.adopt(t,n,o):this.adopt(t,o,n)},t.adopt=function(e,t,n){g(e,t,n);this.disowned=!1;var o=this.ends[p];if(!o)return this;var r=this.ends[h];return t||(e.ends[p]=o),n?n[p]=r:e.ends[h]=r,this.ends[h][h]=n,this.each(function(n){n[p]=t,n.parent=e,t&&(t[h]=n),t=n}),this},t.disown=function(){var e=this.ends[p];if(!e||this.disowned)return this;this.disowned=!0;var t=this.ends[h],n=e.parent;return g(n,e[p],e),g(n,t,t[h]),e[p]?e[p][h]=t[h]:n.ends[p]=t[h],t[h]?t[h][p]=e[p]:n.ends[h]=e[p],this},t.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},t.each=u(function(e){var t=this.ends[p];if(!t)return this;for(;t!==this.ends[h][h];t=t[h]){if(!1===e(t))break}return this}),t.fold=function(e,t){return this.each(function(n){e=t.call(this,e,n)}),e}}),_={},O={},x=d(v,function(e){e.init=function(e,t){this.parent=e,this.options=t;var n=this.jQ=this._jQ=y('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[h]?this.selection&&this.selection.ends[p][p]===this[p]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[h].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=y(),this},e.withDirInsertAt=function(e,t,n,o){var r=this.parent;this.parent=t,this[e]=n,this[-e]=o,r!==t&&r.blur&&r.blur(this)},e.insDirOf=function(e,t){return m(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(p,e)},e.insRightOf=function(e){return this.insDirOf(h,e)},e.insAtDirEnd=function(e,t){return m(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(p,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(h,e)},e.jumpUpDown=function(e,t){this.upDownCache[e.id]=v.copy(this);var n=this.upDownCache[t.id];if(n)n[h]?this.insLeftOf(n[h]):this.insAtRightEnd(n.parent);else{var o=this.offset().left;t.seek(o,this)}},e.offset=function(){var e=this.jQ.removeClass("mq-cursor").offset();return this.jQ.addClass("mq-cursor"),e},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,n=e[h],o=e[p];if(e.disown().eachChild(function(r){r.isEmpty()||(r.children().adopt(t,o,n).each(function(t){t.jQ.insertBefore(e.jQ.first())}),o=r.ends[h])}),!this[h])if(this[p])this[h]=this[p][h];else for(;!this[h];){if(this.parent=this.parent[h],!this.parent){this[h]=e[h],this.parent=t;break}this[h]=this.parent.ends[p]}this[h]?this.insLeftOf(this[h]):this.insAtRightEnd(t),e.jQ.remove(),e[p].siblingDeleted&&e[p].siblingDeleted(this.options,h),e[h].siblingDeleted&&e[h].siblingDeleted(this.options,p)},e.startSelection=function(){for(var e=this.anticursor=v.copy(this),t=e.ancestors={},n=e;n.parent;n=n.parent)t[n.parent.id]=n},e.endSelection=function(){delete this.anticursor},e.select=function(){var e=this.anticursor;if(this[p]===e[p]&&this.parent===e.parent)return!1;for(var t=this;t.parent;t=t.parent)if(t.parent.id in e.ancestors){var n=t.parent;break}f("cursor and anticursor in the same tree",n);var o,r,i=e.ancestors[n.id],a=h;if(t[p]!==i)for(var s=t;s;s=s[h])if(s[h]===i[h]){a=p,o=t,r=i;break}return a===h&&(o=i,r=t),o instanceof v&&(o=o[h]),r instanceof v&&(r=r[p]),this.hide().selection=n.selectChildren(o,r),this.insDirOf(a,this.selection.ends[a]),this.selectionChanged(),!0},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[p]=this.selection.ends[p][p],this[h]=this.selection.ends[h][h],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[p]=e.ends[p][p],this[h]=e.ends[h][h],delete this.selection),e}}),E=d(w,function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e){return this.fold("",function(t,n){return t+n[e]()})}}),S=d(function(e){e.init=function(e,t,n){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=n,e.controller=this,this.cursor=e.cursor=x(e,n)},e.handle=function(e,t){var n=this.options.handlers;if(n&&n.fns[e]){var o=n.APIClasses[this.KIND_OF_MQ](this);t===p||t===h?n.fns[e](t,o):n.fns[e](o)}};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}}),P={},C=d(),T={},k=d(),j={};function M(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function q(e){return M(),De(e)}q.prototype=k.p,q.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return(M=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),q},q.getInterface=R;var D=R.MIN=1,N=R.MAX=2;function R(e){if(!(D<=e&&e<=N))throw"Only interface versions between "+D+" and "+N+" supported. You specified: "+e;function o(e){if(!e||!e.nodeType)return null;var t=y(e).children(".mq-root-block").attr(n),o=t&&b.byId[t].controller;return o?r[o.KIND_OF_MQ](o):null}var r={};function a(e,t){for(var n in t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:r}),t)if(t.hasOwnProperty(n)){var o=t[n],i=T[n];e[n]=i?i(o):o}}o.L=p,o.R=h,o.config=function(e){return a(C.p,e),this},o.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";j[e]=t};var s=r.AbstractMathQuill=d(k,function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t=this.__controller,o=t.root,r=t.container;t.createTextarea();var i=r.addClass(e).contents().detach();o.jQ=y('<span class="mq-root-block"/>').attr(n,o.id).appendTo(r),this.latex(i.text()),this.revert=function(){return r.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(i)}},e.config=function(e){return a(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder("reflow"),this}});for(var l in o.prototype=s.prototype,r.EditableField=d(s,function(e,n){e.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},e.focus=function(){return this.__controller.textarea.focus(),this},e.blur=function(){return this.__controller.textarea.blur(),this},e.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},e.cmd=function(e){var t=this.__controller.notify(),n=t.cursor;if(/^\\[a-z]+$/i.test(e)){e=e.slice(1);var o=_[e];o&&(e=o(e),n.selection&&e.replaces(n.replaceSelection()),e.createLeftOf(n.show()),this.__controller.scrollHoriz())}else n.parent.write(n,e);return t.blurred&&n.hide().parent.blur(),this},e.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[p];)e.selectLeft();return this},e.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},e.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},e.moveToLeftEnd=function(){return this.moveToDirEnd(p)},e.moveToRightEnd=function(){return this.moveToDirEnd(h)},e.keystroke=function(e){e=e.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var t=0;t<e.length;t+=1)this.__controller.keystroke(e[t],{preventDefault:i});return this},e.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},e.dropEmbedded=function(e,t,n){var o=e-y(window).scrollLeft(),r=t-y(window).scrollTop(),i=document.elementFromPoint(o,r);this.__controller.seek(y(i),e,t),qe().setOptions(n).createLeftOf(this.__controller.cursor)},e.clickAt=function(e,n,o){o=o||document.elementFromPoint(e,n);var r=this.__controller,i=r.root;return t.contains(i.jQ[0],o)||(o=i.jQ[0]),r.seek(y(o),e+pageXOffset,n+pageYOffset),r.blurred&&this.focus(),this},e.ignoreNextMousedown=function(e){return this.__controller.cursor.options.ignoreNextMousedown=e,this}}),o.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},o.EditableField.prototype=r.EditableField.prototype,P)!function(t,n){var i=r[t]=n(r);o[t]=function(n,r){var a=o(n);if(a instanceof i||!n||!n.nodeType)return a;var s=S(i.RootBlock(),y(n),C());return s.KIND_OF_MQ=t,i(s).__mathquillify(r,e)},o[t].prototype=i.prototype}(l,P[l]);return o}q.noConflict=function(){return window.MathQuill=L,q};var L=window.MathQuill;function A(e){for(var t="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<t.length;n+=1)!function(t){e[t]=function(e){this.controller.handle(t,e)}}(t[n]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}window.MathQuill=q;var I=d(function(e,t,n){function o(e,t){throw"Parse Error: "+t+" at "+(e=e?"'"+e+"'":"EOF")}e.init=function(e){this._=e},e.parse=function(e){return this.skip(a)._(""+e,function(e,t){return t},o)},e.or=function(e){f("or is passed a parser",e instanceof n);var t=this;return n(function(n,o,r){return t._(n,o,function(t){return e._(n,o,r)})})},e.then=function(e){var t=this;return n(function(o,r,i){return t._(o,function(t,o){var a=e instanceof n?e:e(o);return f("a parser is returned",a instanceof n),a._(t,r,i)},i)})},e.many=function(){var e=this;return n(function(t,n,o){for(var r=[];e._(t,i,a););return n(t,r);function i(e,n){return t=e,r.push(n),!0}function a(){return!1}})},e.times=function(e,t){arguments.length<2&&(t=e);var o=this;return n(function(n,r,i){for(var a,s=[],l=!0,u=0;u<e;u+=1)if(!(l=o._(n,c,f)))return i(n,a);for(;u<t&&l;u+=1)l=o._(n,c,d);return r(n,s);function c(e,t){return s.push(t),n=e,!0}function f(e,t){return a=t,n=e,!1}function d(e,t){return!1}})},e.result=function(e){return this.then(i(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then(function(e){return t.many().map(function(t){return e.concat(t)})})},e.map=function(e){return this.then(function(t){return i(e(t))})},e.skip=function(e){return this.then(function(t){return e.result(t)})};this.string=function(e){var t=e.length,o="expected '"+e+"'";return n(function(n,r,i){var a=n.slice(0,t);return a===e?r(n.slice(t),a):i(n,o)})};var r=this.regex=function(e){f("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return n(function(n,o,r){var i=e.exec(n);if(i){var a=i[0];return o(n.slice(a.length),a)}return r(n,t)})},i=n.succeed=function(e){return n(function(t,n){return n(t,e)})},a=(n.fail=function(e){return n(function(t,n,o){return o(t,e)})},n.letter=r(/^[a-z]/i),n.letters=r(/^[a-z]*/i),n.digit=r(/^[0-9]/),n.digits=r(/^[0-9]*/),n.whitespace=r(/^\s+/),n.optWhitespace=r(/^\s*/),n.any=n(function(e,t,n){return e?t(e.slice(1),e.charAt(0)):n(e,"expected any character")}),n.all=n(function(e,t,n){return t("",e)}),n.eof=n(function(e,t,n){return e?n(e,"expected EOF"):t(e,e)}))}),F=function(){var e={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,o){var r,a=null,s=null,l=t(n),u=t(o.container||l),c=i;function f(e){c=e,clearTimeout(r),r=setTimeout(e)}u.bind("keydown keypress input keyup focusout paste",function(e){c(e)});var d=!1;function p(){var t,n,r,i,s;o.keystroke((r=(t=a).which||t.keyCode,i=e[r],s=[],t.ctrlKey&&s.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&s.push("Meta"),t.altKey&&s.push("Alt"),t.shiftKey&&s.push("Shift"),n=i||String.fromCharCode(r),s.length||i?(s.push(n),s.join("-")):n),a)}function h(){if(!("selectionStart"in(e=l[0])&&e.selectionStart!==e.selectionEnd)){var e,t=l.val();1===t.length?(l.val(""),o.typedText(t)):t&&l[0].select&&l[0].select()}}function m(){var e=l.val();l.val(""),e&&o.paste(e)}return u.bind({keydown:function(e){a=e,s=null,d&&f(function(e){e&&"focusout"===e.type||!l[0].select||l[0].select(),c=i,clearTimeout(r)}),p()},keypress:function(e){a&&s&&p(),s=e,f(h)},focusout:function(){a=s=null},paste:function(e){l.focus(),f(m)}}),{select:function(e){c(),c=i,clearTimeout(r),l.val(e),e&&l[0].select&&l[0].select(),d=!!e}}}}();S.open(function(e,t){e.exportText=function(){return this.root.foldChildren("",function(e,t){return e+t.text()})}}),S.open(function(e){e.focusBlurEvents=function(){var e,t=this,n=t.root,o=t.cursor;function r(){clearTimeout(e),o.selection&&o.selection.jQ.addClass("mq-blur"),i()}function i(){o.hide().parent.blur(),t.container.removeClass("mq-focused"),y(window).off("blur",r)}t.textarea.focus(function(){t.blurred=!1,clearTimeout(e),t.container.addClass("mq-focused"),o.parent||o.insAtRightEnd(n),o.selection?(o.selection.jQ.removeClass("mq-blur"),t.selectionChanged()):o.show()}).blur(function(){t.blurred=!0,e=setTimeout(function(){n.postOrder("intentionalBlur"),o.clearSelection().endSelection(),i()}),y(window).on("blur",r)}),t.blurred=!0,o.hide().parent.blur()}}),S.open(function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}}),b.open(function(e){e.keystroke=function(e,t,n){var o=n.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(p);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(h,e,t);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(p,e,t);case"End":n.notify("move").cursor.insAtRightEnd(o.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;o[h];)n.selectRight();break;case"Ctrl-Shift-End":for(;o[h]||o.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(o.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;o[p];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;o[p]||o.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(o[p])for(;o[p];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(o[h])for(;o[h];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(h);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);o[p];)n.selectLeft();break;default:return}t.preventDefault(),n.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){f("overridden or never called on this node")}}),S.open(function(e){function t(e,t){var n=e.notify("upDown").cursor,o=t+"Into",r=t+"OutOf";return n[h][o]?n.insAtLeftEnd(n[h][o]):n[p][o]?n.insAtRightEnd(n[p][o]):n.parent.bubble(function(e){var t=e[r];if(t&&("function"==typeof t&&(t=e[r](n)),t instanceof b&&n.jumpUpDown(e,t),!0!==t))return!1}),e}this.onNotify(function(e){"move"!==e&&"upDown"!==e||this.show().clearSelection()}),e.escapeDir=function(e,t,n){m(e);var o=this.cursor;if(o.parent!==this.root&&n.preventDefault(),o.parent!==this.root)return o.parent.moveOutOf(e,o),this.notify("move")},T.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){m(e);var t=this.cursor,n=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,n):t.parent.moveOutOf(e,t,n),this.notify("move")},e.moveLeft=function(){return this.moveDir(p)},e.moveRight=function(){return this.moveDir(h)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify(function(e){"upDown"!==e&&(this.upDownCache={})}),this.onNotify(function(e){"edit"===e&&this.show().deleteSelection()}),e.deleteDir=function(e){m(e);var t=this.cursor,n=t.selection;return this.notify("edit"),n||(t[e]?t[e].deleteTowards(e,t):t.parent.deleteOutOf(e,t)),t[p].siblingDeleted&&t[p].siblingDeleted(t.options,h),t[h].siblingDeleted&&t[h].siblingDeleted(t.options,p),t.parent.bubble("reflow"),this},e.ctrlDeleteDir=function(e){m(e);var t=this.cursor;return!t[p]||t.selection?ctrlr.deleteDir():(this.notify("edit"),w(t.parent.ends[p],t[p]).remove(),t.insAtDirEnd(p,t.parent),t[p].siblingDeleted&&t[p].siblingDeleted(t.options,h),t[h].siblingDeleted&&t[h].siblingDeleted(t.options,p),t.parent.bubble("reflow"),this)},e.backspace=function(){return this.deleteDir(p)},e.deleteForward=function(){return this.deleteDir(h)},this.onNotify(function(e){"select"!==e&&this.endSelection()}),e.selectDir=function(e){var t=this.notify("select").cursor,n=t.selection;m(e),t.anticursor||t.startSelection();var o=t[e];o?n&&n.ends[e]===o&&t.anticursor[-e]!==o?o.unselectInto(e,t):o.selectTowards(e,t):t.parent.selectOutOf(e,t),t.clearSelection(),t.select()||t.show()},e.selectLeft=function(){return this.selectDir(p)},e.selectRight=function(){return this.selectDir(h)}});var Q=function(){function e(e){for(var t=e[0]||W(),n=1;n<e.length;n+=1)e[n].children().adopt(t,t.ends[h],0);return t}var t=I.string,n=I.regex,o=I.letter,r=I.any,i=I.optWhitespace,a=I.succeed,s=I.fail,l=o.map(function(e){return te(e)}),u=n(/^[^${}\\_^]/).map(function(e){return V(e)}),c=n(/^[^\\a-eg-zA-Z]/).or(t("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(r))).then(function(e){var t=_[e];return t?t(e).parser():s("unknown command: \\"+e)}).or(l).or(u),f=t("{").then(function(){return p}).skip(t("}")),d=i.then(f.or(c.map(function(e){var t=W();return e.adopt(t,0,0),t}))),p=d.many().map(e).skip(i),m=t("[").then(d.then(function(e){return"]"!==e.join("latex")?a(e):s()}).many().map(e).skip(i)).skip(t("]")),y=p;return y.block=d,y.optBlock=m,y}();S.open(function(e,t){e.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.writeLatex=function(e){var t=this.notify("edit").cursor,n=I.all,o=I.eof,r=Q.skip(o).or(n.result(!1)).parse(e);r&&!r.isEmpty()&&(r.children().adopt(t.parent,t[p],t[h]),r.jQize().insertBefore(t.jQ),t[p]=r.ends[h],r.finalizeInsert(t.options,t),r.ends[h][h].siblingCreated&&r.ends[h][h].siblingCreated(t.options,p),r.ends[p][p].siblingCreated&&r.ends[p][p].siblingCreated(t.options,h),t.parent.bubble("reflow"));return this},e.renderLatexMath=function(e){var t=this.root,n=this.cursor,o=I.all,r=I.eof,i=Q.skip(r).or(o.result(!1)).parse(e);t.eachChild("postOrder","dispose"),t.ends[p]=t.ends[h]=0,i&&i.children().adopt(t,0,0);var a=t.jQ;if(i){var s=i.join("html");a.html(s),t.jQize(a.children()),t.finalizeInsert(n.options)}else a.empty();delete n.selection,n.insAtRightEnd(t)},e.renderLatexText=function(e){var t=this.root,n=this.cursor;t.jQ.children().slice(1).remove(),t.eachChild("postOrder","dispose"),t.ends[p]=t.ends[h]=0,delete n.selection,n.show().insAtRightEnd(t);var o=I.regex,r=I.string,i=I.eof,a=I.all,s=r("$").then(Q).skip(r("$").or(i)).map(function(e){var t=X(n);t.createBlocks();var o=t.ends[p];return e.children().adopt(o,0,0),t}),l=r("\\$").result("$").or(o(/^[^$]/)).map(V),u=s.or(l).many().skip(i).or(a.result(!1)).parse(e);if(u){for(var c=0;c<u.length;c+=1)u[c].adopt(t,t.ends[h],0);t.jQize().appendTo(t.jQ),t.finalizeInsert(n.options)}}}),S.open(function(t){C.p.ignoreNextMousedown=i,t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",function(o){var r,a=y(o.target).closest(".mq-root-block"),s=b.byId[a.attr(n)||t.attr(n)].controller,l=s.cursor,u=l.blink,c=s.textareaSpan,f=s.textarea;(o.preventDefault(),o.target.unselectable=!0,l.options.ignoreNextMousedown(o))||(l.options.ignoreNextMousedown=i,s.blurred&&(s.editable||a.prepend(c),f.focus()),l.blink=i,s.seek(y(o.target),o.pageX,o.pageY).cursor.startSelection(),a.mousemove(d),y(o.target.ownerDocument).mousemove(p).mouseup(function e(t){l.blink=u,l.selection||(s.editable?l.show():c.detach()),a.unbind("mousemove",d),y(t.target.ownerDocument).unbind("mousemove",p).unbind("mouseup",e)}));function d(e){r=y(e.target)}function p(t){l.anticursor||l.startSelection(),s.seek(r,t.pageX,t.pageY).cursor.select(),r=e}})}}),S.open(function(e){e.seek=function(e,t,o){var r=this.notify("select").cursor;if(e){var i=e.attr(n)||e.attr("mathquill-command-id");if(!i){var a=e.parent();i=a.attr(n)||a.attr("mathquill-command-id")}}var s=i?b.byId[i]:this.root;return f("nodeId is the id of some Node that exists",s),r.clearSelection().show(),s.seek(t,r),this.scrollHoriz(),this}}),S.open(function(e){e.scrollHoriz=function(){var e=this.cursor,t=e.selection,n=this.root.jQ[0].getBoundingClientRect();if(t){var o=t.jQ[0].getBoundingClientRect(),r=o.left-(n.left+20),i=o.right-(n.right-20);if(t.ends[p]===e[h])if(r<0)s=r;else{if(!(i>0))return;if(o.left-i<n.left+20)s=r;else s=i}else if(i>0)s=i;else{if(!(r<0))return;if(o.right-r>n.right-20)s=i;else s=r}}else{var a=e.jQ[0].getBoundingClientRect().left;if(a>n.right-20)var s=a-(n.right-20);else{if(!(a<n.left+20))return;var s=a-(n.left+20)}}this.root.jQ.stop().animate({scrollLeft:"+="+s},100)}}),S.open(function(t){C.p.substituteTextarea=function(){return y("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},t.createTextarea=function(){var e=this.textareaSpan=y('<span class="mq-textarea"></span>'),t=this.options.substituteTextarea();if(!t.nodeType)throw"substituteTextarea() must return a DOM element, got "+t;t=this.textarea=y(t).appendTo(e);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()},n.container.bind("copy",function(){n.setTextareaSelection()})},t.selectionChanged=function(){var t=this;ye(t.container[0]),t.textareaSelectionTimeout===e&&(t.textareaSelectionTimeout=setTimeout(function(){t.setTextareaSelection()}))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=e;var t="";this.cursor.selection&&(t=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(t="$"+t+"$")),this.selectFn(t)},t.staticMathTextareaEvents=function(){var e=this,t=(e.root,e.cursor),n=e.textarea,o=e.textareaSpan;function r(){o.detach(),e.blurred=!0}this.container.prepend('<span class="mq-selectable">$'+e.exportLatex()+"$</span>"),e.blurred=!0,n.bind("cut paste",!1).focus(function(){e.blurred=!1}).blur(function(){t.selection&&t.selection.clear(),setTimeout(r)}),e.selectFn=function(e){n.val(e),e&&n.select()}},t.editablesTextareaEvents=function(){var e=this,t=(e.root,e.cursor),n=e.textarea,o=e.textareaSpan,r=F(n,this);this.selectFn=function(e){r.select(e)},this.container.prepend(o).on("cut",function(n){t.selection&&setTimeout(function(){e.notify("edit"),t.parent.bubble("reflow")})}),this.focusBlurEvents()},t.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.write(t,e),this.scrollHoriz()},t.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show()}});var U=d(b,function(e,t){e.finalizeInsert=function(e,t){this.postOrder("finalizeTree",e),this.postOrder("contactWeld",t),this.postOrder("blur"),this.postOrder("reflow"),this[h].siblingCreated&&this[h].siblingCreated(e,p),this[p].siblingCreated&&this[p].siblingCreated(e,h),this.bubble("reflow")}}),B=d(U,function(e,t){e.init=function(e,n,o){t.init.call(this),this.ctrlSeq||(this.ctrlSeq=e),n&&(this.htmlTemplate=n),o&&(this.textTemplate=o)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,function(e,t){return e&&t.isEmpty()})},e.parser=function(){var e=Q.block,t=this;return e.times(t.numBlocks()).map(function(e){t.blocks=e;for(var n=0;n<e.length;n+=1)e[n].adopt(t,t.ends[h],0);return t})},e.createLeftOf=function(e){var n=this.replacedFragment;this.createBlocks(),t.createLeftOf.call(this,e),n&&(n.adopt(this.ends[p],0,0),n.jQ.appendTo(this.ends[p].jQ)),this.finalizeInsert(e.options),this.placeCursor(e)},e.createBlocks=function(){for(var e=this.numBlocks(),t=this.blocks=Array(e),n=0;n<e;n+=1){(t[n]=W()).adopt(this,this.ends[h],0)}},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[p],function(e,t){return e.isEmpty()?e:t}))},e.moveTowards=function(e,t,n){var o=n&&this[n+"Into"];t.insAtDirEnd(-e,o||this.ends[-e])},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return E(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function n(e){var t={};return t[p]=e.jQ.offset().left,t[h]=t[p]+e.jQ.outerWidth(),t}var o=this,r=n(o);if(e<r[p])return t.insLeftOf(o);if(e>r[h])return t.insRightOf(o);var i=r[p];o.eachChild(function(a){var s=n(a);return e<s[p]?(e-i<s[p]-e?a[p]?t.insAtRightEnd(a[p]):t.insLeftOf(o):t.insAtLeftEnd(a),!1):e>s[h]?void(a[h]?i=s[h]:r[h]-e<e-s[h]?t.insRightOf(o):t.insAtRightEnd(a)):(a.seek(e,t),!1)})},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e=this.blocks,t=" mathquill-command-id="+this.id,n=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);f("no unmatched angle brackets",n.join("")===this.htmlTemplate);for(var o=0,r=n[0];r;r=n[o+=1])if("/>"===r.slice(-2))n[o]=r.slice(0,-2)+t+"/>";else if("<"===r.charAt(0)){f("not an unmatched top-level close tag","/"!==r.charAt(1)),n[o]=r.slice(0,-1)+t+">";var i=1;do{f("no missing close tags",r=n[o+=1]),"</"===r.slice(0,2)?i-=1:"<"===r.charAt(0)&&"/>"!==r.slice(-2)&&(i+=1)}while(i>0)}return n.join("").replace(/>&(\d+)/g,function(t,n){return" mathquill-block-id="+e[n].id+">"+e[n].join("html")})},e.latex=function(){return this.foldChildren(this.ctrlSeq,function(e,t){return e+"{"+(t.latex()||" ")+"}"})},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],function(n,o){t+=1;var r=o.text();return n&&"("===e.textTemplate[t]&&"("===r[0]&&")"===r.slice(-1)?n+r.slice(1,-1)+e.textTemplate[t]:n+o.text()+(e.textTemplate[t]||"")})}}),z=d(B,function(e,t){e.init=function(e,n,o){o||(o=e&&e.length>1?e.slice(1):e),t.init.call(this,e,n,[o])},e.parser=function(){return I.succeed(this)},e.numBlocks=function(){return 0},e.replaces=function(e){e.remove()},e.createBlocks=i,e.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e]},e.deleteTowards=function(e,t){t[e]=this.remove()[e]},e.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},e.latex=function(){return this.ctrlSeq},e.text=function(){return this.textTemplate},e.placeCursor=i,e.isEmpty=function(){return!0}}),V=d(z,function(e,t){e.init=function(e,n){t.init.call(this,e,"<span>"+(n||e)+"</span>")}}),H=d(z,function(e,t){e.init=function(e,n,o){t.init.call(this,e,'<span class="mq-binary-operator">'+n+"</span>",o)}}),W=d(U,function(e,t){e.join=function(e){return this.foldChildren("",function(t,n){return t+n[e]()})},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[p]===this.ends[h]&&0!==this.ends[p]?this.ends[p].text():this.join("text")},e.keystroke=function(e,n,o){return!o.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(n.preventDefault(),void o.escapeDir("Shift-Spacebar"===e?p:h,e,n))},e.moveOutOf=function(e,t,n){!(n&&this.parent[n+"Into"])&&this[e]?t.insAtDirEnd(-e,this[e]):t.insDirOf(e,this.parent)},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var n=this.ends[h];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[p].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<n.jQ.offset().left;)n=n[p];return n.seek(e,t)},e.chToCmd=function(e){var t;return e.match(/^[a-eg-zA-Z]$/)?te(e):/^\d$/.test(e)?J(e):(t=O[e]||_[e])?t(e):V(e)},e.write=function(e,t){var n=this.chToCmd(t);e.selection&&n.replaces(e.replaceSelection()),n.createLeftOf(e.show())},e.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},e.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}});P.StaticMath=function(e){return d(e.AbstractMathQuill,function(t,n){this.RootBlock=W,t.__mathquillify=function(){return n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField)},t.latex=function(){var t=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField),t}})};var K=d(W,A);P.MathField=function(e){return d(e.EditableField,function(e,t){this.RootBlock=K,e.__mathquillify=function(e,n){return this.config(e),n>1&&(this.__controller.root.reflow=i),t.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}})};var G=d(b,function(e,t){function n(e){e.jQ[0].normalize();var t=e.jQ[0].firstChild;if(t){f("only node in TextBlock span is Text node",3===t.nodeType);var n=$(t.data);return n.jQadd(t),e.children().disown(),n.adopt(e,0,0)}}e.ctrlSeq="\\text",e.replaces=function(e){e instanceof w?this.replacedText=e.remove().jQ.text():"string"==typeof e&&(this.replacedText=e)},e.jQadd=function(e){t.jQadd.call(this,e),this.ends[p]&&this.ends[p].jQadd(this.jQ[0].firstChild)},e.createLeftOf=function(e){if(t.createLeftOf.call(this,e),this[h].siblingCreated&&this[h].siblingCreated(e.options,p),this[p].siblingCreated&&this[p].siblingCreated(e.options,h),this.bubble("reflow"),e.insAtRightEnd(this),this.replacedText)for(var n=0;n<this.replacedText.length;n+=1)this.write(e,this.replacedText.charAt(n))},e.parser=function(){var e=this,t=I.string,n=I.regex;return I.optWhitespace.then(t("{")).then(n(/^[^}]*/)).skip(t("}")).map(function(t){return 0===t.length?w():($(t).adopt(e,0,0),e)})},e.textContents=function(){return this.foldChildren("",function(e,t){return e+t.text})},e.text=function(){return'"'+this.textContents()+'"'},e.latex=function(){var e=this.textContents();return 0===e.length?"":"\\text{"+e+"}"},e.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},e.moveTowards=function(e,t){t.insAtDirEnd(-e,this)},e.moveOutOf=function(e,t){t.insDirOf(e,this)},e.unselectInto=e.moveTowards,e.selectTowards=B.prototype.selectTowards,e.deleteTowards=B.prototype.deleteTowards,e.selectOutOf=function(e,t){t.insDirOf(e,this)},e.deleteOutOf=function(e,t){this.isEmpty()&&t.insRightOf(this)},e.write=function(e,n){if(e.show().deleteSelection(),"$"!==n)e[p]?e[p].appendText(n):$(n).createLeftOf(e);else if(this.isEmpty())e.insRightOf(this),V("\\$","$").createLeftOf(e);else if(e[h])if(e[p]){var o=G(),r=this.ends[p];r.disown().jQ.detach(),r.adopt(o,0,0),e.insLeftOf(this),t.createLeftOf.call(o,e)}else e.insLeftOf(this);else e.insRightOf(this)},e.seek=function(e,t){t.hide();var o=n(this),r=this.jQ.width()/this.text.length,i=Math.round((e-this.jQ.offset().left)/r);i<=0?t.insAtLeftEnd(this):i>=o.text.length?t.insAtRightEnd(this):t.insLeftOf(o.splitRight(i));for(var a=e-t.show().offset().left,s=a&&a<0?p:h,l=s;t[s]&&a*l>0;)t[s].moveTowards(s,t),l=a,a=e-t.offset().left;if(s*a<-s*l&&t[-s].moveTowards(-s,t),t.anticursor){if(t.anticursor.parent===this){var u=t[p]&&t[p].text.length;if(this.anticursorPosition===u)t.anticursor=v.copy(t);else{if(this.anticursorPosition<u){var c=t[p].splitRight(this.anticursorPosition);t[p]=c}else c=t[h].splitRight(this.anticursorPosition-u);t.anticursor=v(this,c[p],c)}}}else this.anticursorPosition=t[p]&&t[p].text.length},e.blur=function(e){W.prototype.blur.call(this),e&&(""===this.textContents()?(this.remove(),e[p]===this?e[p]=this[p]:e[h]===this&&(e[h]=this[h])):n(this))},e.focus=W.prototype.focus}),$=d(b,function(e,t){function n(e,t){return t.charAt(e===p?0:-1+t.length)}e.init=function(e){t.init.call(this),this.text=e},e.jQadd=function(e){this.dom=e,this.jQ=y(e)},e.jQize=function(){return this.jQadd(document.createTextNode(this.text))},e.appendText=function(e){this.text+=e,this.dom.appendData(e)},e.prependText=function(e){this.text=e+this.text,this.dom.insertData(0,e)},e.insTextAtDirEnd=function(e,t){m(t),t===h?this.appendText(e):this.prependText(e)},e.splitRight=function(e){var t=$(this.text.slice(e)).adopt(this.parent,this,this[h]);return t.jQadd(this.dom.splitText(e)),this.text=this.text.slice(0,e),t},e.moveTowards=function(e,t){m(e);var o=n(-e,this.text),r=this[-e];return r?r.insTextAtDirEnd(o,e):$(o).createDir(-e,t),this.deleteTowards(e,t)},e.latex=function(){return this.text},e.deleteTowards=function(e,t){this.text.length>1?e===h?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),t[e]=this[e])},e.selectTowards=function(e,t){m(e);var o=t.anticursor,r=n(-e,this.text);if(o[e]===this){var i=$(r).createDir(e,t);o[e]=i,t.insDirOf(e,i)}else{var a=this[-e];if(a)a.insTextAtDirEnd(r,e);else(i=$(r).createDir(-e,t)).jQ.insDirOf(-e,t.selection.jQ);1===this.text.length&&o[-e]===this&&(o[-e]=this[-e])}return this.deleteTowards(e,t)}});function Y(e,t,n){return d(G,{ctrlSeq:e,htmlTemplate:"<"+t+" "+n+">&0</"+t+">"})}O.$=_.text=_.textnormal=_.textrm=_.textup=_.textmd=G,_.em=_.italic=_.italics=_.emph=_.textit=_.textsl=Y("\\textit","i",'class="mq-text-mode"'),_.strong=_.bold=_.textbf=Y("\\textbf","b",'class="mq-text-mode"'),_.sf=_.textsf=Y("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),_.tt=_.texttt=Y("\\texttt","span",'class="mq-monospace mq-text-mode"'),_.textsc=Y("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),_.uppercase=Y("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),_.lowercase=Y("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"');var X=d(B,function(e,t){e.init=function(e){t.init.call(this,"$"),this.cursor=e},e.htmlTemplate='<span class="mq-math-mode">&0</span>',e.createBlocks=function(){t.createBlocks.call(this),this.ends[p].cursor=this.cursor,this.ends[p].write=function(e,t){"$"!==t?W.prototype.write.call(this,e,t):this.isEmpty()?(e.insRightOf(this.parent),this.parent.deleteTowards(dir,e),V("\\$","$").createLeftOf(e.show())):e[h]?e[p]?W.prototype.write.call(this,e,t):e.insLeftOf(this.parent):e.insRightOf(this.parent)}},e.latex=function(){return"$"+this.ends[p].latex()+"$"}}),Z=d(K,function(e,t){e.keystroke=function(e){if("Spacebar"!==e&&"Shift-Spacebar"!==e)return t.keystroke.apply(this,arguments)},e.write=function(e,t){var n;(e.show().deleteSelection(),"$"===t)?X(e).createLeftOf(e):("<"===t?n="&lt;":">"===t&&(n="&gt;"),V(t,n).createLeftOf(e))}});P.TextField=function(e){return d(e.EditableField,function(e,t){this.RootBlock=Z,e.__mathquillify=function(){return t.__mathquillify.call(this,"mq-editable-field mq-text-mode")},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexText(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}})},_.notin=_.cong=_.equiv=_.oplus=_.otimes=d(H,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}}),_["≠"]=_.ne=_.neq=c(H,"\\ne ","&ne;"),_.ast=_.star=_.loast=_.lowast=c(H,"\\ast ","&lowast;"),_.therefor=_.therefore=c(H,"\\therefore ","&there4;"),_.cuz=_.because=c(H,"\\because ","&#8757;"),_.prop=_.propto=c(H,"\\propto ","&prop;"),_["≈"]=_.asymp=_.approx=c(H,"\\approx ","&asymp;"),_.isin=_.in=c(H,"\\in ","&isin;"),_.ni=_.contains=c(H,"\\ni ","&ni;"),_.notni=_.niton=_.notcontains=_.doesnotcontain=c(H,"\\not\\ni ","&#8716;"),_.sub=_.subset=c(H,"\\subset ","&sub;"),_.sup=_.supset=_.superset=c(H,"\\supset ","&sup;"),_.nsub=_.notsub=_.nsubset=_.notsubset=c(H,"\\not\\subset ","&#8836;"),_.nsup=_.notsup=_.nsupset=_.notsupset=_.nsuperset=_.notsuperset=c(H,"\\not\\supset ","&#8837;"),_.sube=_.subeq=_.subsete=_.subseteq=c(H,"\\subseteq ","&sube;"),_.supe=_.supeq=_.supsete=_.supseteq=_.supersete=_.superseteq=c(H,"\\supseteq ","&supe;"),_.nsube=_.nsubeq=_.notsube=_.notsubeq=_.nsubsete=_.nsubseteq=_.notsubsete=_.notsubseteq=c(H,"\\not\\subseteq ","&#8840;"),_.nsupe=_.nsupeq=_.notsupe=_.notsupeq=_.nsupsete=_.nsupseteq=_.notsupsete=_.notsupseteq=_.nsupersete=_.nsuperseteq=_.notsupersete=_.notsuperseteq=c(H,"\\not\\supseteq ","&#8841;"),_.N=_.naturals=_.Naturals=c(V,"\\mathbb{N}","&#8469;"),_.P=_.primes=_.Primes=_.projective=_.Projective=_.probability=_.Probability=c(V,"\\mathbb{P}","&#8473;"),_.Z=_.integers=_.Integers=c(V,"\\mathbb{Z}","&#8484;"),_.Q=_.rationals=_.Rationals=c(V,"\\mathbb{Q}","&#8474;"),_.R=_.reals=_.Reals=c(V,"\\mathbb{R}","&#8477;"),_.C=_.complex=_.Complex=_.complexes=_.Complexes=_.complexplane=_.Complexplane=_.ComplexPlane=c(V,"\\mathbb{C}","&#8450;"),_.H=_.Hamiltonian=_.quaternions=_.Quaternions=c(V,"\\mathbb{H}","&#8461;"),_.quad=_.emsp=c(V,"\\quad ","    "),_.qquad=c(V,"\\qquad ","        "),_.diamond=c(V,"\\diamond ","&#9671;"),_.bigtriangleup=c(V,"\\bigtriangleup ","&#9651;"),_.ominus=c(V,"\\ominus ","&#8854;"),_.uplus=c(V,"\\uplus ","&#8846;"),_.bigtriangledown=c(V,"\\bigtriangledown ","&#9661;"),_.sqcap=c(V,"\\sqcap ","&#8851;"),_.triangleleft=c(V,"\\triangleleft ","&#8882;"),_.sqcup=c(V,"\\sqcup ","&#8852;"),_.triangleright=c(V,"\\triangleright ","&#8883;"),_.odot=_.circledot=c(V,"\\odot ","&#8857;"),_.bigcirc=c(V,"\\bigcirc ","&#9711;"),_.dagger=c(V,"\\dagger ","&#0134;"),_.ddagger=c(V,"\\ddagger ","&#135;"),_.wr=c(V,"\\wr ","&#8768;"),_.amalg=c(V,"\\amalg ","&#8720;"),_.models=c(V,"\\models ","&#8872;"),_.prec=c(V,"\\prec ","&#8826;"),_.succ=c(V,"\\succ ","&#8827;"),_.preceq=c(V,"\\preceq ","&#8828;"),_.succeq=c(V,"\\succeq ","&#8829;"),_.simeq=c(V,"\\simeq ","&#8771;"),_.mid=c(V,"\\mid ","&#8739;"),_.ll=c(V,"\\ll ","&#8810;"),_.gg=c(V,"\\gg ","&#8811;"),_.parallel=c(V,"\\parallel ","&#8741;"),_.nparallel=c(V,"\\nparallel ","&#8742;"),_.bowtie=c(V,"\\bowtie ","&#8904;"),_.sqsubset=c(V,"\\sqsubset ","&#8847;"),_.sqsupset=c(V,"\\sqsupset ","&#8848;"),_.smile=c(V,"\\smile ","&#8995;"),_.sqsubseteq=c(V,"\\sqsubseteq ","&#8849;"),_.sqsupseteq=c(V,"\\sqsupseteq ","&#8850;"),_.doteq=c(V,"\\doteq ","&#8784;"),_.frown=c(V,"\\frown ","&#8994;"),_.vdash=c(V,"\\vdash ","&#8870;"),_.dashv=c(V,"\\dashv ","&#8867;"),_.nless=c(V,"\\nless ","&#8814;"),_.ngtr=c(V,"\\ngtr ","&#8815;"),_.longleftarrow=c(V,"\\longleftarrow ","&#8592;"),_.longrightarrow=c(V,"\\longrightarrow ","&#8594;"),_.Longleftarrow=c(V,"\\Longleftarrow ","&#8656;"),_.Longrightarrow=c(V,"\\Longrightarrow ","&#8658;"),_.longleftrightarrow=c(V,"\\longleftrightarrow ","&#8596;"),_.updownarrow=c(V,"\\updownarrow ","&#8597;"),_.Longleftrightarrow=c(V,"\\Longleftrightarrow ","&#8660;"),_.Updownarrow=c(V,"\\Updownarrow ","&#8661;"),_.mapsto=c(V,"\\mapsto ","&#8614;"),_.nearrow=c(V,"\\nearrow ","&#8599;"),_.hookleftarrow=c(V,"\\hookleftarrow ","&#8617;"),_.hookrightarrow=c(V,"\\hookrightarrow ","&#8618;"),_.searrow=c(V,"\\searrow ","&#8600;"),_.leftharpoonup=c(V,"\\leftharpoonup ","&#8636;"),_.rightharpoonup=c(V,"\\rightharpoonup ","&#8640;"),_.swarrow=c(V,"\\swarrow ","&#8601;"),_.leftharpoondown=c(V,"\\leftharpoondown ","&#8637;"),_.rightharpoondown=c(V,"\\rightharpoondown ","&#8641;"),_.nwarrow=c(V,"\\nwarrow ","&#8598;"),_.ldots=c(V,"\\ldots ","&#8230;"),_.cdots=c(V,"\\cdots ","&#8943;"),_.vdots=c(V,"\\vdots ","&#8942;"),_.ddots=c(V,"\\ddots ","&#8945;"),_.surd=c(V,"\\surd ","&#8730;"),_.triangle=c(V,"\\triangle ","&#9651;"),_.ell=c(V,"\\ell ","&#8467;"),_.top=c(V,"\\top ","&#8868;"),_.flat=c(V,"\\flat ","&#9837;"),_.natural=c(V,"\\natural ","&#9838;"),_.sharp=c(V,"\\sharp ","&#9839;"),_.wp=c(V,"\\wp ","&#8472;"),_.bot=c(V,"\\bot ","&#8869;"),_.clubsuit=c(V,"\\clubsuit ","&#9827;"),_.diamondsuit=c(V,"\\diamondsuit ","&#9826;"),_.heartsuit=c(V,"\\heartsuit ","&#9825;"),_.spadesuit=c(V,"\\spadesuit ","&#9824;"),_.parallelogram=c(V,"\\parallelogram ","&#9649;"),_.square=c(V,"\\square ","&#11036;"),_.oint=c(V,"\\oint ","&#8750;"),_.bigcap=c(V,"\\bigcap ","&#8745;"),_.bigcup=c(V,"\\bigcup ","&#8746;"),_.bigsqcup=c(V,"\\bigsqcup ","&#8852;"),_.bigvee=c(V,"\\bigvee ","&#8744;"),_.bigwedge=c(V,"\\bigwedge ","&#8743;"),_.bigodot=c(V,"\\bigodot ","&#8857;"),_.bigotimes=c(V,"\\bigotimes ","&#8855;"),_.bigoplus=c(V,"\\bigoplus ","&#8853;"),_.biguplus=c(V,"\\biguplus ","&#8846;"),_.lfloor=c(V,"\\lfloor ","&#8970;"),_.rfloor=c(V,"\\rfloor ","&#8971;"),_.lceil=c(V,"\\lceil ","&#8968;"),_.rceil=c(V,"\\rceil ","&#8969;"),_.opencurlybrace=_.lbrace=c(V,"\\lbrace ","{"),_.closecurlybrace=_.rbrace=c(V,"\\rbrace ","}"),_.lbrack=c(V,"["),_.rbrack=c(V,"]"),_.slash=c(V,"/"),_.vert=c(V,"|"),_.perp=_.perpendicular=c(V,"\\perp ","&perp;"),_.nabla=_.del=c(V,"\\nabla ","&nabla;"),_.hbar=c(V,"\\hbar ","&#8463;"),_.AA=_.Angstrom=_.angstrom=c(V,"\\text\\AA ","&#8491;"),_.ring=_.circ=_.circle=c(V,"\\circ ","&#8728;"),_.bull=_.bullet=c(V,"\\bullet ","&bull;"),_.setminus=_.smallsetminus=c(V,"\\setminus ","&#8726;"),_.not=_["¬"]=_.neg=c(V,"\\neg ","&not;"),_["…"]=_.dots=_.ellip=_.hellip=_.ellipsis=_.hellipsis=c(V,"\\dots ","&hellip;"),_.converges=_.darr=_.dnarr=_.dnarrow=_.downarrow=c(V,"\\downarrow ","&darr;"),_.dArr=_.dnArr=_.dnArrow=_.Downarrow=c(V,"\\Downarrow ","&dArr;"),_.diverges=_.uarr=_.uparrow=c(V,"\\uparrow ","&uarr;"),_.uArr=_.Uparrow=c(V,"\\Uparrow ","&uArr;"),_.to=c(H,"\\to ","&rarr;"),_.rarr=_.rightarrow=c(V,"\\rightarrow ","&rarr;"),_.implies=c(H,"\\Rightarrow ","&rArr;"),_.rArr=_.Rightarrow=c(V,"\\Rightarrow ","&rArr;"),_.gets=c(H,"\\gets ","&larr;"),_.larr=_.leftarrow=c(V,"\\leftarrow ","&larr;"),_.impliedby=c(H,"\\Leftarrow ","&lArr;"),_.lArr=_.Leftarrow=c(V,"\\Leftarrow ","&lArr;"),_.harr=_.lrarr=_.leftrightarrow=c(V,"\\leftrightarrow ","&harr;"),_.iff=c(H,"\\Leftrightarrow ","&hArr;"),_.hArr=_.lrArr=_.Leftrightarrow=c(V,"\\Leftrightarrow ","&hArr;"),_.Re=_.Real=_.real=c(V,"\\Re ","&real;"),_.Im=_.imag=_.image=_.imagin=_.imaginary=_.Imaginary=c(V,"\\Im ","&image;"),_.part=_.partial=c(V,"\\partial ","&part;"),_.infty=_.infin=_.infinity=c(V,"\\infty ","&infin;"),_.alef=_.alefsym=_.aleph=_.alephsym=c(V,"\\aleph ","&alefsym;"),_.xist=_.xists=_.exist=_.exists=c(V,"\\exists ","&exist;"),_.nexists=_.nexist=c(V,"\\nexists ","&#8708;"),_.and=_.land=_.wedge=c(V,"\\wedge ","&and;"),_.or=_.lor=_.vee=c(V,"\\vee ","&or;"),_.o=_.O=_.empty=_.emptyset=_.oslash=_.Oslash=_.nothing=_.varnothing=c(H,"\\varnothing ","&empty;"),_.cup=_.union=c(H,"\\cup ","&cup;"),_.cap=_.intersect=_.intersection=c(H,"\\cap ","&cap;"),_.deg=_.degree=c(V,"\\degree ","&deg;"),_.ang=_.angle=c(V,"\\angle ","&ang;"),_.measuredangle=c(V,"\\measuredangle ","&#8737;");var J=d(V,function(e,t){e.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[p]instanceof ee&&!1!==e[p].isItalic||e[p]instanceof we&&e[p][p]instanceof ee&&!1!==e[p][p].isItalic)?(_._().createLeftOf(e),t.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.createLeftOf.call(this,e)}}),ee=d(z,function(e,t){e.init=function(e,n){t.init.call(this,e,"<var>"+(n||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return!this[p]||this[p]instanceof ee||this[p]instanceof H||"\\ "===this[p].ctrlSeq||(e="*"+e),!this[h]||this[h]instanceof H||this[h]instanceof we||(e+="*"),e}});C.p.autoCommands={_maxLength:0},T.autoCommands=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},o=0,i=0;i<t.length;i+=1){var a=t[i];if(a.length<2)throw'autocommand "'+a+'" not minimum length of 2';if(_[a]===ie)throw'"'+a+'" is a built-in operator name';n[a]=1,o=r(o,a.length)}return n._maxLength=o,n};var te=d(ee,function(e,t){function n(e){return!e||e instanceof H||e instanceof Oe}e.init=function(e){return t.init.call(this,this.letter=e)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments);var n=e.options.autoCommands,o=n._maxLength;if(o>0){for(var r="",i=this,a=0;i instanceof te&&i.ctrlSeq===i.letter&&a<o;)r=i.letter+r,i=i[p],a+=1;for(;r.length;){if(n.hasOwnProperty(r)){for(a=1,i=this;a<r.length;a+=1,i=i[p]);return w(i,this).remove(),e[p]=i[p],_[r](r).createLeftOf(e)}r=r.slice(1)}}},e.italicize=function(e){return this.isItalic=e,this.jQ.toggleClass("mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==p&&this[h]instanceof te||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t=e.autoOperatorNames;if(0!==t._maxLength){for(var r=this.letter,i=this[p];i instanceof te;i=i[p])r=i.letter+r;for(var a=this[h];a instanceof te;a=a[h])r+=a.letter;w(i[h]||this.parent.ends[p],a[p]||this.parent.ends[h]).each(function(e){e.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),e.ctrlSeq=e.letter});e:for(var s=0,l=i[h]||this.parent.ends[p];s<r.length;s+=1,l=l[h])for(var u=o(t._maxLength,r.length-s);u>0;u-=1){var c=r.slice(s,s+u);if(t.hasOwnProperty(c)){for(var f=0,d=l;f<u;f+=1,d=d[h]){d.italicize(!1);var m=d}var y=ne.hasOwnProperty(c);if(l.ctrlSeq=(y?"\\":"\\operatorname{")+l.ctrlSeq,m.ctrlSeq+=y?" ":"}",re.hasOwnProperty(c)&&m[p][p][p].jQ.addClass("mq-last"),n(l[p])||l.jQ.addClass("mq-first"),!n(m[h]))if(m[h]instanceof we){var v=m[h];(v.siblingCreated=v.siblingDeleted=function(){v.jQ.toggleClass("mq-after-operator-name",!(v[h]instanceof Te))})()}else m.jQ.toggleClass("mq-last",!(m[h]instanceof Te));s+=u-1,l=m;continue e}}}}}),ne={},oe=C.p.autoOperatorNames={_maxLength:9},re={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var e="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),t=0;t<e.length;t+=1)ne[e[t]]=oe[e[t]]=1;var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" ");for(t=0;t<n.length;t+=1)ne[n[t]]=1;var o="sin cos tan sec cosec csc cotan cot ctg".split(" ");for(t=0;t<o.length;t+=1)oe[o[t]]=oe["arc"+o[t]]=oe[o[t]+"h"]=oe["ar"+o[t]+"h"]=oe["arc"+o[t]+"h"]=1;var r="gcf hcf lcm proj span".split(" ");for(t=0;t<r.length;t+=1)oe[r[t]]=1}(),T.autoOperatorNames=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},o=0,i=0;i<t.length;i+=1){var a=t[i];if(a.length<2)throw'"'+a+'" not minimum length of 2';n[a]=1,o=r(o,a.length)}return n._maxLength=o,n};var ie=d(z,function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){for(var t=this.ctrlSeq,n=0;n<t.length;n+=1)te(t.charAt(n)).createLeftOf(e)},e.parser=function(){for(var e=this.ctrlSeq,t=W(),n=0;n<e.length;n+=1)te(e.charAt(n)).adopt(t,t.ends[h],0);return I.succeed(t.children())}});for(var ae in oe)oe.hasOwnProperty(ae)&&(_[ae]=ie);_.operatorname=d(B,function(e){e.createLeftOf=i,e.numBlocks=function(){return 1},e.parser=function(){return Q.block.map(function(e){return e.children()})}}),_.f=d(te,function(e,t){e.init=function(){z.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("mq-f",e),t.italicize.apply(this,arguments)}}),_[" "]=_.space=c(V,"\\ ","&nbsp;"),_["'"]=_.prime=c(V,"'","&prime;"),_.backslash=c(V,"\\backslash ","\\"),O["\\"]||(O["\\"]=_.backslash),_.$=c(V,"\\$","$");var se=d(z,function(e,t){e.init=function(e,n){t.init.call(this,e,'<span class="mq-nonSymbola">'+(n||e)+"</span>")}});_["@"]=se,_["&"]=c(se,"\\&","&amp;"),_["%"]=c(se,"\\%","%"),_.alpha=_.beta=_.gamma=_.delta=_.zeta=_.eta=_.theta=_.iota=_.kappa=_.mu=_.nu=_.xi=_.rho=_.sigma=_.tau=_.chi=_.psi=_.omega=d(ee,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}}),_.phi=c(ee,"\\phi ","&#981;"),_.phiv=_.varphi=c(ee,"\\varphi ","&phi;"),_.epsilon=c(ee,"\\epsilon ","&#1013;"),_.epsiv=_.varepsilon=c(ee,"\\varepsilon ","&epsilon;"),_.piv=_.varpi=c(ee,"\\varpi ","&piv;"),_.sigmaf=_.sigmav=_.varsigma=c(ee,"\\varsigma ","&sigmaf;"),_.thetav=_.vartheta=_.thetasym=c(ee,"\\vartheta ","&thetasym;"),_.upsilon=_.upsi=c(ee,"\\upsilon ","&upsilon;"),_.gammad=_.Gammad=_.digamma=c(ee,"\\digamma ","&#989;"),_.kappav=_.varkappa=c(ee,"\\varkappa ","&#1008;"),_.rhov=_.varrho=c(ee,"\\varrho ","&#1009;"),_.pi=_["π"]=c(se,"\\pi ","&pi;"),_.lambda=c(se,"\\lambda ","&lambda;"),_.Upsilon=_.Upsi=_.upsih=_.Upsih=c(z,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),_.Gamma=_.Delta=_.Theta=_.Lambda=_.Xi=_.Pi=_.Sigma=_.Phi=_.Psi=_.Omega=_.forall=d(V,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}});var le=d(B,function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=Q.parse(this.latex);t.children().adopt(e.parent,e[p],e[h]),e[p]=t.ends[h],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[h][h].siblingCreated&&t.ends[h][h].siblingCreated(e.options,p),t.ends[p][p].siblingCreated&&t.ends[p][p].siblingCreated(e.options,h),e.parent.bubble("reflow")},e.parser=function(){var e=Q.parse(this.latex).children();return I.succeed(e)}});_["¹"]=c(le,"^1"),_["²"]=c(le,"^2"),_["³"]=c(le,"^3"),_["¼"]=c(le,"\\frac14"),_["½"]=c(le,"\\frac12"),_["¾"]=c(le,"\\frac34");var ue=d(H,function(e){e.init=V.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){if(t!==h)return this.jQ[0].className=!this[p]||this[p]instanceof H||/^[,;:\(\[]$/.test(this[p].ctrlSeq)?"":"mq-binary-operator",this}});_["+"]=c(ue,"+","+"),_["–"]=_["-"]=c(ue,"-","&minus;"),_["±"]=_.pm=_.plusmn=_.plusminus=c(ue,"\\pm ","&plusmn;"),_.mp=_.mnplus=_.minusplus=c(ue,"\\mp ","&#8723;"),O["*"]=_.sdot=_.cdot=c(H,"\\cdot ","&middot;","*");var ce=d(H,function(e,t){e.init=function(e,n){this.data=e,this.strict=n;var o=n?"Strict":"";t.init.call(this,e["ctrlSeq"+o],e["html"+o],e["text"+o])},e.swap=function(e){this.strict=e;var t=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]]},e.deleteTowards=function(e,n){if(e===p&&!this.strict)return this.swap(!0),void this.bubble("reflow");t.deleteTowards.apply(this,arguments)}}),fe={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},de={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"};_["<"]=_.lt=c(ce,fe,!0),_[">"]=_.gt=c(ce,de,!0),_["≤"]=_.le=_.leq=c(ce,fe,!1),_["≥"]=_.ge=_.geq=c(ce,de,!1);var pe=d(H,function(e,t){e.init=function(){t.init.call(this,"=","=")},e.createLeftOf=function(e){if(e[p]instanceof ce&&e[p].strict)return e[p].swap(!1),void e[p].bubble("reflow");t.createLeftOf.apply(this,arguments)}});_["="]=pe,_["×"]=_.times=c(H,"\\times ","&times;","[x]"),_["÷"]=_.div=_.divide=_.divides=c(H,"\\div ","&divide;","[/]"),O["~"]=_.sim=c(H,"\\sim ","~","~");var he,me,ye=i,ve=document.createElement("div").style;for(var be in{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(be in ve){me=be;break}me?he=function(e,t,n){e.css(me,"scale("+t+","+n+")")}:"filter"in ve?(ye=function(e){e.className=e.className},he=function(e,t,n){t/=1+(n-1)/2,e.css("fontSize",n+"em"),e.hasClass("mq-matrixed-container")||e.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>');var o=e.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+t+",SizingMethod='auto expand')");function r(){e.css("marginRight",(o.width()-1)*(t-1)/t+"px")}r();var i=setInterval(r);y(window).load(function(){clearTimeout(i),r()})}):he=function(e,t,n){e.css("fontSize",n+"em")};var ge=d(B,function(e,t){e.init=function(e,n,o){t.init.call(this,e,"<"+n+" "+o+">&0</"+n+">")}});_.mathrm=c(ge,"\\mathrm","span",'class="mq-roman mq-font"'),_.mathit=c(ge,"\\mathit","i",'class="mq-font"'),_.mathbf=c(ge,"\\mathbf","b",'class="mq-font"'),_.mathsf=c(ge,"\\mathsf","span",'class="mq-sans-serif mq-font"'),_.mathtt=c(ge,"\\mathtt","span",'class="mq-monospace mq-font"'),_.underline=c(ge,"\\underline","span",'class="mq-non-leaf mq-underline"'),_.overline=_.bar=c(ge,"\\overline","span",'class="mq-non-leaf mq-overline"'),_.overrightarrow=c(ge,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),_.overleftarrow=c(ge,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"');_.textcolor=d(B,function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,n=I.optWhitespace,o=I.string,r=I.regex;return n.then(o("{")).then(r(/^[#\w\s.,()%-]*/)).skip(o("}")).then(function(n){return e.setColor(n),t.parser.call(e)})}}),_.class=d(B,function(e,t){e.parser=function(){var e=this,n=I.string,o=I.regex;return I.optWhitespace.then(n("{")).then(o(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n){return e.htmlTemplate='<span class="mq-class '+n+'">&0</span>',t.parser.call(e)})}});var we=d(B,function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){if(e[p]||!e.options.supSubsRequireOperand)return t.createLeftOf.apply(this,arguments)},e.contactWeld=function(e){for(var t=p;t;t=t===p&&h)if(this[t]instanceof we){for(var n="sub";n;n="sub"===n&&"sup"){var o=this[n],r=this[t][n];if(o){if(r)if(o.isEmpty())a=v(r,0,r.ends[p]);else{o.jQ.children().insAtDirEnd(-t,r.jQ);var i=o.children().disown(),a=v(r,i.ends[h],r.ends[p]);t===p?i.adopt(r,r.ends[h],0):i.adopt(r,0,r.ends[p])}else this[t].addBlock(o.disown());this.placeCursor=function(e,n){return function(o){o.insAtDirEnd(-t,e||n)}}(r,o)}}this.remove(),e&&e[p]===this&&(t===h&&a?a[p]?e.insRightOf(a[p]):e.insAtLeftEnd(a.parent):e.insRightOf(this[t]));break}},C.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[p].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var n=this.chToCmd(t);return n instanceof z?e.deleteSelection():e.clearSelection().insRightOf(this.parent),n.createLeftOf(e.show())}e[p]&&!e[h]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(t)>-1&&e.insRightOf(this.parent),W.p.write.apply(this,arguments)}},e.moveTowards=function(e,n,o){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,n){if(n.options.autoSubscriptNumerals&&this.sub){var o=this.sub.ends[-e];o instanceof z?o.remove():o&&o.deleteTowards(e,n.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(p,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-e,this))}else t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var n=t&&t.latex();return t?e+(1===n.length?n:"{"+(n||" ")+"}"):""}return e("_",this.sub)+e("^",this.sup)},e.addBlock=function(e){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=y('<span class="mq-sup"/>').append(e.jQ.children()).attr(n,e.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=y('<span class="mq-sub"></span>').append(e.jQ.children()).attr(n,e.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;t<2;t+=1)!function(e,t,n,o){e[t].deleteOutOf=function(r,i){if(i.insDirOf(this[r]?-r:r,this.parent),!this.isEmpty()){var a=this.ends[r];this.children().disown().withDirAdopt(r,i.parent,i[r],i[-r]).jQ.insDirOf(-r,i.jQ),i[-r]=a}e.supsub=n,delete e[t],delete e[o+"Into"],e[n][o+"OutOf"]=_e,delete e[n].deleteOutOf,"sub"===t&&y(e.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}});function _e(e){var t=this.parent,n=e;do{if(n[h])return e.insLeftOf(t);n=n.parent.parent}while(n!==t);e.insRightOf(t)}_.subscript=_._=d(we,function(e,t){e.supsub="sub",e.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.finalizeTree=function(){this.downInto=this.sub=this.ends[p],this.sub.upOutOf=_e,t.finalizeTree.call(this)}}),_.superscript=_.supscript=_["^"]=d(we,function(e,t){e.supsub="sup",e.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',e.textTemplate=["^"],e.finalizeTree=function(){this.upInto=this.sup=this.ends[h],this.sup.downOutOf=_e,t.finalizeTree.call(this)}});var Oe=d(B,function(e,t){e.init=function(e,t){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+t+'</big><span class="mq-from"><span>&0</span></span></span>';z.prototype.init.call(this,e,n)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(te("n").createLeftOf(e),pe().createLeftOf(e))},e.latex=function(){function e(e){return 1===e.length?e:"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[p].latex())+"^"+e(this.ends[h].latex())},e.parser=function(){for(var e=I.string,t=I.optWhitespace,n=I.succeed,o=Q.block,r=this,i=r.blocks=[W(),W()],a=0;a<i.length;a+=1)i[a].adopt(r,r.ends[h],0);return t.then(e("_").or(e("^"))).then(function(e){var t=i["_"===e?0:1];return o.then(function(e){return e.children().adopt(t,t.ends[h],0),n(r)})}).many().result(r)},e.finalizeTree=function(){this.downInto=this.ends[p],this.upInto=this.ends[h],this.ends[p].upOutOf=this.ends[h],this.ends[h].downOutOf=this.ends[p]}});_["∑"]=_.sum=_.summation=c(Oe,"\\sum ","&sum;"),_["∏"]=_.prod=_.product=c(Oe,"\\prod ","&prod;"),_.coprod=_.coproduct=c(Oe,"\\coprod ","&#8720;"),_["∫"]=_.int=_.integral=d(Oe,function(e,t){e.init=function(){z.prototype.init.call(this,"\\int ",'<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>')},e.createLeftOf=B.p.createLeftOf});var xe=_.frac=_.dfrac=_.cfrac=_.fraction=d(B,function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[h].upOutOf=this.ends[p],this.downInto=this.ends[p].downOutOf=this.ends[h]}}),Ee=_.over=O["/"]=d(xe,function(e,t){e.createLeftOf=function(e){if(!this.replacedFragment){for(var n=e[p];n&&!(n instanceof H||n instanceof(_.text||i)||n instanceof Oe||"\\ "===n.ctrlSeq||/^[,;:]$/.test(n.ctrlSeq));)n=n[p];n instanceof Oe&&n[h]instanceof we&&(n=n[h])[h]instanceof we&&n[h].ctrlSeq!=n.ctrlSeq&&(n=n[h]),n!==e[p]&&(this.replaces(w(n[h]||e.parent.ends[p],e[p])),e[p]=n)}t.createLeftOf.call(this,e)}}),Se=_.sqrt=_["√"]=d(B,function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.parser=function(){return Q.optBlock.then(function(e){return Q.block.map(function(t){var n=Pe();return n.blocks=[e,t],e.adopt(n,0,0),t.adopt(n,e,0),n})}).or(t.parser.call(this))},e.reflow=function(){var e=this.ends[h].jQ;he(e.prev(),1,e.innerHeight()/+e.css("fontSize").slice(0,-2)-.1)}}),Pe=(_.vec=d(B,function(e,t){e.ctrlSeq="\\vec",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;</span><span class="mq-vector-stem">&0</span></span>',e.textTemplate=["vec(",")"]}),_.nthroot=d(Se,function(e,t){e.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[p].latex()+"]{"+this.ends[h].latex()+"}"}}));function Ce(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},e.reflow=function(){var e=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));he(this.delimjQs,o(1+.2*(e-1),1.2),1.2*e)}}var Te=d(d(B,Ce),function(t,n){t.init=function(t,o,r,i,a){n.init.call(this,"\\left"+i,e,[o,r]),this.side=t,this.sides={},this.sides[p]={ch:o,ctrlSeq:i},this.sides[h]={ch:r,ctrlSeq:a}},t.numBlocks=function(){return 1},t.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(this.side===h?" mq-ghost":"")+'">'+this.sides[p].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===p?" mq-ghost":"")+'">'+this.sides[h].ch+"</span></span>",n.html.call(this)},t.latex=function(){return"\\left"+this.sides[p].ctrlSeq+this.ends[p].latex()+"\\right"+this.sides[h].ctrlSeq},t.oppBrack=function(e,t,n){return t instanceof Te&&t.side&&t.side!==-n&&("|"===this.sides[this.side].ch||t.side===-this.side)&&(!e.restrictMismatchedBrackets||ke[this.sides[this.side].ch]===t.sides[t.side].ch||{"(":"]","[":")"}[this.sides[p].ch]===t.sides[h].ch)&&t},t.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side],e.delimjQs.eq(this.side===p?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},t.createLeftOf=function(e){if(!this.replacedFragment)var t=e.options,o=this.oppBrack(t,e[p],p)||this.oppBrack(t,e[h],h)||this.oppBrack(t,e.parent.parent);if(o){var r=this.side=-o.side;this.closeOpposing(o),o===e.parent.parent&&e[r]&&(w(e[r],e.parent.ends[r],-r).disown().withDirAdopt(-r,o.parent,o,o[r]).jQ.insDirOf(r,o.jQ),o.bubble("reflow"))}else r=(o=this).side,o.replacedFragment?o.side=0:e[-r]&&(o.replaces(w(e[-r],e.parent.ends[-r],r)),e[-r]=0),n.createLeftOf.call(o,e);r===p?e.insAtLeftEnd(o.ends[p]):e.insRightOf(o)},t.placeCursor=i,t.unwrap=function(){this.ends[p].children().disown().adopt(this.parent,this,this[h]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(e,t,n){var o=this.parent,r=this[e],i=o.ends[e];if(e===this.side)return this.unwrap(),void(r?n.insDirOf(-e,r):n.insAtDirEnd(e,o));var a=n.options,s=!this.side;if(this.side=-e,this.oppBrack(a,this.ends[p].ends[this.side],e)){this.closeOpposing(this.ends[p].ends[this.side]);var l=this.ends[p].ends[e];this.unwrap(),l.siblingCreated&&l.siblingCreated(n.options,e),r?n.insDirOf(-e,r):n.insAtDirEnd(e,o)}else{if(this.oppBrack(a,this.parent.parent,e))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&s)return this.unwrap(),void(r?n.insDirOf(-e,r):n.insAtDirEnd(e,o));this.sides[e]={ch:ke[this.sides[this.side].ch],ctrlSeq:ke[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(e===p?0:1).addClass("mq-ghost").html(this.sides[e].ch)}if(r){l=this.ends[p].ends[e];w(r,i,-e).disown().withDirAdopt(-e,this.ends[p],l,0).jQ.insAtDirEnd(e,this.ends[p].jQ.removeClass("mq-empty")),l.siblingCreated&&l.siblingCreated(n.options,e),n.insDirOf(-e,r)}else t?n.insDirOf(e,this):n.insAtDirEnd(e,this.ends[p])}},t.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},t.finalizeTree=function(){this.ends[p].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===p?1:0).removeClass("mq-ghost"),this.side=0}},t.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}}),ke={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"};function je(e,t){t=t||e;var n=ke[e],o=ke[t];O[e]=c(Te,p,e,n,t,o),O[n]=c(Te,h,e,n,t,o)}je("("),je("["),je("{","\\{"),_.langle=c(Te,p,"&lang;","&rang;","\\langle ","\\rangle "),_.rangle=c(Te,h,"&lang;","&rang;","\\langle ","\\rangle "),O["|"]=c(Te,p,"|","|","|","|"),_.left=d(B,function(e){e.parser=function(){var e=I.regex,t=I.string,n=(I.succeed,I.optWhitespace);return n.then(e(/^(?:[([|]|\\\{)/)).then(function(o){var r="\\"===o.charAt(0)?o.slice(1):o;return Q.then(function(i){return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\})/)).map(function(e){var t="\\"===e.charAt(0)?e.slice(1):e,n=Te(0,r,t,o,e);return n.blocks=[i],i.adopt(n,0,0),n})})})}}),_.right=d(B,function(e){e.parser=function(){return I.fail("unmatched \\right")}});var Me=_.binom=_.binomial=d(d(B,Ce),function(e,t){e.ctrlSeq="\\binom",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',e.textTemplate=["choose(",",",")"]});_.choose=d(Me,function(e){e.createLeftOf=Ee.prototype.createLeftOf});_.editable=_.MathQuillMathField=d(B,function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',e.parser=function(){var e=this,n=I.string,o=I.regex,r=I.succeed;return n("[").then(o(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(t){e.name=t}).or(r()).then(t.parser.call(e))},e.finalizeTree=function(){var e=S(this.ends[p],this.jQ,C());e.KIND_OF_MQ="MathField",e.editable=!0,e.createTextarea(),e.editablesTextareaEvents(),e.cursor.insAtRightEnd(e.root),A(e.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[p].controller))},e.latex=function(){return this.ends[p].latex()},e.text=function(){return this.ends[p].text()}});var qe=_.embed=d(z,function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){var e=this;return string=I.string,regex=I.regex,succeed=I.succeed,string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then(function(t){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map(function(n){return e.setOptions(j[t](n))})})}}),De=(O["\\"]=d(B,function(e,t){e.ctrlSeq="\\",e.replaces=function(e){this._replacedFragment=e.disown(),this.isEmpty=function(){return!1}},e.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',e.textTemplate=["\\"],e.createBlocks=function(){t.createBlocks.call(this),this.ends[p].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[p].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[p].write=function(e,t){e.show().deleteSelection(),t.match(/[a-z]/i)?V(t).createLeftOf(e):(this.parent.renderCommand(e),"\\"===t&&this.isEmpty()||this.parent.parent.write(e,t))},this.ends[p].keystroke=function(e,n,o){return"Tab"===e||"Enter"===e||"Spacebar"===e?(this.parent.renderCommand(o.cursor),void n.preventDefault()):t.keystroke.apply(this,arguments)}},e.createLeftOf=function(e){if(t.createLeftOf.call(this,e),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",function(e){return y(e.target=n).trigger(e),!1}).insertBefore(this.jQ).add(this.jQ)}},e.latex=function(){return"\\"+this.ends[p].latex()+" "},e.renderCommand=function(e){this.jQ=this.jQ.last(),this.remove(),this[h]?e.insLeftOf(this[h]):e.insAtRightEnd(this.parent);var t=this.ends[p].latex();t||(t=" ");var n=_[t];n?(n=n(t),this._replacedFragment&&n.replaces(this._replacedFragment),n.createLeftOf(e)):((n=G()).replaces(t),n.createLeftOf(e),e.insRightOf(n),this._replacedFragment&&this._replacedFragment.remove())}}),R(1));for(var Ne in De)!function(e,t){"function"==typeof t?(q[e]=function(){return M(),t.apply(this,arguments)},q[e].prototype=t.prototype):q[e]=t}(Ne,De[Ne])}()}}]);
//# sourceMappingURL=https://s3-us-west-2.amazonaws.com/udacity-classroom-web/js/vendors~routes-courses~routes-nanodegrees.7e752.js.map